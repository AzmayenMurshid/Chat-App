{"ast":null,"code":"import { systemToComponent as t } from \"@virtuoso.dev/react-urx\";\nimport * as e from \"@virtuoso.dev/urx\";\nimport { getValue as n, tup as o, system as r, stream as i, streamFromEmitter as a, pipe as l, map as s, connect as u, prop as c, combineLatest as m, filter as d, distinctUntilChanged as f, statefulStream as p, noop as h, subscribe as g, publish as v, statefulStreamFromEmitter as S, withLatestFrom as I, compose as C } from \"@virtuoso.dev/urx\";\nimport * as x from \"react\";\nimport { useRef as T, useCallback as w, useEffect as y, useLayoutEffect as b, createElement as E } from \"react\";\n\nfunction H() {\n  return H = Object.assign || function (t) {\n    for (var e = 1; e < arguments.length; e++) {\n      var n = arguments[e];\n\n      for (var o in n) Object.prototype.hasOwnProperty.call(n, o) && (t[o] = n[o]);\n    }\n\n    return t;\n  }, H.apply(this, arguments);\n}\n\nfunction R(t, e) {\n  if (null == t) return {};\n  var n,\n      o,\n      r = {},\n      i = Object.keys(t);\n\n  for (o = 0; o < i.length; o++) e.indexOf(n = i[o]) >= 0 || (r[n] = t[n]);\n\n  return r;\n}\n\nfunction L(t, e) {\n  (null == e || e > t.length) && (e = t.length);\n\n  for (var n = 0, o = new Array(e); n < e; n++) o[n] = t[n];\n\n  return o;\n}\n\nfunction k(t, e) {\n  var n = \"undefined\" != typeof Symbol && t[Symbol.iterator] || t[\"@@iterator\"];\n  if (n) return (n = n.call(t)).next.bind(n);\n\n  if (Array.isArray(t) || (n = function (t, e) {\n    if (t) {\n      if (\"string\" == typeof t) return L(t, e);\n      var n = Object.prototype.toString.call(t).slice(8, -1);\n      return \"Object\" === n && t.constructor && (n = t.constructor.name), \"Map\" === n || \"Set\" === n ? Array.from(t) : \"Arguments\" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? L(t, e) : void 0;\n    }\n  }(t)) || e && t && \"number\" == typeof t.length) {\n    n && (t = n);\n    var o = 0;\n    return function () {\n      return o >= t.length ? {\n        done: !0\n      } : {\n        done: !1,\n        value: t[o++]\n      };\n    };\n  }\n\n  throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nfunction z(t, e) {\n  return !(!t || t[0] !== e[0] || t[1] !== e[1]);\n}\n\nfunction B(t, e) {\n  return !(!t || t.startIndex !== e.startIndex || t.endIndex !== e.endIndex);\n}\n\nvar F,\n    P,\n    O = e.system(function () {\n  var t = e.stream(),\n      n = e.stream(),\n      o = e.statefulStream(0),\n      r = e.stream(),\n      i = e.statefulStream(0),\n      a = e.stream(),\n      l = e.stream(),\n      s = e.statefulStream(0),\n      u = e.statefulStream(0),\n      c = e.stream(),\n      m = e.stream(),\n      d = e.statefulStream(!1);\n  return e.connect(e.pipe(t, e.map(function (t) {\n    return t[0];\n  })), n), e.connect(e.pipe(t, e.map(function (t) {\n    return t[1];\n  })), l), e.connect(n, i), {\n    scrollContainerState: t,\n    scrollTop: n,\n    viewportHeight: a,\n    headerHeight: s,\n    footerHeight: u,\n    scrollHeight: l,\n    smoothScrollTargetReached: r,\n    scrollTo: c,\n    scrollBy: m,\n    statefulScrollTop: i,\n    deviation: o,\n    scrollingInProgress: d\n  };\n}, [], {\n  singleton: !0\n});\n!function (t) {\n  t[t.DEBUG = 0] = \"DEBUG\", t[t.INFO = 1] = \"INFO\", t[t.WARN = 2] = \"WARN\", t[t.ERROR = 3] = \"ERROR\";\n}(P || (P = {}));\nvar M = ((F = {})[P.DEBUG] = \"debug\", F[P.INFO] = \"log\", F[P.WARN] = \"warn\", F[P.ERROR] = \"error\", F),\n    V = e.system(function () {\n  var t = e.statefulStream(P.ERROR);\n  return {\n    log: e.statefulStream(function (n, o, r) {\n      var i;\n      void 0 === r && (r = P.INFO), r >= (null != (i = (\"undefined\" == typeof globalThis ? window : globalThis).VIRTUOSO_LOG_LEVEL) ? i : e.getValue(t)) && console[M[r]](\"%creact-virtuoso: %c%s %o\", \"color: #0253b3; font-weight: bold\", \"color: initial\", n, o);\n    }),\n    logLevel: t\n  };\n}, [], {\n  singleton: !0\n}),\n    U = e.system(function (t) {\n  var o = t[0].log,\n      r = e.statefulStream(!1),\n      i = e.streamFromEmitter(e.pipe(r, e.filter(function (t) {\n    return t;\n  }), e.distinctUntilChanged()));\n  return e.subscribe(r, function (t) {\n    t && n(o)(\"props updated\", {}, P.DEBUG);\n  }), {\n    propsReady: r,\n    didMount: i\n  };\n}, o(V), {\n  singleton: !0\n}),\n    A = \"up\",\n    W = {\n  atBottom: !1,\n  notAtBottomBecause: \"NOT_SHOWING_LAST_ITEM\",\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0\n  }\n},\n    N = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollContainerState,\n      r = n.scrollTop,\n      i = n.viewportHeight,\n      a = n.headerHeight,\n      l = n.footerHeight,\n      s = n.scrollBy,\n      u = e.statefulStream(!1),\n      c = e.statefulStream(!0),\n      m = e.stream(),\n      d = e.stream(),\n      f = e.statefulStream(4),\n      p = e.streamFromEmitter(e.pipe(e.merge(e.pipe(e.duc(r), e.skip(1), e.mapTo(!0)), e.pipe(e.duc(r), e.skip(1), e.mapTo(!1), e.debounceTime(100))), e.distinctUntilChanged())),\n      h = e.statefulStreamFromEmitter(e.pipe(e.merge(e.pipe(s, e.mapTo(!0)), e.pipe(s, e.mapTo(!1), e.debounceTime(200))), e.distinctUntilChanged()), !1);\n  e.connect(e.pipe(e.duc(r), e.map(function (t) {\n    return 0 === t;\n  }), e.distinctUntilChanged()), c), e.connect(c, d);\n  var g = e.streamFromEmitter(e.pipe(e.combineLatest(o, e.duc(i), e.duc(a), e.duc(l), e.duc(f)), e.scan(function (t, e) {\n    var n,\n        o,\n        r = e[0],\n        i = r[0],\n        a = r[1],\n        l = e[1],\n        s = {\n      viewportHeight: l,\n      scrollTop: i,\n      scrollHeight: a\n    };\n    return i + l - a > -e[4] ? (i > t.state.scrollTop ? (n = \"SCROLLED_DOWN\", o = t.state.scrollTop - i) : (n = \"SIZE_DECREASED\", o = t.state.scrollTop - i || t.scrollTopDelta), {\n      atBottom: !0,\n      state: s,\n      atBottomBecause: n,\n      scrollTopDelta: o\n    }) : {\n      atBottom: !1,\n      notAtBottomBecause: s.scrollHeight > t.state.scrollHeight ? \"SIZE_INCREASED\" : l < t.state.viewportHeight ? \"VIEWPORT_HEIGHT_DECREASING\" : i < t.state.scrollTop ? \"SCROLLING_UPWARDS\" : \"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM\",\n      state: s\n    };\n  }, W), e.distinctUntilChanged(function (t, e) {\n    return t && t.atBottom === e.atBottom;\n  }))),\n      v = e.statefulStreamFromEmitter(e.pipe(o, e.scan(function (t, e) {\n    var n = e[0],\n        o = e[1];\n    return t.scrollHeight !== o ? t.scrollTop !== n ? {\n      scrollHeight: o,\n      scrollTop: n,\n      jump: t.scrollTop - n,\n      changed: !0\n    } : {\n      scrollHeight: o,\n      scrollTop: n,\n      jump: 0,\n      changed: !0\n    } : {\n      scrollTop: n,\n      scrollHeight: o,\n      jump: 0,\n      changed: !1\n    };\n  }, {\n    scrollHeight: 0,\n    jump: 0,\n    scrollTop: 0,\n    changed: !1\n  }), e.filter(function (t) {\n    return t.changed;\n  }), e.map(function (t) {\n    return t.jump;\n  })), 0);\n  e.connect(e.pipe(g, e.map(function (t) {\n    return t.atBottom;\n  })), u), e.connect(e.pipe(u, e.throttleTime(50)), m);\n  var S = e.statefulStream(\"down\");\n  e.connect(e.pipe(o, e.map(function (t) {\n    return t[0];\n  }), e.distinctUntilChanged(), e.scan(function (t, n) {\n    return e.getValue(h) ? {\n      direction: t.direction,\n      prevScrollTop: n\n    } : {\n      direction: n < t.prevScrollTop ? A : \"down\",\n      prevScrollTop: n\n    };\n  }, {\n    direction: \"down\",\n    prevScrollTop: 0\n  }), e.map(function (t) {\n    return t.direction;\n  })), S), e.connect(e.pipe(o, e.throttleTime(50), e.mapTo(\"none\")), S);\n  var I = e.statefulStream(0);\n  return e.connect(e.pipe(p, e.filter(function (t) {\n    return !t;\n  }), e.mapTo(0)), I), e.connect(e.pipe(r, e.throttleTime(100), e.withLatestFrom(p), e.filter(function (t) {\n    return !!t[1];\n  }), e.scan(function (t, e) {\n    return [t[1], e[0]];\n  }, [0, 0]), e.map(function (t) {\n    return t[1] - t[0];\n  })), I), {\n    isScrolling: p,\n    isAtTop: c,\n    isAtBottom: u,\n    atBottomState: g,\n    atTopStateChange: d,\n    atBottomStateChange: m,\n    scrollDirection: S,\n    atBottomThreshold: f,\n    scrollVelocity: I,\n    lastJumpDueToItemResize: v\n  };\n}, e.tup(O)),\n    D = e.system(function (t) {\n  var n = t[0].scrollVelocity,\n      o = e.statefulStream(!1),\n      r = e.stream(),\n      i = e.statefulStream(!1);\n  return e.connect(e.pipe(n, e.withLatestFrom(i, o, r), e.filter(function (t) {\n    return !!t[1];\n  }), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        o = t[2],\n        r = t[3],\n        i = n.enter;\n\n    if (o) {\n      if ((0, n.exit)(e, r)) return !1;\n    } else if (i(e, r)) return !0;\n\n    return o;\n  }), e.distinctUntilChanged()), o), e.subscribe(e.pipe(e.combineLatest(o, n, r), e.withLatestFrom(i)), function (t) {\n    var e = t[0],\n        n = t[1];\n    return e[0] && n && n.change && n.change(e[1], e[2]);\n  }), {\n    isSeeking: o,\n    scrollSeekConfiguration: i,\n    scrollVelocity: n,\n    scrollSeekRangeChanged: r\n  };\n}, e.tup(N), {\n  singleton: !0\n}),\n    G = {\n  lvl: 0\n};\n\nfunction _(t, e, n, o, r) {\n  return void 0 === o && (o = G), void 0 === r && (r = G), {\n    k: t,\n    v: e,\n    lvl: n,\n    l: o,\n    r: r\n  };\n}\n\nfunction j(t) {\n  return t === G;\n}\n\nfunction K() {\n  return G;\n}\n\nfunction Y(t, e) {\n  if (j(t)) return G;\n  var n = t.k,\n      o = t.l,\n      r = t.r;\n\n  if (e === n) {\n    if (j(o)) return r;\n    if (j(r)) return o;\n    var i = Q(o);\n    return nt(tt(t, {\n      k: i[0],\n      v: i[1],\n      l: X(o)\n    }));\n  }\n\n  return nt(tt(t, e < n ? {\n    l: Y(o, e)\n  } : {\n    r: Y(r, e)\n  }));\n}\n\nfunction Z(t, e, n) {\n  if (void 0 === n && (n = \"k\"), j(t)) return [-Infinity, void 0];\n  if (t[n] === e) return [t.k, t.v];\n\n  if (t[n] < e) {\n    var o = Z(t.r, e, n);\n    return -Infinity === o[0] ? [t.k, t.v] : o;\n  }\n\n  return Z(t.l, e, n);\n}\n\nfunction q(t, e, n) {\n  return j(t) ? _(e, n, 1) : e === t.k ? tt(t, {\n    k: e,\n    v: n\n  }) : function (t) {\n    return it(at(t));\n  }(tt(t, e < t.k ? {\n    l: q(t.l, e, n)\n  } : {\n    r: q(t.r, e, n)\n  }));\n}\n\nfunction J(t, e, n) {\n  if (j(t)) return [];\n  var o = t.k,\n      r = t.v,\n      i = t.r,\n      a = [];\n  return o > e && (a = a.concat(J(t.l, e, n))), o >= e && o <= n && a.push({\n    k: o,\n    v: r\n  }), o <= n && (a = a.concat(J(i, e, n))), a;\n}\n\nfunction $(t) {\n  return j(t) ? [] : [].concat($(t.l), [{\n    k: t.k,\n    v: t.v\n  }], $(t.r));\n}\n\nfunction Q(t) {\n  return j(t.r) ? [t.k, t.v] : Q(t.r);\n}\n\nfunction X(t) {\n  return j(t.r) ? t.l : nt(tt(t, {\n    r: X(t.r)\n  }));\n}\n\nfunction tt(t, e) {\n  return _(void 0 !== e.k ? e.k : t.k, void 0 !== e.v ? e.v : t.v, void 0 !== e.lvl ? e.lvl : t.lvl, void 0 !== e.l ? e.l : t.l, void 0 !== e.r ? e.r : t.r);\n}\n\nfunction et(t) {\n  return j(t) || t.lvl > t.r.lvl;\n}\n\nfunction nt(t) {\n  var e = t.l,\n      n = t.r,\n      o = t.lvl;\n  if (n.lvl >= o - 1 && e.lvl >= o - 1) return t;\n\n  if (o > n.lvl + 1) {\n    if (et(e)) return at(tt(t, {\n      lvl: o - 1\n    }));\n    if (j(e) || j(e.r)) throw new Error(\"Unexpected empty nodes\");\n    return tt(e.r, {\n      l: tt(e, {\n        r: e.r.l\n      }),\n      r: tt(t, {\n        l: e.r.r,\n        lvl: o - 1\n      }),\n      lvl: o\n    });\n  }\n\n  if (et(t)) return it(tt(t, {\n    lvl: o - 1\n  }));\n  if (j(n) || j(n.l)) throw new Error(\"Unexpected empty nodes\");\n  var r = n.l,\n      i = et(r) ? n.lvl - 1 : n.lvl;\n  return tt(r, {\n    l: tt(t, {\n      r: r.l,\n      lvl: o - 1\n    }),\n    r: it(tt(n, {\n      l: r.r,\n      lvl: i\n    })),\n    lvl: r.lvl + 1\n  });\n}\n\nfunction ot(t, e, n) {\n  return j(t) ? [] : rt(J(t, Z(t, e)[0], n), function (t) {\n    return {\n      index: t.k,\n      value: t.v\n    };\n  });\n}\n\nfunction rt(t, e) {\n  var n = t.length;\n  if (0 === n) return [];\n\n  for (var o = e(t[0]), r = o.index, i = o.value, a = [], l = 1; l < n; l++) {\n    var s = e(t[l]),\n        u = s.index,\n        c = s.value;\n    a.push({\n      start: r,\n      end: u - 1,\n      value: i\n    }), r = u, i = c;\n  }\n\n  return a.push({\n    start: r,\n    end: Infinity,\n    value: i\n  }), a;\n}\n\nfunction it(t) {\n  var e = t.r,\n      n = t.lvl;\n  return j(e) || j(e.r) || e.lvl !== n || e.r.lvl !== n ? t : tt(e, {\n    l: tt(t, {\n      r: e.l\n    }),\n    lvl: n + 1\n  });\n}\n\nfunction at(t) {\n  var e = t.l;\n  return j(e) || e.lvl !== t.lvl ? t : tt(e, {\n    r: tt(t, {\n      l: e.r\n    })\n  });\n}\n\nfunction lt(t, e, n, o) {\n  void 0 === o && (o = 0);\n\n  for (var r = t.length - 1; o <= r;) {\n    var i = Math.floor((o + r) / 2),\n        a = n(t[i], e);\n    if (0 === a) return i;\n\n    if (-1 === a) {\n      if (r - o < 2) return i - 1;\n      r = i - 1;\n    } else {\n      if (r === o) return i;\n      o = i + 1;\n    }\n  }\n\n  throw new Error(\"Failed binary finding record in array - \" + t.join(\",\") + \", searched for \" + e);\n}\n\nfunction st(t, e, n) {\n  return t[lt(t, e, n)];\n}\n\nfunction ut(t, e) {\n  return Math.round(t.getBoundingClientRect()[e]);\n}\n\nfunction ct(t) {\n  var e = t.size,\n      n = t.startIndex,\n      o = t.endIndex;\n  return function (t) {\n    return t.start === n && (t.end === o || Infinity === t.end) && t.value === e;\n  };\n}\n\nfunction mt(t, e) {\n  var n = t.index;\n  return e === n ? 0 : e < n ? -1 : 1;\n}\n\nfunction dt(t, e) {\n  var n = t.offset;\n  return e === n ? 0 : e < n ? -1 : 1;\n}\n\nfunction ft(t) {\n  return {\n    index: t.index,\n    value: t\n  };\n}\n\nfunction pt(t, e, n) {\n  var o = t,\n      r = 0,\n      i = 0,\n      a = 0,\n      l = 0;\n\n  if (0 !== e) {\n    a = o[l = lt(o, e - 1, mt)].offset;\n    var s = Z(n, e - 1);\n    r = s[0], i = s[1], o.length && o[l].size === Z(n, e)[1] && (l -= 1), o = o.slice(0, l + 1);\n  } else o = [];\n\n  for (var u, c = k(ot(n, e, Infinity)); !(u = c()).done;) {\n    var m = u.value,\n        d = m.start,\n        f = m.value,\n        p = (d - r) * i + a;\n    o.push({\n      offset: p,\n      size: f,\n      index: d\n    }), r = d, a = p, i = f;\n  }\n\n  return {\n    offsetTree: o,\n    lastIndex: r,\n    lastOffset: a,\n    lastSize: i\n  };\n}\n\nfunction ht(t, e) {\n  var n = e[0],\n      o = e[1];\n  n.length > 0 && (0, e[2])(\"received item sizes\", n, P.DEBUG);\n  var r = t.sizeTree,\n      i = r,\n      a = 0;\n\n  if (o.length > 0 && j(r) && 2 === n.length) {\n    var l = n[0].size,\n        s = n[1].size;\n    i = o.reduce(function (t, e) {\n      return q(q(t, e, l), e + 1, s);\n    }, i);\n  } else {\n    var u = function (t, e) {\n      for (var n, o = j(t) ? 0 : Infinity, r = k(e); !(n = r()).done;) {\n        var i = n.value,\n            a = i.size,\n            l = i.startIndex,\n            s = i.endIndex;\n        if (o = Math.min(o, l), j(t)) t = q(t, 0, a);else {\n          var u = ot(t, l - 1, s + 1);\n\n          if (!u.some(ct(i))) {\n            for (var c, m = !1, d = !1, f = k(u); !(c = f()).done;) {\n              var p = c.value,\n                  h = p.start,\n                  g = p.end,\n                  v = p.value;\n              m ? (s >= h || a === v) && (t = Y(t, h)) : (d = v !== a, m = !0), g > s && s >= h && v !== a && (t = q(t, s + 1, v));\n            }\n\n            d && (t = q(t, l, a));\n          }\n        }\n      }\n\n      return [t, o];\n    }(i, n);\n\n    i = u[0], a = u[1];\n  }\n\n  if (i === r) return t;\n  var c = pt(t.offsetTree, a, i),\n      m = c.offsetTree;\n  return {\n    sizeTree: i,\n    offsetTree: m,\n    lastIndex: c.lastIndex,\n    lastOffset: c.lastOffset,\n    lastSize: c.lastSize,\n    groupOffsetTree: o.reduce(function (t, e) {\n      return q(t, e, gt(e, m));\n    }, K()),\n    groupIndices: o\n  };\n}\n\nfunction gt(t, e) {\n  if (0 === e.length) return 0;\n  var n = st(e, t, mt);\n  return n.size * (t - n.index) + n.offset;\n}\n\nfunction vt(t, e) {\n  if (!St(e)) return t;\n\n  for (var n = 0; e.groupIndices[n] <= t + n;) n++;\n\n  return t + n;\n}\n\nfunction St(t) {\n  return !j(t.groupOffsetTree);\n}\n\nvar It = {\n  offsetHeight: \"height\",\n  offsetWidth: \"width\"\n},\n    Ct = e.system(function (t) {\n  var n = t[0].log,\n      o = e.stream(),\n      r = e.stream(),\n      i = e.statefulStreamFromEmitter(r, 0),\n      a = e.stream(),\n      l = e.stream(),\n      s = e.statefulStream(0),\n      u = e.statefulStream([]),\n      c = e.statefulStream(void 0),\n      m = e.statefulStream(void 0),\n      d = e.statefulStream(function (t, e) {\n    return ut(t, It[e]);\n  }),\n      f = e.statefulStream(void 0),\n      p = {\n    offsetTree: [],\n    sizeTree: K(),\n    groupOffsetTree: K(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: []\n  },\n      h = e.statefulStreamFromEmitter(e.pipe(o, e.withLatestFrom(u, n), e.scan(ht, p), e.distinctUntilChanged()), p);\n  e.connect(e.pipe(u, e.filter(function (t) {\n    return t.length > 0;\n  }), e.withLatestFrom(h), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        o = e.reduce(function (t, e, o) {\n      return q(t, e, gt(e, n.offsetTree) || o);\n    }, K());\n    return H({}, n, {\n      groupIndices: e,\n      groupOffsetTree: o\n    });\n  })), h), e.connect(e.pipe(r, e.withLatestFrom(h), e.filter(function (t) {\n    return t[0] < t[1].lastIndex;\n  }), e.map(function (t) {\n    var e = t[1];\n    return [{\n      startIndex: t[0],\n      endIndex: e.lastIndex,\n      size: e.lastSize\n    }];\n  })), o), e.connect(c, m);\n  var g = e.statefulStreamFromEmitter(e.pipe(c, e.map(function (t) {\n    return void 0 === t;\n  })), !0);\n  e.connect(e.pipe(m, e.filter(function (t) {\n    return void 0 !== t && j(e.getValue(h).sizeTree);\n  }), e.map(function (t) {\n    return [{\n      startIndex: 0,\n      endIndex: 0,\n      size: t\n    }];\n  })), o);\n  var v = e.streamFromEmitter(e.pipe(o, e.withLatestFrom(h), e.scan(function (t, e) {\n    var n = e[1];\n    return {\n      changed: n !== t.sizes,\n      sizes: n\n    };\n  }, {\n    changed: !1,\n    sizes: p\n  }), e.map(function (t) {\n    return t.changed;\n  })));\n  e.subscribe(e.pipe(s, e.scan(function (t, e) {\n    return {\n      diff: t.prev - e,\n      prev: e\n    };\n  }, {\n    diff: 0,\n    prev: 0\n  }), e.map(function (t) {\n    return t.diff;\n  })), function (t) {\n    t > 0 ? e.publish(a, t) : t < 0 && e.publish(l, t);\n  }), e.subscribe(e.pipe(s, e.withLatestFrom(n)), function (t) {\n    t[0] < 0 && (0, t[1])(\"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\", {\n      firstItemIndex: s\n    }, P.ERROR);\n  });\n  var S = e.streamFromEmitter(a);\n  e.connect(e.pipe(a, e.withLatestFrom(h), e.map(function (t) {\n    var e = t[0],\n        n = t[1];\n    if (n.groupIndices.length > 0) throw new Error(\"Virtuoso: prepending items does not work with groups\");\n    return $(n.sizeTree).reduce(function (t, n) {\n      var o = n.k,\n          r = n.v;\n      return {\n        ranges: [].concat(t.ranges, [{\n          startIndex: t.prevIndex,\n          endIndex: o + e - 1,\n          size: t.prevSize\n        }]),\n        prevIndex: o + e,\n        prevSize: r\n      };\n    }, {\n      ranges: [],\n      prevIndex: 0,\n      prevSize: n.lastSize\n    }).ranges;\n  })), o);\n  var I = e.streamFromEmitter(e.pipe(l, e.withLatestFrom(h), e.map(function (t) {\n    return gt(-t[0], t[1].offsetTree);\n  })));\n  return e.connect(e.pipe(l, e.withLatestFrom(h), e.map(function (t) {\n    var e = t[0],\n        n = t[1];\n    if (n.groupIndices.length > 0) throw new Error(\"Virtuoso: shifting items does not work with groups\");\n    var o = $(n.sizeTree).reduce(function (t, n) {\n      var o = n.v;\n      return q(t, Math.max(0, n.k + e), o);\n    }, K());\n    return H({}, n, {\n      sizeTree: o\n    }, pt(n.offsetTree, 0, o));\n  })), h), {\n    data: f,\n    totalCount: r,\n    sizeRanges: o,\n    groupIndices: u,\n    defaultItemSize: m,\n    fixedItemSize: c,\n    unshiftWith: a,\n    shiftWith: l,\n    shiftWithOffset: I,\n    beforeUnshiftWith: S,\n    firstItemIndex: s,\n    sizes: h,\n    listRefresh: v,\n    statefulTotalCount: i,\n    trackItemSizes: g,\n    itemSize: d\n  };\n}, e.tup(V), {\n  singleton: !0\n}),\n    xt = \"undefined\" != typeof document && \"scrollBehavior\" in document.documentElement.style;\n\nfunction Tt(t) {\n  var e = \"number\" == typeof t ? {\n    index: t\n  } : t;\n  return e.align || (e.align = \"start\"), e.behavior && xt || (e.behavior = \"auto\"), e.offset || (e.offset = 0), e;\n}\n\nvar wt = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.totalCount,\n      i = n.listRefresh,\n      a = t[1],\n      l = a.scrollingInProgress,\n      s = a.viewportHeight,\n      u = a.scrollTo,\n      c = a.smoothScrollTargetReached,\n      m = a.headerHeight,\n      d = a.footerHeight,\n      f = t[2].log,\n      p = e.stream(),\n      h = e.statefulStream(0),\n      g = null,\n      v = null,\n      S = null;\n\n  function I() {\n    g && (g(), g = null), S && (S(), S = null), v && (clearTimeout(v), v = null), e.publish(l, !1);\n  }\n\n  return e.connect(e.pipe(p, e.withLatestFrom(o, s, r, h, m, d, f), e.map(function (t) {\n    var n = t[0],\n        o = t[1],\n        r = t[2],\n        a = t[3],\n        s = t[4],\n        u = t[5],\n        m = t[6],\n        d = t[7],\n        f = Tt(n),\n        h = f.align,\n        C = f.behavior,\n        x = f.offset,\n        T = a - 1,\n        w = f.index;\n    \"LAST\" === w && (w = T), w = vt(w, o);\n    var y = gt(w = Math.max(0, w, Math.min(T, w)), o.offsetTree) + u;\n    \"end\" === h ? (y = y - r + Z(o.sizeTree, w)[1], w === T && (y += m)) : \"center\" === h ? y = y - r / 2 + Z(o.sizeTree, w)[1] / 2 : y -= s, x && (y += x);\n\n    var b = function (t) {\n      I(), t ? (d(\"retrying to scroll to\", {\n        location: n\n      }, P.DEBUG), e.publish(p, n)) : d(\"list did not change, scroll successful\", {}, P.DEBUG);\n    };\n\n    if (I(), \"smooth\" === C) {\n      var E = !1;\n      S = e.subscribe(i, function (t) {\n        E = E || t;\n      }), g = e.handleNext(c, function () {\n        b(E);\n      });\n    } else g = e.handleNext(e.pipe(i, function (t) {\n      var e = setTimeout(function () {\n        t(!1);\n      }, 50);\n      return function (n) {\n        n && (t(!0), clearTimeout(e));\n      };\n    }), b);\n\n    return v = setTimeout(function () {\n      I();\n    }, 1200), e.publish(l, !0), d(\"scrolling from index to\", {\n      index: w,\n      top: y,\n      behavior: C\n    }, P.DEBUG), {\n      top: y,\n      behavior: C\n    };\n  })), u), {\n    scrollToIndex: p,\n    topListHeight: h\n  };\n}, e.tup(Ct, O, V), {\n  singleton: !0\n});\n\nfunction yt(t, e, n) {\n  return \"number\" == typeof t ? n === A && \"top\" === e || \"down\" === n && \"bottom\" === e ? t : 0 : n === A ? \"top\" === e ? t.main : t.reverse : \"bottom\" === e ? t.main : t.reverse;\n}\n\nfunction bt(t, e) {\n  return \"number\" == typeof t ? t : t[e] || 0;\n}\n\nvar Et = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollTop,\n      r = n.viewportHeight,\n      i = n.deviation,\n      a = n.headerHeight,\n      l = e.stream(),\n      s = e.statefulStream(0),\n      u = e.statefulStream(0),\n      c = e.statefulStream(0),\n      m = e.statefulStream(0),\n      d = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(e.duc(o), e.duc(r), e.duc(a), e.duc(l, z), e.duc(m), e.duc(s), e.duc(u), e.duc(i), e.duc(c)), e.map(function (t) {\n    var e = t[0],\n        n = t[1],\n        o = t[2],\n        r = t[3],\n        i = r[0],\n        a = r[1],\n        l = t[4],\n        s = t[6],\n        u = t[7],\n        c = t[8],\n        m = e - u,\n        d = t[5] + s,\n        f = Math.max(o - m, 0),\n        p = \"none\",\n        h = bt(c, \"top\"),\n        g = bt(c, \"bottom\");\n    return i -= u, a += o + s, (i += o + s) > e + d - h && (p = A), (a -= u) < e - f + n + g && (p = \"down\"), \"none\" !== p ? [Math.max(m - o - yt(l, \"top\", p) - h, 0), m - f - s + n + yt(l, \"bottom\", p) + g] : null;\n  }), e.filter(function (t) {\n    return null != t;\n  }), e.distinctUntilChanged(z)), [0, 0]);\n  return {\n    listBoundary: l,\n    overscan: m,\n    topListHeight: s,\n    fixedHeaderHeight: u,\n    increaseViewportBy: c,\n    visibleRange: d\n  };\n}, e.tup(O), {\n  singleton: !0\n}),\n    Ht = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollTo,\n      r = n.scrollContainerState,\n      i = e.stream(),\n      a = e.stream(),\n      l = e.stream(),\n      s = e.statefulStream(!1),\n      u = e.statefulStream(void 0);\n  return e.connect(e.pipe(e.combineLatest(i, a), e.map(function (t) {\n    var e = t[0],\n        n = e[1];\n    return [Math.max(0, e[0] - t[1].offsetTop), n];\n  })), r), e.connect(e.pipe(o, e.withLatestFrom(a), e.map(function (t) {\n    var e = t[0];\n    return H({}, e, {\n      top: e.top + t[1].offsetTop\n    });\n  })), l), {\n    useWindowScroll: s,\n    customScrollParent: u,\n    windowScrollContainerState: i,\n    windowViewportRect: a,\n    windowScrollTo: l\n  };\n}, e.tup(O)),\n    Rt = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    Lt = {\n  items: [{\n    index: 0\n  }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0\n},\n    kt = Math.round,\n    zt = Math.ceil,\n    Bt = Math.floor,\n    Ft = Math.min,\n    Pt = Math.max;\n\nfunction Ot(t, e) {\n  return Array.from({\n    length: e - t + 1\n  }).map(function (e, n) {\n    return {\n      index: n + t\n    };\n  });\n}\n\nvar Mt = e.system(function (t) {\n  var n = t[0],\n      o = n.overscan,\n      r = n.visibleRange,\n      i = n.listBoundary,\n      a = t[1],\n      l = a.scrollTop,\n      s = a.viewportHeight,\n      u = a.scrollBy,\n      c = a.scrollTo,\n      m = a.smoothScrollTargetReached,\n      d = a.scrollContainerState,\n      f = t[2],\n      p = t[3],\n      h = t[4],\n      g = h.propsReady,\n      v = h.didMount,\n      S = t[5],\n      I = S.windowViewportRect,\n      C = S.windowScrollTo,\n      x = S.useWindowScroll,\n      T = S.customScrollParent,\n      w = S.windowScrollContainerState,\n      y = e.statefulStream(0),\n      b = e.statefulStream(0),\n      E = e.statefulStream(Rt),\n      R = e.statefulStream({\n    height: 0,\n    width: 0\n  }),\n      L = e.statefulStream({\n    height: 0,\n    width: 0\n  }),\n      k = e.stream(),\n      F = e.stream(),\n      P = e.statefulStream(0);\n  e.connect(e.pipe(v, e.withLatestFrom(b), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.map(function (t) {\n    return {\n      items: Ot(0, t[1] - 1),\n      top: 0,\n      bottom: 0,\n      offsetBottom: 0,\n      offsetTop: 0,\n      itemHeight: 0,\n      itemWidth: 0\n    };\n  })), E), e.connect(e.pipe(e.combineLatest(e.duc(y), r, e.duc(L, function (t, e) {\n    return t && t.width === e.width && t.height === e.height;\n  })), e.withLatestFrom(R), e.map(function (t) {\n    var e = t[0],\n        n = e[0],\n        o = e[1],\n        r = o[0],\n        i = o[1],\n        a = e[2],\n        l = t[1],\n        s = a.height,\n        u = a.width,\n        c = l.width;\n    if (0 === n || 0 === c) return Rt;\n    if (0 === u) return Lt;\n    var m = At(c, u),\n        d = m * Bt(r / s),\n        f = m * zt(i / s) - 1;\n    f = Ft(n - 1, f);\n    var p = Ot(d = Ft(f, Pt(0, d)), f),\n        h = Vt(l, a, p),\n        g = h.top,\n        v = h.bottom;\n    return {\n      items: p,\n      offsetTop: g,\n      offsetBottom: zt(n / m) * s - v,\n      top: g,\n      bottom: v,\n      itemHeight: s,\n      itemWidth: u\n    };\n  })), E), e.connect(e.pipe(R, e.map(function (t) {\n    return t.height;\n  })), s), e.connect(e.pipe(e.combineLatest(R, L, E), e.map(function (t) {\n    var e = Vt(t[0], t[1], t[2].items);\n    return [e.top, e.bottom];\n  }), e.distinctUntilChanged(z)), i);\n  var O = e.streamFromEmitter(e.pipe(e.duc(E), e.filter(function (t) {\n    return t.items.length > 0;\n  }), e.withLatestFrom(y), e.filter(function (t) {\n    var e = t[0].items;\n    return e[e.length - 1].index === t[1] - 1;\n  }), e.map(function (t) {\n    return t[1] - 1;\n  }), e.distinctUntilChanged())),\n      M = e.streamFromEmitter(e.pipe(e.duc(E), e.filter(function (t) {\n    var e = t.items;\n    return e.length > 0 && 0 === e[0].index;\n  }), e.mapTo(0), e.distinctUntilChanged())),\n      V = e.streamFromEmitter(e.pipe(e.duc(E), e.filter(function (t) {\n    return t.items.length > 0;\n  }), e.map(function (t) {\n    var e = t.items;\n    return {\n      startIndex: e[0].index,\n      endIndex: e[e.length - 1].index\n    };\n  }), e.distinctUntilChanged(B)));\n  e.connect(V, p.scrollSeekRangeChanged), e.connect(e.pipe(k, e.withLatestFrom(R, L, y), e.map(function (t) {\n    var e = t[1],\n        n = t[2],\n        o = t[3],\n        r = Tt(t[0]),\n        i = r.align,\n        a = r.behavior,\n        l = r.offset,\n        s = r.index;\n    \"LAST\" === s && (s = o - 1);\n    var u = Ut(e, n, s = Pt(0, s, Ft(o - 1, s)));\n    return \"end\" === i ? u = kt(u - e.height + n.height) : \"center\" === i && (u = kt(u - e.height / 2 + n.height / 2)), l && (u += l), {\n      top: u,\n      behavior: a\n    };\n  })), c);\n  var U = e.statefulStreamFromEmitter(e.pipe(E, e.map(function (t) {\n    return t.offsetBottom + t.bottom;\n  })), 0);\n  return e.connect(e.pipe(I, e.map(function (t) {\n    return {\n      width: t.visibleWidth,\n      height: t.visibleHeight\n    };\n  })), R), H({\n    totalCount: y,\n    viewportDimensions: R,\n    itemDimensions: L,\n    scrollTop: l,\n    scrollHeight: F,\n    overscan: o,\n    scrollBy: u,\n    scrollTo: c,\n    scrollToIndex: k,\n    smoothScrollTargetReached: m,\n    windowViewportRect: I,\n    windowScrollTo: C,\n    useWindowScroll: x,\n    customScrollParent: T,\n    windowScrollContainerState: w,\n    deviation: P,\n    scrollContainerState: d,\n    initialItemCount: b\n  }, p, {\n    gridState: E,\n    totalListHeight: U\n  }, f, {\n    startReached: M,\n    endReached: O,\n    rangeChanged: V,\n    propsReady: g\n  });\n}, e.tup(Et, O, N, D, U, Ht));\n\nfunction Vt(t, e, n) {\n  var o = e.height;\n  return void 0 === o || 0 === n.length ? {\n    top: 0,\n    bottom: 0\n  } : {\n    top: Ut(t, e, n[0].index),\n    bottom: Ut(t, e, n[n.length - 1].index) + o\n  };\n}\n\nfunction Ut(t, e, n) {\n  var o = At(t.width, e.width);\n  return Bt(n / o) * e.height;\n}\n\nfunction At(t, e) {\n  return Pt(1, Bt(t / e));\n}\n\nfunction Wt(t, e) {\n  void 0 === e && (e = !0);\n\n  var n = T(null),\n      o = function (t) {};\n\n  if (\"undefined\" != typeof ResizeObserver) {\n    var r = new ResizeObserver(function (e) {\n      var n = e[0].target;\n      null !== n.offsetParent && t(n);\n    });\n\n    o = function (t) {\n      t && e ? (r.observe(t), n.current = t) : (n.current && r.unobserve(n.current), n.current = null);\n    };\n  }\n\n  return {\n    ref: n,\n    callbackRef: o\n  };\n}\n\nfunction Nt(t, e) {\n  return void 0 === e && (e = !0), Wt(t, e).callbackRef;\n}\n\nfunction Dt(t, e) {\n  var n = T(null),\n      o = w(function (o) {\n    if (null !== o) {\n      var r,\n          i,\n          a = o.getBoundingClientRect(),\n          l = a.width;\n\n      if (e) {\n        var s = e.getBoundingClientRect(),\n            u = a.top - s.top;\n        r = s.height - Math.max(0, u), i = u + e.scrollTop;\n      } else r = window.innerHeight - Math.max(0, a.top), i = a.top + window.pageYOffset;\n\n      n.current = {\n        offsetTop: i,\n        visibleHeight: r,\n        visibleWidth: l\n      }, t(n.current);\n    }\n  }, [t, e]),\n      r = Wt(o),\n      i = r.callbackRef,\n      a = r.ref,\n      l = w(function () {\n    o(a.current);\n  }, [o, a]);\n  return y(function () {\n    if (e) {\n      e.addEventListener(\"scroll\", l);\n      var t = new ResizeObserver(l);\n      return t.observe(e), function () {\n        e.removeEventListener(\"scroll\", l), t.unobserve(e);\n      };\n    }\n\n    return window.addEventListener(\"scroll\", l), window.addEventListener(\"resize\", l), function () {\n      window.removeEventListener(\"scroll\", l), window.removeEventListener(\"resize\", l);\n    };\n  }, [l, e]), i;\n}\n\nvar Gt = \"undefined\" != typeof document ? b : y;\n\nfunction _t(t, e, n, o, r, i) {\n  return Nt(function (n) {\n    for (var a = function (t, e, n, o) {\n      var r = t.length;\n      if (0 === r) return null;\n\n      for (var i = [], a = 0; a < r; a++) {\n        var l = t.item(a);\n\n        if (l && void 0 !== l.dataset.index) {\n          var s = parseInt(l.dataset.index),\n              u = parseFloat(l.dataset.knownSize),\n              c = e(l, \"offsetHeight\");\n\n          if (0 === c && o(\"Zero-sized element, this should not happen\", {\n            child: l\n          }, P.ERROR), c !== u) {\n            var m = i[i.length - 1];\n            0 === i.length || m.size !== c || m.endIndex !== s - 1 ? i.push({\n              startIndex: s,\n              endIndex: s,\n              size: c\n            }) : i[i.length - 1].endIndex++;\n          }\n        }\n      }\n\n      return i;\n    }(n.children, e, 0, r), l = n.parentElement; !l.dataset.virtuosoScroller;) l = l.parentElement;\n\n    var s = i ? i.scrollTop : \"window\" === l.firstElementChild.dataset.viewportType ? window.pageYOffset || document.documentElement.scrollTop : l.scrollTop;\n    o(i ? [Math.max(s, 0), i.scrollHeight] : [Math.max(s, 0), l.scrollHeight]), null !== a && t(a);\n  }, n);\n}\n\nfunction jt(t, n, o, r, i) {\n  void 0 === r && (r = e.noop);\n  var a = T(null),\n      l = T(null),\n      s = T(null),\n      u = w(function (e) {\n    var o = e.target,\n        r = o === window || o === document ? window.pageYOffset || document.documentElement.scrollTop : o.scrollTop,\n        i = o === window ? document.documentElement.scrollHeight : o.scrollHeight;\n    t([Math.max(r, 0), i]), null !== l.current && (r === l.current || r <= 0 || r === o.scrollHeight - ut(o, \"height\")) && (l.current = null, n(!0), s.current && (clearTimeout(s.current), s.current = null));\n  }, [t, n]);\n  return y(function () {\n    var t = i || a.current;\n    return r(i || a.current), u({\n      target: t\n    }), t.addEventListener(\"scroll\", u, {\n      passive: !0\n    }), function () {\n      r(null), t.removeEventListener(\"scroll\", u);\n    };\n  }, [a, u, o, r, i]), {\n    scrollerRef: a,\n    scrollByCallback: function (t) {\n      null === l.current && a.current.scrollBy(t);\n    },\n    scrollToCallback: function (e) {\n      var o = a.current;\n\n      if (o && (!(\"offsetHeight\" in o) || 0 !== o.offsetHeight)) {\n        var r,\n            i,\n            u,\n            c = \"smooth\" === e.behavior;\n        if (o === window ? (i = Math.max(ut(document.documentElement, \"height\"), document.documentElement.scrollHeight), r = window.innerHeight, u = document.documentElement.scrollTop) : (i = o.scrollHeight, r = ut(o, \"height\"), u = o.scrollTop), e.top = Math.ceil(Math.max(Math.min(i - r, e.top), 0)), Math.abs(r - i) < 1.01 || e.top === u) return t([u, i]), void (c && n(!0));\n        c ? (l.current = e.top, s.current && clearTimeout(s.current), s.current = setTimeout(function () {\n          s.current = null, l.current = null, n(!0);\n        }, 1e3)) : l.current = null, o.scrollTo(e);\n      }\n    }\n  };\n}\n\nvar Kt = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.listRefresh,\n      i = n.defaultItemSize,\n      a = t[1].scrollTop,\n      l = t[2].scrollToIndex,\n      s = t[3].didMount,\n      u = e.statefulStream(!0),\n      c = e.statefulStream(0);\n  return e.connect(e.pipe(s, e.withLatestFrom(c), e.filter(function (t) {\n    return !!t[1];\n  }), e.mapTo(!1)), u), e.subscribe(e.pipe(e.combineLatest(r, s), e.withLatestFrom(u, o, i), e.filter(function (t) {\n    var e = t[1],\n        n = t[3];\n    return t[0][1] && (!j(t[2].sizeTree) || void 0 !== n) && !e;\n  }), e.withLatestFrom(c)), function (t) {\n    var n = t[1];\n    setTimeout(function () {\n      e.handleNext(a, function () {\n        e.publish(u, !0);\n      }), e.publish(l, n);\n    });\n  }), {\n    scrolledToInitialItem: u,\n    initialTopMostItemIndex: c\n  };\n}, e.tup(Ct, O, wt, U), {\n  singleton: !0\n});\n\nfunction Yt(t) {\n  return !!t && (\"smooth\" === t ? \"smooth\" : \"auto\");\n}\n\nvar Zt = e.system(function (t) {\n  var n = t[0],\n      o = n.totalCount,\n      r = n.listRefresh,\n      i = t[1],\n      a = i.isAtBottom,\n      l = i.atBottomState,\n      s = t[2].scrollToIndex,\n      u = t[3].scrolledToInitialItem,\n      c = t[4],\n      m = c.propsReady,\n      d = c.didMount,\n      f = t[5].log,\n      p = t[6].scrollingInProgress,\n      h = e.statefulStream(!1),\n      g = null;\n\n  function v(t) {\n    e.publish(s, {\n      index: \"LAST\",\n      align: \"end\",\n      behavior: t\n    });\n  }\n\n  return e.subscribe(e.pipe(e.combineLatest(e.pipe(e.duc(o), e.skip(1)), d), e.withLatestFrom(e.duc(h), a, u, p), e.map(function (t) {\n    var e = t[0],\n        n = e[0],\n        o = e[1] && t[3],\n        r = \"auto\";\n    return o && (r = function (t, e) {\n      return \"function\" == typeof t ? Yt(t(e)) : e && Yt(t);\n    }(t[1], t[2] || t[4]), o = o && !!r), {\n      totalCount: n,\n      shouldFollow: o,\n      followOutputBehavior: r\n    };\n  }), e.filter(function (t) {\n    return t.shouldFollow;\n  })), function (t) {\n    var n = t.totalCount,\n        o = t.followOutputBehavior;\n    g && (g(), g = null), g = e.handleNext(r, function () {\n      e.getValue(f)(\"following output to \", {\n        totalCount: n\n      }, P.DEBUG), v(o), g = null;\n    });\n  }), e.subscribe(e.pipe(e.combineLatest(e.duc(h), o, m), e.filter(function (t) {\n    return t[0] && t[2];\n  }), e.scan(function (t, e) {\n    var n = e[1];\n    return {\n      refreshed: t.value === n,\n      value: n\n    };\n  }, {\n    refreshed: !1,\n    value: 0\n  }), e.filter(function (t) {\n    return t.refreshed;\n  }), e.withLatestFrom(h, o)), function (t) {\n    var n = t[1],\n        o = e.handleNext(l, function (t) {\n      !n || t.atBottom || \"SIZE_INCREASED\" !== t.notAtBottomBecause || g || (e.getValue(f)(\"scrolling to bottom due to increased size\", {}, P.DEBUG), v(\"auto\"));\n    });\n    setTimeout(o, 100);\n  }), e.subscribe(e.combineLatest(e.duc(h), l), function (t) {\n    var e = t[1];\n    t[0] && !e.atBottom && \"VIEWPORT_HEIGHT_DECREASING\" === e.notAtBottomBecause && v(\"auto\");\n  }), {\n    followOutput: h\n  };\n}, e.tup(Ct, N, wt, Kt, U, V, O));\n\nfunction qt(t) {\n  return t.reduce(function (t, e) {\n    return t.groupIndices.push(t.totalCount), t.totalCount += e + 1, t;\n  }, {\n    totalCount: 0,\n    groupIndices: []\n  });\n}\n\nvar Jt = r(function (t) {\n  var e = t[0],\n      n = e.totalCount,\n      o = e.groupIndices,\n      r = e.sizes,\n      p = t[1],\n      h = p.scrollTop,\n      g = p.headerHeight,\n      v = i(),\n      S = i(),\n      I = a(l(v, s(qt)));\n  return u(l(I, s(c(\"totalCount\"))), n), u(l(I, s(c(\"groupIndices\"))), o), u(l(m(h, r, g), d(function (t) {\n    return St(t[1]);\n  }), s(function (t) {\n    return Z(t[1].groupOffsetTree, Math.max(t[0] - t[2], 0), \"v\")[0];\n  }), f(), s(function (t) {\n    return [t];\n  })), S), {\n    groupCounts: v,\n    topItemsIndexes: S\n  };\n}, o(Ct, O)),\n    $t = {\n  items: [],\n  topItems: [],\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0\n};\n\nfunction Qt(t, e, n) {\n  if (0 === t.length) return [];\n  if (!St(e)) return t.map(function (t) {\n    return H({}, t, {\n      index: t.index + n,\n      originalIndex: t.index\n    });\n  });\n\n  for (var o, r = [], i = ot(e.groupOffsetTree, t[0].index, t[t.length - 1].index), a = void 0, l = 0, s = k(t); !(o = s()).done;) {\n    var u = o.value;\n    (!a || a.end < u.index) && (a = i.shift(), l = e.groupIndices.indexOf(a.start)), r.push(H({}, u.index === a.start ? {\n      type: \"group\",\n      index: l\n    } : {\n      index: u.index - (l + 1) + n,\n      groupIndex: l\n    }, {\n      size: u.size,\n      offset: u.offset,\n      originalIndex: u.index,\n      data: u.data\n    }));\n  }\n\n  return r;\n}\n\nfunction Xt(t, e, n, o, r) {\n  var i = 0,\n      a = 0;\n\n  if (t.length > 0) {\n    i = t[0].offset;\n    var l = t[t.length - 1];\n    a = l.offset + l.size;\n  }\n\n  var s = i,\n      u = o.lastOffset + (n - o.lastIndex) * o.lastSize - a;\n  return {\n    items: Qt(t, o, r),\n    topItems: Qt(e, o, r),\n    topListHeight: e.reduce(function (t, e) {\n      return e.size + t;\n    }, 0),\n    offsetTop: i,\n    offsetBottom: u,\n    top: s,\n    bottom: a,\n    totalCount: n\n  };\n}\n\nvar te,\n    ee,\n    ne,\n    oe = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.totalCount,\n      i = n.data,\n      a = n.firstItemIndex,\n      l = t[1],\n      s = t[2],\n      u = s.visibleRange,\n      c = s.listBoundary,\n      m = s.topListHeight,\n      d = t[3],\n      f = d.scrolledToInitialItem,\n      p = d.initialTopMostItemIndex,\n      h = t[4].topListHeight,\n      g = t[5],\n      v = t[6].didMount,\n      S = e.statefulStream([]),\n      I = e.stream();\n  e.connect(l.topItemsIndexes, S);\n  var C = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(v, e.duc(u), e.duc(r), e.duc(o), e.duc(p), f, e.duc(S), e.duc(a), i), e.filter(function (t) {\n    return t[0];\n  }), e.map(function (t) {\n    var n = t[1],\n        o = n[0],\n        r = n[1],\n        i = t[2],\n        a = t[4],\n        l = t[5],\n        s = t[6],\n        u = t[7],\n        c = t[8],\n        m = t[3],\n        d = m.sizeTree,\n        f = m.offsetTree;\n    if (0 === i || 0 === o && 0 === r) return $t;\n    if (j(d)) return Xt(function (t, e, n) {\n      if (St(e)) {\n        var o = vt(t, e);\n        return [{\n          index: Z(e.groupOffsetTree, o)[0],\n          size: 0,\n          offset: 0\n        }, {\n          index: o,\n          size: 0,\n          offset: 0,\n          data: n && n[0]\n        }];\n      }\n\n      return [{\n        index: t,\n        size: 0,\n        offset: 0,\n        data: n && n[0]\n      }];\n    }(function (t, e) {\n      return \"number\" == typeof t ? t : \"LAST\" === t.index ? e - 1 : t.index;\n    }(a, i), m, c), [], i, m, u);\n    var p = [];\n    if (s.length > 0) for (var h, g = s[0], v = s[s.length - 1], S = 0, I = k(ot(d, g, v)); !(h = I()).done;) for (var C = h.value, x = C.value, T = Math.max(C.start, g), w = Math.min(C.end, v), y = T; y <= w; y++) p.push({\n      index: y,\n      size: x,\n      offset: S,\n      data: c && c[y]\n    }), S += x;\n    if (!l) return Xt([], p, i, m, u);\n\n    var b = s.length > 0 ? s[s.length - 1] + 1 : 0,\n        E = function (t, e, n, o) {\n      return void 0 === o && (o = 0), o > 0 && (e = Math.max(e, st(t, o, mt).offset)), rt((i = n, l = lt(r = t, e, a = dt), s = lt(r, i, a, l), r.slice(l, s + 1)), ft);\n      var r, i, a, l, s;\n    }(f, o, r, b);\n\n    if (0 === E.length) return null;\n    var H = i - 1;\n    return Xt(e.tap([], function (t) {\n      for (var e, n = k(E); !(e = n()).done;) {\n        var i = e.value,\n            a = i.value,\n            l = a.offset,\n            s = i.start,\n            u = a.size;\n        a.offset < o && (l += ((s += Math.floor((o - a.offset) / u)) - i.start) * u), s < b && (l += (b - s) * u, s = b);\n\n        for (var m = Math.min(i.end, H), d = s; d <= m && !(l >= r); d++) t.push({\n          index: d,\n          size: u,\n          offset: l,\n          data: c && c[d]\n        }), l += u;\n      }\n    }), p, i, m, u);\n  }), e.filter(function (t) {\n    return null !== t;\n  }), e.distinctUntilChanged()), $t);\n  return e.connect(e.pipe(i, e.filter(function (t) {\n    return void 0 !== t;\n  }), e.map(function (t) {\n    return t.length;\n  })), r), e.connect(e.pipe(C, e.map(e.prop(\"topListHeight\"))), h), e.connect(h, m), e.connect(e.pipe(C, e.map(function (t) {\n    return [t.top, t.bottom];\n  })), c), e.connect(e.pipe(C, e.map(function (t) {\n    return t.items;\n  })), I), H({\n    listState: C,\n    topItemsIndexes: S,\n    endReached: e.streamFromEmitter(e.pipe(C, e.filter(function (t) {\n      return t.items.length > 0;\n    }), e.withLatestFrom(r, i), e.filter(function (t) {\n      var e = t[0].items;\n      return e[e.length - 1].originalIndex === t[1] - 1;\n    }), e.map(function (t) {\n      return [t[1] - 1, t[2]];\n    }), e.distinctUntilChanged(z), e.map(function (t) {\n      return t[0];\n    }))),\n    startReached: e.streamFromEmitter(e.pipe(C, e.throttleTime(200), e.filter(function (t) {\n      var e = t.items;\n      return e.length > 0 && e[0].originalIndex === t.topItems.length;\n    }), e.map(function (t) {\n      return t.items[0].index;\n    }), e.distinctUntilChanged())),\n    rangeChanged: e.streamFromEmitter(e.pipe(C, e.filter(function (t) {\n      return t.items.length > 0;\n    }), e.map(function (t) {\n      var e = t.items;\n      return {\n        startIndex: e[0].index,\n        endIndex: e[e.length - 1].index\n      };\n    }), e.distinctUntilChanged(B))),\n    itemsRendered: I\n  }, g);\n}, e.tup(Ct, Jt, Et, Kt, wt, N, U), {\n  singleton: !0\n}),\n    re = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.firstItemIndex,\n      i = n.data,\n      a = t[1].listState,\n      l = t[2].didMount,\n      s = e.statefulStream(0);\n  return e.connect(e.pipe(l, e.withLatestFrom(s), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.withLatestFrom(o, r, i), e.map(function (t) {\n    var e = t[0][1],\n        n = t[1],\n        o = t[2],\n        r = t[3],\n        i = void 0 === r ? [] : r,\n        a = 0;\n    if (n.groupIndices.length > 0) for (var l, s = k(n.groupIndices); !((l = s()).done || l.value - a >= e);) a++;\n    var u = e + a;\n    return Xt(Array.from({\n      length: u\n    }).map(function (t, e) {\n      return {\n        index: e,\n        size: 0,\n        offset: 0,\n        data: i[e]\n      };\n    }), [], u, n, o);\n  })), a), {\n    initialItemCount: s\n  };\n}, e.tup(Ct, oe, U), {\n  singleton: !0\n}),\n    ie = r(function (t) {\n  var e = t[0].topItemsIndexes,\n      n = p(0);\n  return u(l(n, d(function (t) {\n    return t > 0;\n  }), s(function (t) {\n    return Array.from({\n      length: t\n    }).map(function (t, e) {\n      return e;\n    });\n  })), e), {\n    topItemCount: n\n  };\n}, o(oe)),\n    ae = e.system(function (t) {\n  var n = t[0],\n      o = n.footerHeight,\n      r = n.headerHeight,\n      i = t[1].listState,\n      a = e.stream(),\n      l = e.statefulStreamFromEmitter(e.pipe(e.combineLatest(o, r, i), e.map(function (t) {\n    var e = t[2];\n    return t[0] + t[1] + e.offsetBottom + e.bottom;\n  })), 0);\n  return e.connect(e.duc(l), a), {\n    totalListHeight: l,\n    totalListHeightChanged: a\n  };\n}, e.tup(O, oe), {\n  singleton: !0\n}),\n    le = e.system(function (t) {\n  var n = t[0],\n      o = n.scrollBy,\n      r = n.scrollTop,\n      i = n.deviation,\n      a = n.scrollingInProgress,\n      l = t[1],\n      s = l.isScrolling,\n      u = l.isAtBottom,\n      c = l.atBottomState,\n      m = l.scrollDirection,\n      d = t[3],\n      f = d.beforeUnshiftWith,\n      p = d.shiftWithOffset,\n      h = d.sizes,\n      g = t[4].log,\n      v = e.streamFromEmitter(e.pipe(t[2].listState, e.withLatestFrom(l.lastJumpDueToItemResize), e.scan(function (t, e) {\n    var n = t[1],\n        o = e[0],\n        r = o.items,\n        i = o.totalCount,\n        a = e[1],\n        l = 0;\n\n    if (t[2] === i) {\n      if (n.length > 0 && r.length > 0) {\n        var s = 1 === r.length;\n        if (0 !== r[0].originalIndex || 0 !== n[0].originalIndex) for (var u = function (t) {\n          var e = r[t],\n              o = n.find(function (t) {\n            return t.originalIndex === e.originalIndex;\n          });\n          return o ? e.offset !== o.offset || s ? (l = e.offset - o.offset + e.size - o.size, \"break\") : void 0 : \"continue\";\n        }, c = r.length - 1; c >= 0; c--) {\n          var m = u(c);\n          if (\"continue\" !== m && \"break\" === m) break;\n        }\n      }\n\n      0 !== l && (l += a);\n    }\n\n    return [l, r, i];\n  }, [0, [], 0]), e.filter(function (t) {\n    return 0 !== t[0];\n  }), e.withLatestFrom(r, m, a, g, u, c), e.filter(function (t) {\n    return !t[3] && 0 !== t[1] && t[2] === A;\n  }), e.map(function (t) {\n    var e = t[0][0];\n    return (0, t[4])(\"Upward scrolling compensation\", {\n      amount: e\n    }, P.DEBUG), e;\n  })));\n  return e.connect(e.pipe(v, e.withLatestFrom(i), e.map(function (t) {\n    return t[1] - t[0];\n  })), i), e.subscribe(e.pipe(e.combineLatest(e.statefulStreamFromEmitter(s, !1), i), e.filter(function (t) {\n    return !t[0] && 0 !== t[1];\n  }), e.map(function (t) {\n    return t[1];\n  }), e.throttleTime(1)), function (t) {\n    t > 0 ? (e.publish(o, {\n      top: -t,\n      behavior: \"auto\"\n    }), e.publish(i, 0)) : (e.publish(i, 0), e.publish(o, {\n      top: -t,\n      behavior: \"auto\"\n    }));\n  }), e.connect(e.pipe(p, e.map(function (t) {\n    return {\n      top: -t\n    };\n  })), o), e.connect(e.pipe(f, e.withLatestFrom(h), e.map(function (t) {\n    return t[0] * t[1].lastSize;\n  })), v), {\n    deviation: i\n  };\n}, e.tup(O, N, oe, Ct, V)),\n    se = e.system(function (t) {\n  var n = t[0].totalListHeight,\n      o = t[1].didMount,\n      r = t[2].scrollTo,\n      i = e.statefulStream(0);\n  return e.subscribe(e.pipe(o, e.withLatestFrom(i), e.filter(function (t) {\n    return 0 !== t[1];\n  }), e.map(function (t) {\n    return {\n      top: t[1]\n    };\n  })), function (t) {\n    e.handleNext(e.pipe(n, e.filter(function (t) {\n      return 0 !== t;\n    })), function () {\n      setTimeout(function () {\n        e.publish(r, t);\n      });\n    });\n  }), {\n    initialScrollTop: i\n  };\n}, e.tup(ae, U, O), {\n  singleton: !0\n}),\n    ue = e.system(function (t) {\n  var n = t[0].viewportHeight,\n      o = t[1].totalListHeight,\n      r = e.statefulStream(!1);\n  return {\n    alignToBottom: r,\n    paddingTopAddition: e.statefulStreamFromEmitter(e.pipe(e.combineLatest(r, n, o), e.filter(function (t) {\n      return t[0];\n    }), e.map(function (t) {\n      return Math.max(0, t[1] - t[2]);\n    }), e.distinctUntilChanged()), 0)\n  };\n}, e.tup(O, ae), {\n  singleton: !0\n}),\n    ce = e.system(function (t) {\n  var n = t[0],\n      o = n.sizes,\n      r = n.totalCount,\n      i = t[1],\n      a = i.scrollTop,\n      l = i.viewportHeight,\n      s = i.headerHeight,\n      u = i.scrollingInProgress,\n      c = t[2].scrollToIndex,\n      m = e.stream();\n  return e.connect(e.pipe(m, e.withLatestFrom(o, l, r, s, a), e.map(function (t) {\n    var n = t[0],\n        o = n.index,\n        r = n.behavior,\n        i = void 0 === r ? \"auto\" : r,\n        a = n.done,\n        l = t[1],\n        s = t[2],\n        c = t[4],\n        m = t[5],\n        d = t[3] - 1,\n        f = null;\n    o = vt(o, l);\n    var p = gt(o = Math.max(0, o, Math.min(d, o)), l.offsetTree) + c;\n    return p < m ? f = {\n      index: o,\n      behavior: i,\n      align: \"start\"\n    } : p + Z(l.sizeTree, o)[1] > m + s && (f = {\n      index: o,\n      behavior: i,\n      align: \"end\"\n    }), f ? a && e.handleNext(e.pipe(u, e.skip(1), e.filter(function (t) {\n      return !1 === t;\n    })), a) : a && a(), f;\n  }), e.filter(function (t) {\n    return null !== t;\n  })), c), {\n    scrollIntoView: m\n  };\n}, e.tup(Ct, O, wt, oe, V), {\n  singleton: !0\n}),\n    me = [\"listState\", \"topItemsIndexes\"],\n    de = e.system(function (t) {\n  return H({}, t[0], t[1], t[2], t[3], t[4], t[5], t[6], t[7], t[8]);\n}, e.tup(Et, re, U, D, ae, se, ue, Ht, ce)),\n    fe = e.system(function (t) {\n  var n = t[0],\n      o = n.totalCount,\n      r = n.sizeRanges,\n      i = n.fixedItemSize,\n      a = n.defaultItemSize,\n      l = n.trackItemSizes,\n      s = n.itemSize,\n      u = n.data,\n      c = n.firstItemIndex,\n      m = n.groupIndices,\n      d = n.statefulTotalCount,\n      f = t[1],\n      p = f.initialTopMostItemIndex,\n      h = f.scrolledToInitialItem,\n      g = t[2],\n      v = t[3],\n      S = t[4],\n      I = S.listState,\n      C = S.topItemsIndexes,\n      x = R(S, me),\n      T = t[5].scrollToIndex,\n      w = t[7].topItemCount,\n      y = t[8].groupCounts,\n      b = t[9],\n      E = t[10];\n  return e.connect(x.rangeChanged, b.scrollSeekRangeChanged), e.connect(e.pipe(b.windowViewportRect, e.map(e.prop(\"visibleHeight\"))), g.viewportHeight), H({\n    totalCount: o,\n    data: u,\n    firstItemIndex: c,\n    sizeRanges: r,\n    initialTopMostItemIndex: p,\n    scrolledToInitialItem: h,\n    topItemsIndexes: C,\n    topItemCount: w,\n    groupCounts: y,\n    fixedItemHeight: i,\n    defaultItemHeight: a\n  }, v, {\n    statefulTotalCount: d,\n    listState: I,\n    scrollToIndex: T,\n    trackItemSizes: l,\n    itemSize: s,\n    groupIndices: m\n  }, x, b, g, E);\n}, e.tup(Ct, Kt, O, Zt, oe, wt, le, ie, Jt, de, V)),\n    pe = (te = function () {\n  if (\"undefined\" == typeof document) return \"sticky\";\n  var t = document.createElement(\"div\");\n  return t.style.position = \"-webkit-sticky\", \"-webkit-sticky\" === t.style.position ? \"-webkit-sticky\" : \"sticky\";\n}, ne = !1, function () {\n  return ne || (ne = !0, ee = te()), ee;\n}),\n    he = [\"placeholder\"],\n    ge = [\"style\", \"children\"],\n    ve = [\"style\", \"children\"];\n\nfunction Se(t) {\n  return t;\n}\n\nvar Ie = r(function () {\n  var t = p(function (t) {\n    return \"Item \" + t;\n  }),\n      e = p(null),\n      n = p(function (t) {\n    return \"Group \" + t;\n  }),\n      o = p({}),\n      r = p(Se),\n      i = p(\"div\"),\n      a = p(h),\n      u = function (t, e) {\n    return void 0 === e && (e = null), S(l(o, s(function (e) {\n      return e[t];\n    }), f()), e);\n  };\n\n  return {\n    context: e,\n    itemContent: t,\n    groupContent: n,\n    components: o,\n    computeItemKey: r,\n    headerFooterTag: i,\n    scrollerRef: a,\n    FooterComponent: u(\"Footer\"),\n    HeaderComponent: u(\"Header\"),\n    TopItemListComponent: u(\"TopItemList\"),\n    ListComponent: u(\"List\", \"div\"),\n    ItemComponent: u(\"Item\", \"div\"),\n    GroupComponent: u(\"Group\", \"div\"),\n    ScrollerComponent: u(\"Scroller\", \"div\"),\n    EmptyPlaceholder: u(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: u(\"ScrollSeekPlaceholder\")\n  };\n});\n\nfunction Ce(t, e) {\n  var n = i();\n  return g(n, function () {\n    return console.warn(\"react-virtuoso: You are using a deprecated property. \" + e, \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), u(n, t), n;\n}\n\nvar xe = r(function (t) {\n  var e = t[0],\n      o = t[1],\n      r = {\n    item: Ce(o.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    group: Ce(o.groupContent, \"Rename the %cgroup%c prop to %cgroupContent.\"),\n    topItems: Ce(e.topItemCount, \"Rename the %ctopItems%c prop to %ctopItemCount.\"),\n    itemHeight: Ce(e.fixedItemHeight, \"Rename the %citemHeight%c prop to %cfixedItemHeight.\"),\n    scrollingStateChange: Ce(e.isScrolling, \"Rename the %cscrollingStateChange%c prop to %cisScrolling.\"),\n    adjustForPrependedItems: i(),\n    maxHeightCacheSize: i(),\n    footer: i(),\n    header: i(),\n    HeaderContainer: i(),\n    FooterContainer: i(),\n    ItemContainer: i(),\n    ScrollContainer: i(),\n    GroupContainer: i(),\n    ListContainer: i(),\n    emptyComponent: i(),\n    scrollSeek: i()\n  };\n\n  function a(t, e, n) {\n    u(l(t, I(o.components), s(function (t) {\n      var o,\n          r = t[0],\n          i = t[1];\n      return console.warn(\"react-virtuoso: \" + n + \" property is deprecated. Pass components.\" + e + \" instead.\"), H({}, i, ((o = {})[e] = r, o));\n    })), o.components);\n  }\n\n  return g(r.adjustForPrependedItems, function () {\n    console.warn(\"react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.\", \"color: red;\", \"color: inherit;\", \"color: blue;\");\n  }), g(r.maxHeightCacheSize, function () {\n    console.warn(\"react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.\");\n  }), g(r.HeaderContainer, function () {\n    console.warn(\"react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.\");\n  }), g(r.FooterContainer, function () {\n    console.warn(\"react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.\");\n  }), g(r.scrollSeek, function (t) {\n    var r = t.placeholder,\n        i = R(t, he);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), v(o.components, H({}, n(o.components), {\n      ScrollSeekPlaceholder: r\n    })), v(e.scrollSeekConfiguration, i);\n  }), a(r.footer, \"Footer\", \"footer\"), a(r.header, \"Header\", \"header\"), a(r.ItemContainer, \"Item\", \"ItemContainer\"), a(r.ListContainer, \"List\", \"ListContainer\"), a(r.ScrollContainer, \"Scroller\", \"ScrollContainer\"), a(r.emptyComponent, \"EmptyPlaceholder\", \"emptyComponent\"), a(r.GroupContainer, \"Group\", \"GroupContainer\"), H({}, e, o, r);\n}, o(fe, Ie)),\n    Te = function (t) {\n  return x.createElement(\"div\", {\n    style: {\n      height: t.height\n    }\n  });\n},\n    we = {\n  position: pe(),\n  zIndex: 1,\n  overflowAnchor: \"none\"\n},\n    ye = x.memo(function (t) {\n  var e = t.showTopList,\n      n = void 0 !== e && e,\n      o = Ae(\"listState\"),\n      r = Ae(\"deviation\"),\n      i = Ue(\"sizeRanges\"),\n      a = Ae(\"useWindowScroll\"),\n      l = Ae(\"customScrollParent\"),\n      s = Ue(\"windowScrollContainerState\"),\n      u = Ue(\"scrollContainerState\"),\n      c = l || a ? s : u,\n      m = Ae(\"itemContent\"),\n      d = Ae(\"context\"),\n      f = Ae(\"groupContent\"),\n      p = Ae(\"trackItemSizes\"),\n      g = Ae(\"itemSize\"),\n      v = Ae(\"log\"),\n      S = _t(i, g, p, n ? h : c, v, l),\n      I = Ae(\"EmptyPlaceholder\"),\n      C = Ae(\"ScrollSeekPlaceholder\") || Te,\n      x = Ae(\"ListComponent\"),\n      T = Ae(\"ItemComponent\"),\n      w = Ae(\"GroupComponent\"),\n      y = Ae(\"computeItemKey\"),\n      b = Ae(\"isSeeking\"),\n      R = Ae(\"groupIndices\").length > 0,\n      L = Ae(\"paddingTopAddition\"),\n      k = Ae(\"firstItemIndex\"),\n      z = Ae(\"statefulTotalCount\"),\n      B = n ? {} : {\n    boxSizing: \"border-box\",\n    paddingTop: o.offsetTop + L,\n    paddingBottom: o.offsetBottom,\n    marginTop: r\n  };\n\n  return !n && 0 === z && I ? E(I, Re(I, d)) : E(x, H({}, Re(x, d), {\n    ref: S,\n    style: B,\n    \"data-test-id\": n ? \"virtuoso-top-item-list\" : \"virtuoso-item-list\"\n  }), (n ? o.topItems : o.items).map(function (t) {\n    var e = t.originalIndex,\n        n = y(e + k, t.data, d);\n    return b ? E(C, H({}, Re(C, d), {\n      key: n,\n      index: t.index,\n      height: t.size,\n      type: t.type || \"item\"\n    }, \"group\" === t.type ? {} : {\n      groupIndex: t.groupIndex\n    })) : \"group\" === t.type ? E(w, H({}, Re(w, d), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      style: we\n    }), f(t.index)) : E(T, H({}, Re(T, d), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      \"data-item-group-index\": t.groupIndex,\n      style: {\n        overflowAnchor: \"none\"\n      }\n    }), R ? m(t.index, t.groupIndex, t.data, d) : m(t.index, t.data, d));\n  }));\n}),\n    be = {\n  height: \"100%\",\n  outline: \"none\",\n  overflowY: \"auto\",\n  position: \"relative\",\n  WebkitOverflowScrolling: \"touch\"\n},\n    Ee = {\n  width: \"100%\",\n  height: \"100%\",\n  position: \"absolute\",\n  top: 0\n},\n    He = {\n  width: \"100%\",\n  position: pe(),\n  top: 0\n};\n\nfunction Re(t, e) {\n  if (\"string\" != typeof t) return {\n    context: e\n  };\n}\n\nvar Le = x.memo(function () {\n  var t = Ae(\"HeaderComponent\"),\n      e = Ue(\"headerHeight\"),\n      n = Ae(\"headerFooterTag\"),\n      o = Nt(function (t) {\n    return e(ut(t, \"height\"));\n  }),\n      r = Ae(\"context\");\n  return t ? E(n, {\n    ref: o\n  }, E(t, Re(t, r))) : null;\n}),\n    ke = x.memo(function () {\n  var t = Ae(\"FooterComponent\"),\n      e = Ue(\"footerHeight\"),\n      n = Ae(\"headerFooterTag\"),\n      o = Nt(function (t) {\n    return e(ut(t, \"height\"));\n  }),\n      r = Ae(\"context\");\n  return t ? E(n, {\n    ref: o\n  }, E(t, Re(t, r))) : null;\n});\n\nfunction ze(t) {\n  var e = t.usePublisher,\n      n = t.useEmitter,\n      o = t.useEmitterValue;\n  return x.memo(function (t) {\n    var r = t.style,\n        i = t.children,\n        a = R(t, ge),\n        l = e(\"scrollContainerState\"),\n        s = o(\"ScrollerComponent\"),\n        u = e(\"smoothScrollTargetReached\"),\n        c = o(\"scrollerRef\"),\n        m = o(\"context\"),\n        d = jt(l, u, s, c),\n        f = d.scrollerRef,\n        p = d.scrollByCallback;\n    return n(\"scrollTo\", d.scrollToCallback), n(\"scrollBy\", p), E(s, H({\n      ref: f,\n      style: H({}, be, r),\n      \"data-test-id\": \"virtuoso-scroller\",\n      \"data-virtuoso-scroller\": !0,\n      tabIndex: 0\n    }, a, Re(s, m)), i);\n  });\n}\n\nfunction Be(t) {\n  var e = t.usePublisher,\n      n = t.useEmitter,\n      o = t.useEmitterValue;\n  return x.memo(function (t) {\n    var r = t.style,\n        i = t.children,\n        a = R(t, ve),\n        l = e(\"windowScrollContainerState\"),\n        s = o(\"ScrollerComponent\"),\n        u = e(\"smoothScrollTargetReached\"),\n        c = o(\"totalListHeight\"),\n        m = o(\"deviation\"),\n        d = o(\"customScrollParent\"),\n        f = o(\"context\"),\n        p = jt(l, u, s, h, d),\n        g = p.scrollerRef,\n        v = p.scrollByCallback,\n        S = p.scrollToCallback;\n    return Gt(function () {\n      return g.current = d || window, function () {\n        g.current = null;\n      };\n    }, [g, d]), n(\"windowScrollTo\", S), n(\"scrollBy\", v), E(s, H({\n      style: H({\n        position: \"relative\"\n      }, r, 0 !== c ? {\n        height: c + m\n      } : {}),\n      \"data-virtuoso-scroller\": !0\n    }, a, Re(s, f)), i);\n  });\n}\n\nvar Fe = function (t) {\n  var e = t.children,\n      n = Ue(\"viewportHeight\"),\n      o = Nt(C(n, function (t) {\n    return ut(t, \"height\");\n  }));\n  return x.createElement(\"div\", {\n    style: Ee,\n    ref: o,\n    \"data-viewport-type\": \"element\"\n  }, e);\n},\n    Pe = function (t) {\n  var e = t.children,\n      n = Dt(Ue(\"windowViewportRect\"), Ae(\"customScrollParent\"));\n  return x.createElement(\"div\", {\n    ref: n,\n    style: Ee,\n    \"data-viewport-type\": \"window\"\n  }, e);\n},\n    Oe = function (t) {\n  var e = t.children,\n      n = Ae(\"TopItemListComponent\"),\n      o = Ae(\"headerHeight\"),\n      r = H({}, He, {\n    marginTop: o + \"px\"\n  }),\n      i = Ae(\"context\");\n  return E(n || \"div\", {\n    style: r,\n    context: i\n  }, e);\n},\n    Me = t(xe, {\n  required: {},\n  optional: {\n    context: \"context\",\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    groupContent: \"groupContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    headerFooterTag: \"headerFooterTag\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\",\n    item: \"item\",\n    group: \"group\",\n    topItems: \"topItems\",\n    itemHeight: \"itemHeight\",\n    scrollingStateChange: \"scrollingStateChange\",\n    maxHeightCacheSize: \"maxHeightCacheSize\",\n    footer: \"footer\",\n    header: \"header\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    GroupContainer: \"GroupContainer\",\n    emptyComponent: \"emptyComponent\",\n    HeaderContainer: \"HeaderContainer\",\n    FooterContainer: \"FooterContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    adjustForPrependedItems: \"adjustForPrependedItems\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, x.memo(function (t) {\n  var e = Ae(\"useWindowScroll\"),\n      n = Ae(\"topItemsIndexes\").length > 0,\n      o = Ae(\"customScrollParent\"),\n      r = o || e ? Pe : Fe;\n  return x.createElement(o || e ? De : Ne, H({}, t), x.createElement(r, null, x.createElement(Le, null), x.createElement(ye, null), x.createElement(ke, null)), n && x.createElement(Oe, null, x.createElement(ye, {\n    showTopList: !0\n  })));\n})),\n    Ve = Me.Component,\n    Ue = Me.usePublisher,\n    Ae = Me.useEmitterValue,\n    We = Me.useEmitter,\n    Ne = ze({\n  usePublisher: Ue,\n  useEmitterValue: Ae,\n  useEmitter: We\n}),\n    De = Be({\n  usePublisher: Ue,\n  useEmitterValue: Ae,\n  useEmitter: We\n}),\n    Ge = [\"placeholder\"],\n    _e = e.system(function () {\n  var t = e.statefulStream(function (t) {\n    return \"Item \" + t;\n  }),\n      n = e.statefulStream({}),\n      o = e.statefulStream(null),\n      r = e.statefulStream(\"virtuoso-grid-item\"),\n      i = e.statefulStream(\"virtuoso-grid-list\"),\n      a = e.statefulStream(Se),\n      l = e.statefulStream(e.noop),\n      s = function (t, o) {\n    return void 0 === o && (o = null), e.statefulStreamFromEmitter(e.pipe(n, e.map(function (e) {\n      return e[t];\n    }), e.distinctUntilChanged()), o);\n  };\n\n  return {\n    context: o,\n    itemContent: t,\n    components: n,\n    computeItemKey: a,\n    itemClassName: r,\n    listClassName: i,\n    scrollerRef: l,\n    ListComponent: s(\"List\", \"div\"),\n    ItemComponent: s(\"Item\", \"div\"),\n    ScrollerComponent: s(\"Scroller\", \"div\"),\n    ScrollSeekPlaceholder: s(\"ScrollSeekPlaceholder\", \"div\")\n  };\n}),\n    je = e.system(function (t) {\n  var n = t[0],\n      o = t[1],\n      r = {\n    item: Ce(o.itemContent, \"Rename the %citem%c prop to %citemContent.\"),\n    ItemContainer: e.stream(),\n    ScrollContainer: e.stream(),\n    ListContainer: e.stream(),\n    emptyComponent: e.stream(),\n    scrollSeek: e.stream()\n  };\n\n  function i(t, n, r) {\n    e.connect(e.pipe(t, e.withLatestFrom(o.components), e.map(function (t) {\n      var e,\n          o = t[0],\n          i = t[1];\n      return console.warn(\"react-virtuoso: \" + r + \" property is deprecated. Pass components.\" + n + \" instead.\"), H({}, i, ((e = {})[n] = o, e));\n    })), o.components);\n  }\n\n  return e.subscribe(r.scrollSeek, function (t) {\n    var r = t.placeholder,\n        i = R(t, Ge);\n    console.warn(\"react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.\"), e.publish(o.components, H({}, e.getValue(o.components), {\n      ScrollSeekPlaceholder: r\n    })), e.publish(n.scrollSeekConfiguration, i);\n  }), i(r.ItemContainer, \"Item\", \"ItemContainer\"), i(r.ListContainer, \"List\", \"ListContainer\"), i(r.ScrollContainer, \"Scroller\", \"ScrollContainer\"), H({}, n, o, r);\n}, e.tup(Mt, _e)),\n    Ke = x.memo(function () {\n  var t = Qe(\"gridState\"),\n      e = Qe(\"listClassName\"),\n      n = Qe(\"itemClassName\"),\n      o = Qe(\"itemContent\"),\n      r = Qe(\"computeItemKey\"),\n      i = Qe(\"isSeeking\"),\n      a = $e(\"scrollHeight\"),\n      l = Qe(\"ItemComponent\"),\n      s = Qe(\"ListComponent\"),\n      u = Qe(\"ScrollSeekPlaceholder\"),\n      c = Qe(\"context\"),\n      m = $e(\"itemDimensions\"),\n      d = Nt(function (t) {\n    a(t.parentElement.parentElement.scrollHeight);\n    var e = t.firstChild;\n    e && m(e.getBoundingClientRect());\n  });\n  return E(s, H({\n    ref: d,\n    className: e\n  }, Re(s, c), {\n    style: {\n      paddingTop: t.offsetTop,\n      paddingBottom: t.offsetBottom\n    }\n  }), t.items.map(function (e) {\n    var a = r(e.index);\n    return i ? E(u, H({\n      key: a\n    }, Re(u, c), {\n      index: e.index,\n      height: t.itemHeight,\n      width: t.itemWidth\n    })) : E(l, H({}, Re(l, c), {\n      className: n,\n      \"data-index\": e.index,\n      key: a\n    }), o(e.index, c));\n  }));\n}),\n    Ye = function (t) {\n  var e = t.children,\n      n = $e(\"viewportDimensions\"),\n      o = Nt(function (t) {\n    n(t.getBoundingClientRect());\n  });\n  return x.createElement(\"div\", {\n    style: Ee,\n    ref: o\n  }, e);\n},\n    Ze = function (t) {\n  var e = t.children,\n      n = Dt($e(\"windowViewportRect\"), Qe(\"customScrollParent\"));\n  return x.createElement(\"div\", {\n    ref: n,\n    style: Ee\n  }, e);\n},\n    qe = t(je, {\n  optional: {\n    totalCount: \"totalCount\",\n    overscan: \"overscan\",\n    itemContent: \"itemContent\",\n    components: \"components\",\n    computeItemKey: \"computeItemKey\",\n    initialItemCount: \"initialItemCount\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    listClassName: \"listClassName\",\n    itemClassName: \"itemClassName\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    item: \"item\",\n    ItemContainer: \"ItemContainer\",\n    ScrollContainer: \"ScrollContainer\",\n    ListContainer: \"ListContainer\",\n    scrollSeek: \"scrollSeek\"\n  },\n  methods: {\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\",\n    scrollToIndex: \"scrollToIndex\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\"\n  }\n}, x.memo(function (t) {\n  var e = H({}, t),\n      n = Qe(\"useWindowScroll\"),\n      o = Qe(\"customScrollParent\"),\n      r = o || n ? Ze : Ye;\n  return x.createElement(o || n ? en : tn, H({}, e), x.createElement(r, null, x.createElement(Ke, null)));\n})),\n    Je = qe.Component,\n    $e = qe.usePublisher,\n    Qe = qe.useEmitterValue,\n    Xe = qe.useEmitter,\n    tn = ze({\n  usePublisher: $e,\n  useEmitterValue: Qe,\n  useEmitter: Xe\n}),\n    en = Be({\n  usePublisher: $e,\n  useEmitterValue: Qe,\n  useEmitter: Xe\n}),\n    nn = r(function () {\n  var t = p(function (t) {\n    return x.createElement(\"td\", null, \"Item $\", t);\n  }),\n      e = p(null),\n      n = p(null),\n      o = p({}),\n      r = p(Se),\n      i = p(h),\n      a = function (t, e) {\n    return void 0 === e && (e = null), S(l(o, s(function (e) {\n      return e[t];\n    }), f()), e);\n  };\n\n  return {\n    context: e,\n    itemContent: t,\n    fixedHeaderContent: n,\n    components: o,\n    computeItemKey: r,\n    scrollerRef: i,\n    TableComponent: a(\"Table\", \"table\"),\n    TableHeadComponent: a(\"TableHead\", \"thead\"),\n    TableBodyComponent: a(\"TableBody\", \"tbody\"),\n    TableRowComponent: a(\"TableRow\", \"tr\"),\n    ScrollerComponent: a(\"Scroller\", \"div\"),\n    EmptyPlaceholder: a(\"EmptyPlaceholder\"),\n    ScrollSeekPlaceholder: a(\"ScrollSeekPlaceholder\")\n  };\n}),\n    on = r(function (t) {\n  return H({}, t[0], t[1]);\n}, o(fe, nn)),\n    rn = function (t) {\n  return x.createElement(\"tr\", null, x.createElement(\"td\", {\n    style: {\n      height: t.height\n    }\n  }));\n},\n    an = function (t) {\n  return x.createElement(\"tr\", null, x.createElement(\"td\", {\n    style: {\n      height: t.height,\n      padding: 0,\n      border: 0\n    }\n  }));\n},\n    ln = x.memo(function () {\n  var t = fn(\"listState\"),\n      e = fn(\"deviation\"),\n      n = dn(\"sizeRanges\"),\n      o = fn(\"useWindowScroll\"),\n      r = fn(\"customScrollParent\"),\n      i = dn(\"windowScrollContainerState\"),\n      a = dn(\"scrollContainerState\"),\n      l = r || o ? i : a,\n      s = fn(\"itemContent\"),\n      u = fn(\"trackItemSizes\"),\n      c = _t(n, fn(\"itemSize\"), u, l, fn(\"log\"), r),\n      m = fn(\"EmptyPlaceholder\"),\n      d = fn(\"ScrollSeekPlaceholder\") || rn,\n      f = fn(\"TableBodyComponent\"),\n      p = fn(\"TableRowComponent\"),\n      h = fn(\"computeItemKey\"),\n      g = fn(\"isSeeking\"),\n      v = fn(\"paddingTopAddition\"),\n      S = fn(\"firstItemIndex\"),\n      I = fn(\"statefulTotalCount\"),\n      C = fn(\"context\");\n\n  if (0 === I && m) return E(m, Re(m, C));\n  var T = t.offsetTop + v + e,\n      w = t.offsetBottom,\n      y = T > 0 ? x.createElement(an, {\n    height: T,\n    key: \"padding-top\"\n  }) : null,\n      b = w > 0 ? x.createElement(an, {\n    height: w,\n    key: \"padding-bottom\"\n  }) : null,\n      R = t.items.map(function (t) {\n    var e = t.originalIndex,\n        n = h(e + S, t.data, C);\n    return g ? E(d, H({}, Re(d, C), {\n      key: n,\n      index: t.index,\n      height: t.size,\n      type: t.type || \"item\"\n    })) : E(p, H({}, Re(p, C), {\n      key: n,\n      \"data-index\": e,\n      \"data-known-size\": t.size,\n      \"data-item-index\": t.index,\n      style: {\n        overflowAnchor: \"none\"\n      }\n    }), s(t.index, t.data, C));\n  });\n  return E(f, H({\n    ref: c,\n    \"data-test-id\": \"virtuoso-item-list\"\n  }, Re(f, C)), [y].concat(R, [b]));\n}),\n    sn = function (t) {\n  var e = t.children,\n      n = dn(\"viewportHeight\"),\n      o = Nt(C(n, function (t) {\n    return ut(t, \"height\");\n  }));\n  return x.createElement(\"div\", {\n    style: Ee,\n    ref: o,\n    \"data-viewport-type\": \"element\"\n  }, e);\n},\n    un = function (t) {\n  var e = t.children,\n      n = Dt(dn(\"windowViewportRect\"), fn(\"customScrollParent\"));\n  return x.createElement(\"div\", {\n    ref: n,\n    style: Ee,\n    \"data-viewport-type\": \"window\"\n  }, e);\n},\n    cn = t(on, {\n  required: {},\n  optional: {\n    context: \"context\",\n    followOutput: \"followOutput\",\n    firstItemIndex: \"firstItemIndex\",\n    itemContent: \"itemContent\",\n    fixedHeaderContent: \"fixedHeaderContent\",\n    overscan: \"overscan\",\n    increaseViewportBy: \"increaseViewportBy\",\n    totalCount: \"totalCount\",\n    topItemCount: \"topItemCount\",\n    initialTopMostItemIndex: \"initialTopMostItemIndex\",\n    components: \"components\",\n    groupCounts: \"groupCounts\",\n    atBottomThreshold: \"atBottomThreshold\",\n    computeItemKey: \"computeItemKey\",\n    defaultItemHeight: \"defaultItemHeight\",\n    fixedItemHeight: \"fixedItemHeight\",\n    itemSize: \"itemSize\",\n    scrollSeekConfiguration: \"scrollSeekConfiguration\",\n    data: \"data\",\n    initialItemCount: \"initialItemCount\",\n    initialScrollTop: \"initialScrollTop\",\n    alignToBottom: \"alignToBottom\",\n    useWindowScroll: \"useWindowScroll\",\n    customScrollParent: \"customScrollParent\",\n    scrollerRef: \"scrollerRef\",\n    logLevel: \"logLevel\"\n  },\n  methods: {\n    scrollToIndex: \"scrollToIndex\",\n    scrollIntoView: \"scrollIntoView\",\n    scrollTo: \"scrollTo\",\n    scrollBy: \"scrollBy\"\n  },\n  events: {\n    isScrolling: \"isScrolling\",\n    endReached: \"endReached\",\n    startReached: \"startReached\",\n    rangeChanged: \"rangeChanged\",\n    atBottomStateChange: \"atBottomStateChange\",\n    atTopStateChange: \"atTopStateChange\",\n    totalListHeightChanged: \"totalListHeightChanged\",\n    itemsRendered: \"itemsRendered\",\n    groupIndices: \"groupIndices\"\n  }\n}, x.memo(function (t) {\n  var e = fn(\"useWindowScroll\"),\n      n = fn(\"customScrollParent\"),\n      o = dn(\"fixedHeaderHeight\"),\n      r = fn(\"fixedHeaderContent\"),\n      i = fn(\"context\"),\n      a = Nt(C(o, function (t) {\n    return ut(t, \"height\");\n  })),\n      l = n || e ? gn : hn,\n      s = n || e ? un : sn,\n      u = fn(\"TableComponent\"),\n      c = fn(\"TableHeadComponent\"),\n      m = r ? x.createElement(c, H({\n    key: \"TableHead\",\n    style: {\n      zIndex: 1,\n      position: \"sticky\",\n      top: 0\n    },\n    ref: a\n  }, Re(c, i)), r()) : null;\n  return x.createElement(l, H({}, t), x.createElement(s, null, x.createElement(u, H({\n    style: {\n      borderSpacing: 0\n    }\n  }, Re(u, i)), [m, x.createElement(ln, {\n    key: \"TableBody\"\n  })])));\n})),\n    mn = cn.Component,\n    dn = cn.usePublisher,\n    fn = cn.useEmitterValue,\n    pn = cn.useEmitter,\n    hn = ze({\n  usePublisher: dn,\n  useEmitterValue: fn,\n  useEmitter: pn\n}),\n    gn = Be({\n  usePublisher: dn,\n  useEmitterValue: fn,\n  useEmitter: pn\n}),\n    vn = Ve,\n    Sn = Ve,\n    In = mn,\n    Cn = Je;\n\nexport { Sn as GroupedVirtuoso, P as LogLevel, In as TableVirtuoso, vn as Virtuoso, Cn as VirtuosoGrid };","map":{"version":3,"mappings":"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","names":["tupleComparator","prev","current","rangeComparator","next","startIndex","endIndex","LogLevel","domIOSystem","u","system","scrollContainerState","stream","scrollTop","deviation","statefulStream","smoothScrollTargetReached","statefulScrollTop","viewportHeight","scrollHeight","headerHeight","footerHeight","scrollTo","scrollBy","scrollingInProgress","connect","pipe","map","singleton","CONSOLE_METHOD_MAP","DEBUG","INFO","_CONSOLE_METHOD_MAP","WARN","ERROR","loggerSystem","logLevel","log","label","message","level","globalThis","window","_getGlobalThis$VIRTUO","VIRTUOSO_LOG_LEVEL","getValue","console","propsReadySystem","_ref","propsReady","didMount","streamFromEmitter","filter","ready","distinctUntilChanged","subscribe","value","tup","UP","INITIAL_BOTTOM_STATE","atBottom","notAtBottomBecause","state","offsetBottom","stateFlagsSystem","_ref$","isAtBottom","isAtTop","atBottomStateChange","atTopStateChange","atBottomThreshold","isScrolling","merge","duc","skip","mapTo","debounceTime","isScrollingBy","statefulStreamFromEmitter","top","atBottomState","combineLatest","scan","_ref2","atBottomBecause","scrollTopDelta","_ref2$","_headerHeight","lastJumpDueToItemResize","_ref3","jump","changed","throttleTime","scrollDirection","acc","direction","prevScrollTop","scrollVelocity","withLatestFrom","_","_ref6","scrollSeekSystem","isSeeking","rangeChanged","scrollSeekConfiguration","speed","config","range","enter","exit","velocity","change","scrollSeekRangeChanged","NIL_NODE","lvl","newAANode","k","v","l","r","empty","node","newTree","key","last","adjust","clone","_last","deleteLast","remove","findMaxKeyValue","field","Infinity","undefined","insert","split","skew","rebalance","walkWithin","start","end","result","concat","push","walk","args","isSingle","Error","rl","rlvl","rangesWithin","arrayToRanges","index","items","parser","length","i","nextIndex","nextValue","_parser2","findIndexOfClosestSmallerOrEqual","comparator","Math","floor","match","join","findClosestSmallerOrEqual","el","dimension","round","getBoundingClientRect","rangeIncludes","refRange","size","indexComparator","itemIndex","offsetComparator","offset","itemOffset","offsetPointParser","point","createOffsetTree","prevOffsetTree","syncStart","sizeTree","offsetTree","prevIndex","prevSize","prevOffset","arrayBinarySearch","kv","slice","_createForOfIteratorHelperLoose","_step3","done","aOffset","lastIndex","lastOffset","lastSize","sizeStateReducer","ranges","groupIndices","newSizeTree","groupSize","itemSize","reduce","tree","groupIndex","insertRanges","_step","min","overlappingRanges","some","_step2","firstPassDone","shouldInsert","rangeStart","rangeEnd","rangeValue","newOffsetTree","_createOffsetTree","groupOffsetTree","offsetOf","_arrayBinarySearch$fi","sizes","hasGroups","groupOffset","SIZE_MAP","offsetHeight","offsetWidth","sizeSystem","_ref4","sizeRanges","totalCount","statefulTotalCount","unshiftWith","shiftWith","firstItemIndex","fixedItemSize","defaultItemSize","correctItemSize","data","initial","indexes","_ref5","idx","_extends","_ref7","trackItemSizes","listRefresh","oldSizes","newSizes","_ref9","_ref8","diff","val","publish","_ref10","beforeUnshiftWith","_ref11","_ref12","shiftWithOffset","_ref13","_ref14","_ref15","max","SUPPORTS_SCROLL_TO_OPTIONS","document","documentElement","style","normalizeIndexLocation","location","align","behavior","scrollToIndexSystem","_ref$2","scrollToIndex","topListHeight","unsubscribeNextListRefresh","cleartTimeoutRef","unsubscribeListRefresh","cleanup","clearTimeout","normalLocation","originalIndexFromItemIndex","retry","listChanged","handleNext","timeoutRef","setTimeout","getOverscan","overscan","main","reverse","getViewportIncrease","sizeRangeSystem","listBoundary","fixedHeaderHeight","increaseViewportBy","visibleRange","listTop","listBottom","stickyHeaderHeight","headerVisible","topViewportAddition","bottomViewportAddition","windowScrollerSystem","windowScrollContainerState","windowViewportRect","windowScrollTo","useWindowScroll","customScrollParent","offsetTop","INITIAL_GRID_STATE","bottom","itemHeight","itemWidth","PROBE_GRID_STATE","ceil","buildItems","Array","from","gridSystem","stateFlags","scrollSeek","_ref$3","_ref$4","initialItemCount","gridState","viewportDimensions","height","width","itemDimensions","_ref4$","startOffset","_ref4$$","endOffset","item","viewport","viewportWidth","perRow","itemsPerRow","_gridLayout","gridLayout","endReached","startReached","itemTop","totalListHeight","viewportInfo","visibleWidth","visibleHeight","useSizeWithElRef","callback","enabled","ref","useRef","callbackRef","_el","ResizeObserver","observer","entries","element","target","offsetParent","elRef","observe","unobserve","useSize","useWindowViewportRectRef","calculateInfo","useCallback","rect","customScrollParentRect","deltaTop","innerHeight","pageYOffset","_useSizeWithElRef","scrollAndResizeEventHandler","useEffect","addEventListener","removeEventListener","useIsomorphicLayoutEffect","useLayoutEffect","scrollContainerStateCallback","children","results","child","dataset","parseInt","knownSize","parseFloat","lastResult","getChangedChildSizes","scrollableElement","parentElement","firstElementChild","useScrollTop","scrollerElement","scrollerRefCallback","noop","scrollerRef","scrollTopTarget","handler","ev","localRef","passive","scrollByCallback","scrollToCallback","isSmooth","abs","initialTopMostItemIndexSystem","scrolledToInitialItem","initialTopMostItemIndex","normalizeFollowOutput","follow","followOutputSystem","followOutput","pendingScrollHandle","scrollToBottom","followOutputBehavior","shouldFollow","behaviorFromFollowOutput","refreshed","cancel","groupCountsToIndicesAndCount","counts","groupCount","groupedListSystem","groupCounts","topItemsIndexes","groupIndicesAndCount","prop","EMPTY_LIST_STATE","topItems","transposeItems","originalIndex","transposedItems","groupRanges","currentRange","currentGroupIndex","shift","indexOf","type","buildListState","lastItem","listStateSystem","func","called","rangeTopListHeight","itemsRendered","listState","sizesValue","probeItemSet","getInitialTopMostItemIndexNumber","rangeStartIndex","rangeEndIndex","minStartIndex","offsetPointRanges","endValue","findRange","rangesWithinOffsets","maxIndex","tap","count","initialItemCountSystem","_ref3$2","includedGroupsCount","adjustedCount","topItemCountSystem","topItemCount","totalListHeightSystem","totalListHeightChanged","upwardScrollFixSystem","deviationOffset","prevItems","newDev","onlyItem","prevItem","find","pItem","_loop","amount","initialScrollTopSystem","initialScrollTop","alignToBottomSystem","alignToBottom","paddingTopAddition","scrollIntoViewSystem","scrollIntoView","_ref2$$behavior","me","featureGroup1System","listSystem","domIO","_ref2$3","flags","featureGroup1","fixedItemHeight","defaultItemHeight","positionStickyCssValue","createElement","position","_excluded","_excluded2","_excluded3","identity","listComponentPropsSystem","itemContent","context","groupContent","components","computeItemKey","headerFooterTag","distinctProp","propName","defaultValue","FooterComponent","HeaderComponent","TopItemListComponent","ListComponent","ItemComponent","GroupComponent","ScrollerComponent","EmptyPlaceholder","ScrollSeekPlaceholder","alias","warn","combinedSystem","propsSystem","deprecatedProps","addDeprecatedAlias","group","scrollingStateChange","adjustForPrependedItems","maxHeightCacheSize","footer","header","HeaderContainer","FooterContainer","ItemContainer","ScrollContainer","GroupContainer","ListContainer","emptyComponent","deprecateComponentProp","componentName","comp","_extends2","placeholder","DefaultScrollSeekPlaceholder","React","GROUP_STYLE","zIndex","overflowAnchor","Items","memo","showTopList","_ref5$showTopList","useEmitterValue","usePublisher","windowScrollContainerStateCallback","_scrollContainerStateCallback","useChangedListContentsSizes","containerStyle","boxSizing","paddingTop","paddingBottom","marginTop","contextPropIfNotDomElement","scrollerStyle","outline","overflowY","WebkitOverflowScrolling","viewportStyle","topItemListStyle","Header","Footer","buildScroller","useEmitter","props","_objectWithoutPropertiesLoose","_useScrollTop","d","tabIndex","buildWindowScroller","p","_useScrollTop2","Viewport","viewportRef","compose","WindowViewport","TopItemListContainer","TopItemList","systemToComponent","required","optional","methods","events","TheViewport","WindowScroller","Scroller","List","Component","_systemToComponent","gridComponentPropsSystem","itemClassName","listClassName","H","GridItems","scrollHeightCallback","listRef","firstItem","firstChild","className","Grid","tableComponentPropsSystem","fixedHeaderContent","TableComponent","TableHeadComponent","TableBodyComponent","TableRowComponent","FillerRow","padding","border","paddingTopEl","paddingBottomEl","theadRef","TheScroller","TheTable","TheTHead","theHead","borderSpacing","Table","Virtuoso","GroupedVirtuoso","TableVirtuoso","VirtuosoGrid"],"sources":["/workspace/Texter/client/node_modules/react-virtuoso/src/comparators.tsx","/workspace/Texter/client/node_modules/react-virtuoso/src/domIOSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/loggerSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/propsReadySystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/stateFlagsSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/scrollSeekSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/AATree.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/utils/binaryArraySearch.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/utils/correctItemSize.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/sizeSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/scrollToIndexSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/sizeRangeSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/windowScrollerSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/gridSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/hooks/useSize.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/hooks/useWindowViewportRect.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/hooks/useIsomorphicLayoutEffect.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/hooks/useChangedChildSizes.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/hooks/useScrollTop.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/initialTopMostItemIndexSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/followOutputSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/groupedListSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/listStateSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/utils/simpleMemoize.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/initialItemCountSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/topItemCountSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/totalListHeightSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/upwardScrollFixSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/initialScrollTopSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/alignToBottomSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/scrollIntoViewSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/listSystem.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/utils/positionStickyCssValue.ts","/workspace/Texter/client/node_modules/react-virtuoso/src/List.tsx","/workspace/Texter/client/node_modules/react-virtuoso/src/Grid.tsx","/workspace/Texter/client/node_modules/react-virtuoso/src/Table.tsx","/workspace/Texter/client/node_modules/react-virtuoso/src/components.tsx"],"sourcesContent":["import { ListRange } from './interfaces'\n\nexport function tupleComparator(prev: [any, any] | undefined, current: [any, any]) {\n  return !!(prev && prev[0] === current[0] && prev[1] === current[1])\n}\n\nexport function rangeComparator(prev: ListRange | undefined, next: ListRange) {\n  return !!(prev && prev.startIndex === next.startIndex && prev.endIndex === next.endIndex)\n}\n","import * as u from '@virtuoso.dev/urx'\n\nexport const domIOSystem = u.system(\n  () => {\n    const scrollContainerState = u.stream<[number, number]>()\n    const scrollTop = u.stream<number>()\n    const deviation = u.statefulStream(0)\n    const smoothScrollTargetReached = u.stream<true>()\n    const statefulScrollTop = u.statefulStream(0)\n    const viewportHeight = u.stream<number>()\n    const scrollHeight = u.stream<number>()\n    const headerHeight = u.statefulStream(0)\n    const footerHeight = u.statefulStream(0)\n    const scrollTo = u.stream<ScrollToOptions>()\n    const scrollBy = u.stream<ScrollToOptions>()\n    const scrollingInProgress = u.statefulStream(false)\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(([scrollTop]) => scrollTop)\n      ),\n      scrollTop\n    )\n\n    u.connect(\n      u.pipe(\n        scrollContainerState,\n        u.map(([, scrollHeight]) => scrollHeight)\n      ),\n      scrollHeight\n    )\n\n    u.connect(scrollTop, statefulScrollTop)\n\n    return {\n      // input\n      scrollContainerState,\n      scrollTop,\n      viewportHeight,\n      headerHeight,\n      footerHeight,\n      scrollHeight,\n      smoothScrollTargetReached,\n\n      // signals\n      scrollTo,\n      scrollBy,\n\n      // state\n      statefulScrollTop,\n      deviation,\n      scrollingInProgress,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace globalThis {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\n// eslint-disable-next-line @typescript-eslint/no-namespace\ndeclare namespace window {\n  let VIRTUOSO_LOG_LEVEL: LogLevel | undefined\n}\n\nexport enum LogLevel {\n  DEBUG,\n  INFO,\n  WARN,\n  ERROR,\n}\nexport interface LogMessage {\n  level: LogLevel\n  message: any\n  label: string\n}\n\nexport type Log = (label: string, message: any, level?: LogLevel) => void\n\nconst CONSOLE_METHOD_MAP = {\n  [LogLevel.DEBUG]: 'debug',\n  [LogLevel.INFO]: 'log',\n  [LogLevel.WARN]: 'warn',\n  [LogLevel.ERROR]: 'error',\n} as const\n\nconst getGlobalThis = () => (typeof globalThis === 'undefined' ? window : globalThis)\n\nexport const loggerSystem = u.system(\n  () => {\n    const logLevel = u.statefulStream<LogLevel>(LogLevel.ERROR)\n    const log = u.statefulStream<Log>((label: string, message: any, level: LogLevel = LogLevel.INFO) => {\n      const currentLevel = getGlobalThis()['VIRTUOSO_LOG_LEVEL'] ?? u.getValue(logLevel)\n      if (level >= currentLevel) {\n        // eslint-disable-next-line no-console\n        console[CONSOLE_METHOD_MAP[level]](\n          '%creact-virtuoso: %c%s %o',\n          'color: #0253b3; font-weight: bold',\n          'color: initial',\n          label,\n          message\n        )\n      }\n    })\n\n    return {\n      log,\n      logLevel,\n    }\n  },\n  [],\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { getValue, tup } from '@virtuoso.dev/urx'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport const propsReadySystem = u.system(\n  ([{ log }]) => {\n    const propsReady = u.statefulStream(false)\n\n    const didMount = u.streamFromEmitter(\n      u.pipe(\n        propsReady,\n        u.filter((ready) => ready),\n        u.distinctUntilChanged()\n      )\n    )\n    u.subscribe(propsReady, (value) => {\n      value && getValue(log)('props updated', {}, LogLevel.DEBUG)\n    })\n\n    return { propsReady, didMount }\n  },\n  tup(loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\n\nexport const UP = 'up' as const\nexport const DOWN = 'down' as const\nexport const NONE = 'none' as const\nexport type ScrollDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport interface ListBottomInfo {\n  bottom: number\n  offsetBottom: number\n}\n\nexport interface AtBottomParams {\n  offsetBottom: number\n  scrollTop: number\n  viewportHeight: number\n  scrollHeight: number\n}\n\nexport type NotAtBottomReason =\n  | 'SIZE_INCREASED'\n  | 'NOT_SHOWING_LAST_ITEM'\n  | 'VIEWPORT_HEIGHT_DECREASING'\n  | 'SCROLLING_UPWARDS'\n  | 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n\nexport type AtBottomReason = 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n\nexport type AtBottomState =\n  | {\n      atBottom: false\n      notAtBottomBecause: NotAtBottomReason\n      state: AtBottomParams\n    }\n  | {\n      atBottom: true\n      state: AtBottomParams\n      atBottomBecause: AtBottomReason\n      scrollTopDelta: number\n    }\n\nconst INITIAL_BOTTOM_STATE = {\n  atBottom: false,\n  notAtBottomBecause: 'NOT_SHOWING_LAST_ITEM',\n  state: {\n    offsetBottom: 0,\n    scrollTop: 0,\n    viewportHeight: 0,\n    scrollHeight: 0,\n  },\n} as AtBottomState\n\nexport const stateFlagsSystem = u.system(([{ scrollContainerState, scrollTop, viewportHeight, headerHeight, footerHeight, scrollBy }]) => {\n  const isAtBottom = u.statefulStream(false)\n  const isAtTop = u.statefulStream(true)\n  const atBottomStateChange = u.stream<boolean>()\n  const atTopStateChange = u.stream<boolean>()\n  const atBottomThreshold = u.statefulStream(4)\n\n  // skip 1 to avoid an initial on/off flick\n  const isScrolling = u.streamFromEmitter(\n    u.pipe(\n      u.merge(u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(true)), u.pipe(u.duc(scrollTop), u.skip(1), u.mapTo(false), u.debounceTime(100))),\n      u.distinctUntilChanged()\n    )\n  )\n\n  const isScrollingBy = u.statefulStreamFromEmitter(\n    u.pipe(u.merge(u.pipe(scrollBy, u.mapTo(true)), u.pipe(scrollBy, u.mapTo(false), u.debounceTime(200))), u.distinctUntilChanged()),\n    false\n  )\n\n  // u.subscribe(isScrollingBy, (isScrollingBy) => console.log({ isScrollingBy }))\n\n  u.connect(\n    u.pipe(\n      u.duc(scrollTop),\n      u.map((top) => top === 0),\n      u.distinctUntilChanged()\n    ),\n    isAtTop\n  )\n\n  u.connect(isAtTop, atTopStateChange)\n\n  const atBottomState = u.streamFromEmitter(\n    u.pipe(\n      u.combineLatest(scrollContainerState, u.duc(viewportHeight), u.duc(headerHeight), u.duc(footerHeight), u.duc(atBottomThreshold)),\n      u.scan((current, [[scrollTop, scrollHeight], viewportHeight, _headerHeight, _footerHeight, atBottomThreshold]) => {\n        const isAtBottom = scrollTop + viewportHeight - scrollHeight > -atBottomThreshold\n        const state = {\n          viewportHeight,\n          scrollTop,\n          scrollHeight,\n        }\n\n        if (isAtBottom) {\n          let atBottomBecause: 'SIZE_DECREASED' | 'SCROLLED_DOWN'\n          let scrollTopDelta: number\n          if (scrollTop > current.state.scrollTop) {\n            atBottomBecause = 'SCROLLED_DOWN'\n            scrollTopDelta = current.state.scrollTop - scrollTop\n          } else {\n            atBottomBecause = 'SIZE_DECREASED'\n            scrollTopDelta = current.state.scrollTop - scrollTop || (current as { scrollTopDelta: number }).scrollTopDelta\n          }\n          return {\n            atBottom: true,\n            state,\n            atBottomBecause,\n            scrollTopDelta,\n          } as AtBottomState\n        }\n\n        let notAtBottomBecause: NotAtBottomReason\n\n        if (state.scrollHeight > current.state.scrollHeight) {\n          notAtBottomBecause = 'SIZE_INCREASED'\n        } else if (viewportHeight < current.state.viewportHeight) {\n          notAtBottomBecause = 'VIEWPORT_HEIGHT_DECREASING'\n        } else if (scrollTop < current.state.scrollTop) {\n          notAtBottomBecause = 'SCROLLING_UPWARDS'\n        } else {\n          notAtBottomBecause = 'NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM'\n        }\n\n        return {\n          atBottom: false,\n          notAtBottomBecause,\n          state,\n        } as AtBottomState\n      }, INITIAL_BOTTOM_STATE),\n      u.distinctUntilChanged((prev, next) => {\n        return prev && prev.atBottom === next.atBottom\n      })\n    )\n  )\n\n  const lastJumpDueToItemResize = u.statefulStreamFromEmitter(\n    u.pipe(\n      scrollContainerState,\n      u.scan(\n        (current, [scrollTop, scrollHeight]) => {\n          if (current.scrollHeight !== scrollHeight) {\n            if (current.scrollTop !== scrollTop) {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: current.scrollTop - scrollTop,\n                changed: true,\n              }\n            } else {\n              return {\n                scrollHeight,\n                scrollTop,\n                jump: 0,\n                changed: true,\n              }\n            }\n          } else {\n            return {\n              scrollTop,\n              scrollHeight,\n              jump: 0,\n              changed: false,\n            }\n          }\n        },\n        { scrollHeight: 0, jump: 0, scrollTop: 0, changed: false }\n      ),\n      u.filter((value) => value.changed),\n      u.map((value) => value.jump)\n    ),\n    0\n  )\n\n  u.connect(\n    u.pipe(\n      atBottomState,\n      u.map((state) => state.atBottom)\n    ),\n    isAtBottom\n  )\n\n  u.connect(u.pipe(isAtBottom, u.throttleTime(50)), atBottomStateChange)\n\n  const scrollDirection = u.statefulStream<ScrollDirection>(DOWN)\n\n  u.connect(\n    u.pipe(\n      scrollContainerState,\n      u.map(([scrollTop]) => scrollTop),\n      u.distinctUntilChanged(),\n      u.scan(\n        (acc, scrollTop) => {\n          // if things change while compensating for items, ignore,\n          // but store the new scrollTop\n          if (u.getValue(isScrollingBy)) {\n            return { direction: acc.direction, prevScrollTop: scrollTop }\n          }\n\n          return { direction: scrollTop < acc.prevScrollTop ? UP : DOWN, prevScrollTop: scrollTop }\n        },\n        { direction: DOWN, prevScrollTop: 0 } as { direction: ScrollDirection; prevScrollTop: number }\n      ),\n      u.map((value) => value.direction)\n    ),\n    scrollDirection\n  )\n\n  u.connect(u.pipe(scrollContainerState, u.throttleTime(50), u.mapTo(NONE)), scrollDirection)\n\n  const scrollVelocity = u.statefulStream(0)\n\n  u.connect(\n    u.pipe(\n      isScrolling,\n      u.filter((value) => !value),\n      u.mapTo(0)\n    ),\n    scrollVelocity\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTop,\n      u.throttleTime(100),\n      u.withLatestFrom(isScrolling),\n      u.filter(([_, isScrolling]) => !!isScrolling),\n      u.scan(([_, prev], [next]) => [prev, next], [0, 0]),\n      u.map(([prev, next]) => next - prev)\n    ),\n    scrollVelocity\n  )\n\n  return {\n    isScrolling,\n    isAtTop,\n    isAtBottom,\n    atBottomState,\n    atTopStateChange,\n    atBottomStateChange,\n    scrollDirection,\n    atBottomThreshold,\n    scrollVelocity,\n    lastJumpDueToItemResize,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { ListRange } from './interfaces'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { ScrollSeekConfiguration } from './interfaces'\n\nexport const scrollSeekSystem = u.system(\n  ([{ scrollVelocity }]) => {\n    const isSeeking = u.statefulStream(false)\n    const rangeChanged = u.stream<ListRange>()\n    const scrollSeekConfiguration = u.statefulStream<ScrollSeekConfiguration | undefined | false>(false)\n\n    u.connect(\n      u.pipe(\n        scrollVelocity,\n        u.withLatestFrom(scrollSeekConfiguration, isSeeking, rangeChanged),\n        u.filter(([_, config]) => !!config),\n        u.map(([speed, config, isSeeking, range]) => {\n          const { exit, enter } = config as ScrollSeekConfiguration\n          if (isSeeking) {\n            if (exit(speed, range)) {\n              return false\n            }\n          } else {\n            if (enter(speed, range)) {\n              return true\n            }\n          }\n          return isSeeking\n        }),\n        u.distinctUntilChanged()\n      ),\n      isSeeking\n    )\n\n    u.subscribe(\n      u.pipe(u.combineLatest(isSeeking, scrollVelocity, rangeChanged), u.withLatestFrom(scrollSeekConfiguration)),\n      ([[isSeeking, velocity, range], config]) => isSeeking && config && config.change && config.change(velocity, range)\n    )\n\n    return { isSeeking, scrollSeekConfiguration, scrollVelocity, scrollSeekRangeChanged: rangeChanged }\n  },\n  u.tup(stateFlagsSystem),\n  { singleton: true }\n)\n","interface NilNode {\n  lvl: 0\n}\n\nconst NIL_NODE: NilNode = { lvl: 0 }\n\ninterface NodeData<T> {\n  k: number\n  v: T\n}\n\ninterface NonNilAANode<T> {\n  k: number\n  v: T\n  lvl: number\n  l: NonNilAANode<T> | NilNode\n  r: NonNilAANode<T> | NilNode\n}\n\nexport interface Range<T> {\n  start: number\n  end: number\n  value: T\n}\n\nexport type AANode<T> = NilNode | NonNilAANode<T>\n\nfunction newAANode<T>(k: number, v: T, lvl: number, l: AANode<T> = NIL_NODE, r: AANode<T> = NIL_NODE): NonNilAANode<T> {\n  return { k, v, lvl, l, r }\n}\n\nexport function empty(node: AANode<any>): node is NilNode {\n  return node === NIL_NODE\n}\n\nexport function newTree<T>(): AANode<T> {\n  return NIL_NODE\n}\n\nexport function remove<T>(node: AANode<T>, key: number): AANode<T> {\n  if (empty(node)) return NIL_NODE\n\n  const { k, l, r } = node\n\n  if (key === k) {\n    if (empty(l)) {\n      return r\n    } else if (empty(r)) {\n      return l\n    } else {\n      const [lastKey, lastValue] = last(l)\n      return adjust(clone(node, { k: lastKey, v: lastValue, l: deleteLast(l) }))\n    }\n  } else if (key < k) {\n    return adjust(clone(node, { l: remove(l, key) }))\n  } else {\n    return adjust(clone(node, { r: remove(r, key) }))\n  }\n}\n\nexport function find<T>(node: AANode<T>, key: number): T | undefined {\n  if (empty(node)) {\n    return\n  }\n\n  if (key === node.k) {\n    return node.v\n  } else if (key < node.k) {\n    return find(node.l, key)\n  } else {\n    return find(node.r, key)\n  }\n}\n\nexport function findMaxKeyValue<T>(node: AANode<T>, value: number, field: 'k' | 'v' = 'k'): [number, T | undefined] {\n  if (empty(node)) {\n    return [-Infinity, undefined]\n  }\n\n  if (node[field] === value) {\n    return [node.k, node.v]\n  }\n\n  if (node[field] < value) {\n    const r = findMaxKeyValue(node.r, value, field)\n    if (r[0] === -Infinity) {\n      return [node.k, node.v]\n    } else {\n      return r\n    }\n  }\n\n  return findMaxKeyValue(node.l, value, field)\n}\n\nexport function insert<T>(node: AANode<T>, k: number, v: T): NonNilAANode<T> {\n  if (empty(node)) {\n    return newAANode(k, v, 1)\n  }\n  if (k === node.k) {\n    return clone(node, { k, v })\n  } else if (k < node.k) {\n    return rebalance(clone(node, { l: insert(node.l, k, v) }))\n  } else {\n    return rebalance(clone(node, { r: insert(node.r, k, v) }))\n  }\n}\n\nexport function walkWithin<T>(node: AANode<T>, start: number, end: number): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  const { k, v, l, r } = node\n  let result: NodeData<T>[] = []\n  if (k > start) {\n    result = result.concat(walkWithin(l, start, end))\n  }\n\n  if (k >= start && k <= end) {\n    result.push({ k, v })\n  }\n\n  if (k <= end) {\n    result = result.concat(walkWithin(r, start, end))\n  }\n\n  return result\n}\n\nexport function walk<T>(node: AANode<T>): NodeData<T>[] {\n  if (empty(node)) {\n    return []\n  }\n\n  return [...walk(node.l), { k: node.k, v: node.v }, ...walk(node.r)]\n}\n\nfunction last<T>(node: NonNilAANode<T>): [number, T] {\n  return empty(node.r) ? [node.k, node.v] : last(node.r)\n}\n\nfunction deleteLast<T>(node: NonNilAANode<T>): AANode<T> {\n  return empty(node.r) ? node.l : adjust(clone(node, { r: deleteLast(node.r) }))\n}\n\nfunction clone<T>(node: NonNilAANode<T>, args: Partial<NonNilAANode<T>>): NonNilAANode<T> {\n  return newAANode(\n    args.k !== undefined ? args.k : node.k,\n    args.v !== undefined ? args.v : node.v,\n    args.lvl !== undefined ? args.lvl : node.lvl,\n    args.l !== undefined ? args.l : node.l,\n    args.r !== undefined ? args.r : node.r\n  )\n}\n\nfunction isSingle(node: AANode<any>) {\n  return empty(node) || node.lvl > node.r.lvl\n}\n\nfunction rebalance<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  return split(skew(node))\n}\n\nfunction adjust<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l, r, lvl } = node\n  if (r.lvl >= lvl - 1 && l.lvl >= lvl - 1) {\n    return node\n  } else if (lvl > r.lvl + 1) {\n    if (isSingle(l)) {\n      return skew(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(l) && !empty(l.r)) {\n        return clone(l.r, {\n          l: clone(l, { r: l.r.l }),\n          r: clone(node, {\n            l: l.r.r,\n            lvl: lvl - 1,\n          }),\n          lvl: lvl,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  } else {\n    if (isSingle(node)) {\n      return split(clone(node, { lvl: lvl - 1 }))\n    } else {\n      if (!empty(r) && !empty(r.l)) {\n        const rl = r.l\n        const rlvl = isSingle(rl) ? r.lvl - 1 : r.lvl\n\n        return clone(rl, {\n          l: clone(node, {\n            r: rl.l,\n            lvl: lvl - 1,\n          }),\n          r: split(clone(r, { l: rl.r, lvl: rlvl })),\n          lvl: rl.lvl + 1,\n        })\n      } else {\n        throw new Error('Unexpected empty nodes')\n      }\n    }\n  }\n}\n\nexport function keys(node: AANode<any>): number[] {\n  if (empty(node)) {\n    return []\n  }\n  return [...keys(node.l), node.k, ...keys(node.r)]\n}\n\nexport function ranges<T>(node: AANode<T>): Range<T>[] {\n  return toRanges(walk(node))\n}\n\nexport function rangesWithin<T>(node: AANode<T>, startIndex: number, endIndex: number): Range<T>[] {\n  if (empty(node)) {\n    return []\n  }\n  const adjustedStart = findMaxKeyValue(node, startIndex)[0]\n  return toRanges(walkWithin(node, adjustedStart, endIndex))\n}\n\nexport function arrayToRanges<T, V>(\n  items: T[],\n  parser: (item: T) => { index: number; value: V }\n): Array<{ start: number; end: number; value: V }> {\n  const length = items.length\n  if (length === 0) {\n    return []\n  }\n\n  let { index: start, value } = parser(items[0])\n\n  const result = []\n\n  for (let i = 1; i < length; i++) {\n    const { index: nextIndex, value: nextValue } = parser(items[i])\n    result.push({ start, end: nextIndex - 1, value })\n\n    start = nextIndex\n    value = nextValue\n  }\n\n  result.push({ start, end: Infinity, value })\n  return result\n}\n\nfunction toRanges<T>(nodes: NodeData<T>[]): Range<T>[] {\n  return arrayToRanges(nodes, ({ k: index, v: value }) => ({ index, value }))\n}\n\nfunction split<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { r, lvl } = node\n\n  return !empty(r) && !empty(r.r) && r.lvl === lvl && r.r.lvl === lvl ? clone(r, { l: clone(node, { r: r.l }), lvl: lvl + 1 }) : node\n}\n\nfunction skew<T>(node: NonNilAANode<T>): NonNilAANode<T> {\n  const { l } = node\n\n  return !empty(l) && l.lvl === node.lvl ? clone(l, { r: clone(node, { l: l.r }) }) : node\n}\n","export type Comparator<T> = {\n  (item: T, value: number): -1 | 0 | 1\n}\n\nexport function findIndexOfClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>, start = 0): number {\n  let end = items.length - 1\n\n  while (start <= end) {\n    const index = Math.floor((start + end) / 2)\n    const item = items[index]\n    const match = comparator(item, value)\n    if (match === 0) {\n      return index\n    }\n\n    if (match === -1) {\n      if (end - start < 2) {\n        return index - 1\n      }\n      end = index - 1\n    } else {\n      if (end === start) {\n        return index\n      }\n      start = index + 1\n    }\n  }\n\n  throw new Error(`Failed binary finding record in array - ${items.join(',')}, searched for ${value}`)\n}\n\nexport function findClosestSmallerOrEqual<T>(items: T[], value: number, comparator: Comparator<T>): T {\n  return items[findIndexOfClosestSmallerOrEqual(items, value, comparator)]\n}\n\nexport function findRange<T>(items: T[], startValue: number, endValue: number, comparator: Comparator<T>): T[] {\n  const startIndex = findIndexOfClosestSmallerOrEqual(items, startValue, comparator)\n  const endIndex = findIndexOfClosestSmallerOrEqual(items, endValue, comparator, startIndex)\n  return items.slice(startIndex, endIndex + 1)\n}\n","export function correctItemSize(el: HTMLElement, dimension: 'height' | 'width') {\n  return Math.round(el.getBoundingClientRect()[dimension])\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { arrayToRanges, AANode, empty, findMaxKeyValue, insert, newTree, Range, rangesWithin, remove, walk } from './AATree'\nimport * as arrayBinarySearch from './utils/binaryArraySearch'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { loggerSystem, Log, LogLevel } from './loggerSystem'\n\nexport interface SizeRange {\n  startIndex: number\n  endIndex: number\n  size: number\n}\n\nexport type Data = readonly unknown[] | undefined\n\nfunction rangeIncludes(refRange: SizeRange) {\n  const { size, startIndex, endIndex } = refRange\n  return (range: Range<number>) => {\n    return range.start === startIndex && (range.end === endIndex || range.end === Infinity) && range.value === size\n  }\n}\n\nexport function insertRanges(sizeTree: AANode<number>, ranges: SizeRange[]) {\n  let syncStart = empty(sizeTree) ? 0 : Infinity\n\n  for (const range of ranges) {\n    const { size, startIndex, endIndex } = range\n    syncStart = Math.min(syncStart, startIndex)\n\n    if (empty(sizeTree)) {\n      sizeTree = insert(sizeTree, 0, size)\n      continue\n    }\n\n    // extend the range in both directions, so that we can get adjacent neighbours.\n    // if the previous / next ones have the same value as the one we are about to insert,\n    // we 'merge' them.\n    const overlappingRanges = rangesWithin(sizeTree, startIndex - 1, endIndex + 1)\n\n    if (overlappingRanges.some(rangeIncludes(range))) {\n      continue\n    }\n\n    let firstPassDone = false\n    let shouldInsert = false\n    for (const { start: rangeStart, end: rangeEnd, value: rangeValue } of overlappingRanges) {\n      // previous range\n      if (!firstPassDone) {\n        shouldInsert = rangeValue !== size\n        firstPassDone = true\n      } else {\n        // remove the range if it starts within the new range OR if\n        // it has the same value as it, in order to perform a merge\n        if (endIndex >= rangeStart || size === rangeValue) {\n          sizeTree = remove(sizeTree, rangeStart)\n        }\n      }\n\n      // next range\n      if (rangeEnd > endIndex && endIndex >= rangeStart) {\n        if (rangeValue !== size) {\n          sizeTree = insert(sizeTree, endIndex + 1, rangeValue)\n        }\n      }\n    }\n\n    if (shouldInsert) {\n      sizeTree = insert(sizeTree, startIndex, size)\n    }\n  }\n  return [sizeTree, syncStart] as const\n}\n\nexport interface OffsetPoint {\n  offset: number\n  size: number\n  index: number\n}\n\nexport interface SizeState {\n  sizeTree: AANode<number>\n  offsetTree: Array<OffsetPoint>\n  groupOffsetTree: AANode<number>\n  lastIndex: number\n  lastOffset: number\n  lastSize: number\n  groupIndices: number[]\n}\n\nexport function initialSizeState(): SizeState {\n  return {\n    offsetTree: [],\n    sizeTree: newTree<number>(),\n    groupOffsetTree: newTree<number>(),\n    lastIndex: 0,\n    lastOffset: 0,\n    lastSize: 0,\n    groupIndices: [],\n  }\n}\n\nexport function indexComparator({ index: itemIndex }: OffsetPoint, index: number) {\n  return index === itemIndex ? 0 : index < itemIndex ? -1 : 1\n}\n\nexport function offsetComparator({ offset: itemOffset }: OffsetPoint, offset: number) {\n  return offset === itemOffset ? 0 : offset < itemOffset ? -1 : 1\n}\n\nfunction offsetPointParser(point: OffsetPoint) {\n  return { index: point.index, value: point }\n}\n\nexport function rangesWithinOffsets(\n  tree: Array<OffsetPoint>,\n  startOffset: number,\n  endOffset: number,\n  minStartIndex = 0\n): Array<{\n  start: number\n  end: number\n  value: {\n    size: number\n    offset: number\n    index: number\n  }\n}> {\n  if (minStartIndex > 0) {\n    startOffset = Math.max(startOffset, arrayBinarySearch.findClosestSmallerOrEqual(tree, minStartIndex, indexComparator).offset)\n  }\n\n  return arrayToRanges(arrayBinarySearch.findRange(tree, startOffset, endOffset, offsetComparator), offsetPointParser)\n}\n\nfunction createOffsetTree(prevOffsetTree: OffsetPoint[], syncStart: number, sizeTree: AANode<number>) {\n  let offsetTree = prevOffsetTree\n  let prevIndex = 0\n  let prevSize = 0\n\n  let prevOffset = 0\n  let startIndex = 0\n\n  if (syncStart !== 0) {\n    startIndex = arrayBinarySearch.findIndexOfClosestSmallerOrEqual(offsetTree, syncStart - 1, indexComparator)\n    const offsetInfo = offsetTree[startIndex]\n    prevOffset = offsetInfo.offset\n    const kv = findMaxKeyValue(sizeTree, syncStart - 1)\n    prevIndex = kv[0]\n    prevSize = kv[1]!\n\n    if (offsetTree.length && offsetTree[startIndex].size === findMaxKeyValue(sizeTree, syncStart)[1]) {\n      startIndex -= 1\n    }\n\n    offsetTree = offsetTree.slice(0, startIndex + 1)\n  } else {\n    offsetTree = []\n  }\n\n  for (const { start: startIndex, value } of rangesWithin(sizeTree, syncStart, Infinity)) {\n    const aOffset = (startIndex - prevIndex) * prevSize + prevOffset\n    offsetTree.push({\n      offset: aOffset,\n      size: value,\n      index: startIndex,\n    })\n    prevIndex = startIndex\n    prevOffset = aOffset\n    prevSize = value\n  }\n\n  return {\n    offsetTree,\n    lastIndex: prevIndex,\n    lastOffset: prevOffset,\n    lastSize: prevSize,\n  }\n}\n\nexport function sizeStateReducer(state: SizeState, [ranges, groupIndices, log]: [SizeRange[], number[], Log]) {\n  if (ranges.length > 0) {\n    log('received item sizes', ranges, LogLevel.DEBUG)\n  }\n  const sizeTree = state.sizeTree\n  let newSizeTree: AANode<number> = sizeTree\n  let syncStart = 0\n\n  // We receive probe item results from a group probe,\n  // which should always pass an item and a group\n  // the results contain two ranges, which we consider to mean that groups and items have different size\n  if (groupIndices.length > 0 && empty(sizeTree) && ranges.length === 2) {\n    const groupSize = ranges[0].size\n    const itemSize = ranges[1].size\n    newSizeTree = groupIndices.reduce((tree, groupIndex) => {\n      return insert(insert(tree, groupIndex, groupSize), groupIndex + 1, itemSize)\n    }, newSizeTree)\n  } else {\n    ;[newSizeTree, syncStart] = insertRanges(newSizeTree, ranges)\n  }\n\n  if (newSizeTree === sizeTree) {\n    return state\n  }\n\n  const { offsetTree: newOffsetTree, lastIndex, lastSize, lastOffset } = createOffsetTree(state.offsetTree, syncStart, newSizeTree)\n\n  return {\n    sizeTree: newSizeTree,\n    offsetTree: newOffsetTree,\n    lastIndex,\n    lastOffset,\n    lastSize,\n    groupOffsetTree: groupIndices.reduce((tree, index) => {\n      return insert(tree, index, offsetOf(index, newOffsetTree))\n    }, newTree<number>()),\n    groupIndices,\n  }\n}\n\nexport function offsetOf(index: number, tree: Array<OffsetPoint>) {\n  if (tree.length === 0) {\n    return 0\n  }\n\n  const { offset, index: startIndex, size } = arrayBinarySearch.findClosestSmallerOrEqual(tree, index, indexComparator)\n  return size * (index - startIndex) + offset\n}\n\nexport function originalIndexFromItemIndex(itemIndex: number, sizes: SizeState) {\n  if (!hasGroups(sizes)) {\n    return itemIndex\n  }\n\n  let groupOffset = 0\n  while (sizes.groupIndices[groupOffset] <= itemIndex + groupOffset) {\n    groupOffset++\n  }\n  // we find the real item index, offsetting it by the number of group items before it\n  return itemIndex + groupOffset\n}\n\nexport function hasGroups(sizes: SizeState) {\n  return !empty(sizes.groupOffsetTree)\n}\n\ntype OptionalNumber = number | undefined\n\nconst SIZE_MAP = {\n  offsetHeight: 'height',\n  offsetWidth: 'width',\n} as const\n\n/** Calculates the height of `el`, which will be the `Item` element in the DOM. */\nexport type SizeFunction = (el: HTMLElement, field: 'offsetHeight' | 'offsetWidth') => number\n\nexport const sizeSystem = u.system(\n  ([{ log }]) => {\n    const sizeRanges = u.stream<SizeRange[]>()\n    const totalCount = u.stream<number>()\n    const statefulTotalCount = u.statefulStreamFromEmitter(totalCount, 0)\n    const unshiftWith = u.stream<number>()\n    const shiftWith = u.stream<number>()\n    const firstItemIndex = u.statefulStream(0)\n    const groupIndices = u.statefulStream([] as number[])\n    const fixedItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const defaultItemSize = u.statefulStream<OptionalNumber>(undefined)\n    const itemSize = u.statefulStream<SizeFunction>((el, field) => correctItemSize(el, SIZE_MAP[field]))\n    const data = u.statefulStream<Data>(undefined)\n    const initial = initialSizeState()\n\n    const sizes = u.statefulStreamFromEmitter(\n      u.pipe(sizeRanges, u.withLatestFrom(groupIndices, log), u.scan(sizeStateReducer, initial), u.distinctUntilChanged()),\n      initial\n    )\n\n    u.connect(\n      u.pipe(\n        groupIndices,\n        u.filter((indexes) => indexes.length > 0),\n        u.withLatestFrom(sizes),\n        u.map(([groupIndices, sizes]) => {\n          const groupOffsetTree = groupIndices.reduce((tree, index, idx) => {\n            return insert(tree, index, offsetOf(index, sizes.offsetTree) || idx)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            groupIndices,\n            groupOffsetTree,\n          }\n        })\n      ),\n      sizes\n    )\n\n    // decreasing the total count should remove any existing entries\n    // beyond the last index - do this by publishing the default size as a range over them.\n    u.connect(\n      u.pipe(\n        totalCount,\n        u.withLatestFrom(sizes),\n        u.filter(([totalCount, { lastIndex }]) => {\n          return totalCount < lastIndex\n        }),\n        u.map(([totalCount, { lastIndex, lastSize }]) => {\n          return [\n            {\n              startIndex: totalCount,\n              endIndex: lastIndex,\n              size: lastSize,\n            },\n          ] as SizeRange[]\n        })\n      ),\n      sizeRanges\n    )\n\n    u.connect(fixedItemSize, defaultItemSize)\n\n    const trackItemSizes = u.statefulStreamFromEmitter(\n      u.pipe(\n        fixedItemSize,\n        u.map((size) => size === undefined)\n      ),\n      true\n    )\n\n    u.connect(\n      u.pipe(\n        defaultItemSize,\n        u.filter((value) => {\n          return value !== undefined && empty(u.getValue(sizes).sizeTree)\n        }),\n        u.map((size) => [{ startIndex: 0, endIndex: 0, size }] as SizeRange[])\n      ),\n      sizeRanges\n    )\n\n    const listRefresh = u.streamFromEmitter(\n      u.pipe(\n        sizeRanges,\n        u.withLatestFrom(sizes),\n        u.scan(\n          ({ sizes: oldSizes }, [_, newSizes]) => {\n            return {\n              changed: newSizes !== oldSizes,\n              sizes: newSizes,\n            }\n          },\n          { changed: false, sizes: initial }\n        ),\n        u.map((value) => value.changed)\n      )\n    )\n\n    u.subscribe(\n      u.pipe(\n        firstItemIndex,\n        u.scan(\n          (prev, next) => {\n            return { diff: prev.prev - next, prev: next }\n          },\n          { diff: 0, prev: 0 }\n        ),\n        u.map((val) => val.diff)\n      ),\n      (offset) => {\n        if (offset > 0) {\n          u.publish(unshiftWith, offset)\n        } else if (offset < 0) {\n          u.publish(shiftWith, offset)\n        }\n      }\n    )\n\n    u.subscribe(u.pipe(firstItemIndex, u.withLatestFrom(log)), ([index, log]) => {\n      if (index < 0) {\n        log(\n          \"`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value\",\n          { firstItemIndex },\n          LogLevel.ERROR\n        )\n      }\n    })\n\n    // Capture the current list top item before the sizes get refreshed\n    const beforeUnshiftWith = u.streamFromEmitter(unshiftWith)\n\n    u.connect(\n      u.pipe(\n        unshiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([unshiftWith, sizes]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: prepending items does not work with groups')\n          }\n\n          return walk(sizes.sizeTree).reduce(\n            (acc, { k: index, v: size }) => {\n              return {\n                ranges: [...acc.ranges, { startIndex: acc.prevIndex, endIndex: index + unshiftWith - 1, size: acc.prevSize }],\n                prevIndex: index + unshiftWith,\n                prevSize: size,\n              }\n            },\n            {\n              ranges: [] as SizeRange[],\n              prevIndex: 0,\n              prevSize: sizes.lastSize,\n            }\n          ).ranges\n        })\n      ),\n      sizeRanges\n    )\n\n    const shiftWithOffset = u.streamFromEmitter(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([shiftWith, { offsetTree }]) => {\n          const newFirstItemIndex = -shiftWith\n          return offsetOf(newFirstItemIndex, offsetTree)\n        })\n      )\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([shiftWith, sizes]) => {\n          if (sizes.groupIndices.length > 0) {\n            throw new Error('Virtuoso: shifting items does not work with groups')\n          }\n\n          const newSizeTree = walk(sizes.sizeTree).reduce((acc, { k, v }) => {\n            return insert(acc, Math.max(0, k + shiftWith), v)\n          }, newTree<number>())\n\n          return {\n            ...sizes,\n            sizeTree: newSizeTree,\n            ...createOffsetTree(sizes.offsetTree, 0, newSizeTree),\n          }\n        })\n      ),\n      sizes\n    )\n\n    return {\n      // input\n      data,\n      totalCount,\n      sizeRanges,\n      groupIndices,\n      defaultItemSize,\n      fixedItemSize,\n      unshiftWith,\n      shiftWith,\n      shiftWithOffset,\n      beforeUnshiftWith,\n      firstItemIndex,\n\n      // output\n      sizes,\n      listRefresh,\n      statefulTotalCount,\n      trackItemSizes,\n      itemSize,\n    }\n  },\n  u.tup(loggerSystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromItemIndex, sizeSystem } from './sizeSystem'\nimport { IndexLocationWithAlign } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\nexport type IndexLocation = number | IndexLocationWithAlign\n\nconst SUPPORTS_SCROLL_TO_OPTIONS = typeof document !== 'undefined' && 'scrollBehavior' in document.documentElement.style\n\nexport function normalizeIndexLocation(location: IndexLocation) {\n  const result: IndexLocationWithAlign = typeof location === 'number' ? { index: location } : location\n\n  if (!result.align) {\n    result.align = 'start'\n  }\n  if (!result.behavior || !SUPPORTS_SCROLL_TO_OPTIONS) {\n    result.behavior = 'auto'\n  }\n  if (!result.offset) {\n    result.offset = 0\n  }\n  return result as Required<IndexLocationWithAlign>\n}\n\nexport const scrollToIndexSystem = u.system(\n  ([\n    { sizes, totalCount, listRefresh },\n    { scrollingInProgress, viewportHeight, scrollTo, smoothScrollTargetReached, headerHeight, footerHeight },\n    { log },\n  ]) => {\n    const scrollToIndex = u.stream<IndexLocation>()\n    const topListHeight = u.statefulStream(0)\n\n    let unsubscribeNextListRefresh: any = null\n    let cleartTimeoutRef: any = null\n    let unsubscribeListRefresh: any = null\n\n    function cleanup() {\n      if (unsubscribeNextListRefresh) {\n        unsubscribeNextListRefresh()\n        unsubscribeNextListRefresh = null\n      }\n\n      if (unsubscribeListRefresh) {\n        unsubscribeListRefresh()\n        unsubscribeListRefresh = null\n      }\n\n      if (cleartTimeoutRef) {\n        clearTimeout(cleartTimeoutRef)\n        cleartTimeoutRef = null\n      }\n      u.publish(scrollingInProgress, false)\n    }\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log),\n        u.map(([location, sizes, viewportHeight, totalCount, topListHeight, headerHeight, footerHeight, log]) => {\n          const normalLocation = normalizeIndexLocation(location)\n          const { align, behavior, offset } = normalLocation\n          const lastIndex = totalCount - 1\n          let index = normalLocation.index\n          if (index === 'LAST') {\n            index = lastIndex\n          }\n\n          index = originalIndexFromItemIndex(index, sizes)\n\n          index = Math.max(0, index, Math.min(lastIndex, index))\n\n          let top = offsetOf(index, sizes.offsetTree) + headerHeight\n          if (align === 'end') {\n            top = top - viewportHeight + findMaxKeyValue(sizes.sizeTree, index)[1]!\n            if (index === lastIndex) {\n              top += footerHeight\n            }\n          } else if (align === 'center') {\n            top = top - viewportHeight / 2 + findMaxKeyValue(sizes.sizeTree, index)[1]! / 2\n          } else {\n            top -= topListHeight\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          const retry = (listChanged: boolean) => {\n            cleanup()\n            if (listChanged) {\n              log('retrying to scroll to', { location }, LogLevel.DEBUG)\n              u.publish(scrollToIndex, location)\n            } else {\n              log('list did not change, scroll successful', {}, LogLevel.DEBUG)\n            }\n          }\n\n          cleanup()\n\n          if (behavior === 'smooth') {\n            let listChanged = false\n            unsubscribeListRefresh = u.subscribe(listRefresh, (changed) => {\n              listChanged = listChanged || changed\n            })\n\n            unsubscribeNextListRefresh = u.handleNext(smoothScrollTargetReached, () => {\n              retry(listChanged)\n            })\n          } else {\n            unsubscribeNextListRefresh = u.handleNext(u.pipe(listRefresh, watchChangesFor(50)), retry)\n          }\n\n          // if the scroll jump is too small, the list won't get rerendered.\n          // clean this listener\n          cleartTimeoutRef = setTimeout(() => {\n            cleanup()\n          }, 1200)\n\n          u.publish(scrollingInProgress, true)\n          log('scrolling from index to', { index, top, behavior }, LogLevel.DEBUG)\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    return {\n      scrollToIndex,\n      topListHeight,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, loggerSystem),\n  { singleton: true }\n)\n\nfunction watchChangesFor(limit: number): u.Operator<boolean> {\n  return (done) => {\n    const timeoutRef = setTimeout(() => {\n      done(false)\n    }, limit)\n    return (value) => {\n      if (value) {\n        done(true)\n        clearTimeout(timeoutRef)\n      }\n    }\n  }\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { UP, DOWN, ScrollDirection } from './stateFlagsSystem'\nimport { tupleComparator } from './comparators'\n\nexport type NumberTuple = [number, number]\nexport type Overscan = number | { main: number; reverse: number }\nexport const TOP = 'top' as const\nexport const BOTTOM = 'bottom' as const\nexport const NONE = 'none' as const\nexport type ListEnd = typeof TOP | typeof BOTTOM\nexport type ViewportIncrease = number | { [k in ListEnd]?: number }\nexport type ChangeDirection = typeof UP | typeof DOWN | typeof NONE\n\nexport function getOverscan(overscan: Overscan, end: ListEnd, direction: ScrollDirection) {\n  if (typeof overscan === 'number') {\n    return (direction === UP && end === TOP) || (direction === DOWN && end === BOTTOM) ? overscan : 0\n  } else {\n    if (direction === UP) {\n      return end === TOP ? overscan.main : overscan.reverse\n    } else {\n      return end === BOTTOM ? overscan.main : overscan.reverse\n    }\n  }\n}\n\nfunction getViewportIncrease(value: ViewportIncrease, end: ListEnd) {\n  return typeof value === 'number' ? value : value[end] || 0\n}\n\nexport const sizeRangeSystem = u.system(\n  ([{ scrollTop, viewportHeight, deviation, headerHeight }]) => {\n    const listBoundary = u.stream<NumberTuple>()\n    const topListHeight = u.statefulStream(0)\n    const fixedHeaderHeight = u.statefulStream(0)\n    const increaseViewportBy = u.statefulStream<ViewportIncrease>(0)\n    const overscan = u.statefulStream<Overscan>(0)\n\n    const visibleRange = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          u.duc(scrollTop),\n          u.duc(viewportHeight),\n          u.duc(headerHeight),\n          u.duc(listBoundary, tupleComparator),\n          u.duc(overscan),\n          u.duc(topListHeight),\n          u.duc(fixedHeaderHeight),\n          u.duc(deviation),\n          u.duc(increaseViewportBy)\n        ),\n        u.map(\n          ([\n            scrollTop,\n            viewportHeight,\n            headerHeight,\n            [listTop, listBottom],\n            overscan,\n            topListHeight,\n            fixedHeaderHeight,\n            deviation,\n            increaseViewportBy,\n          ]) => {\n            const top = scrollTop - deviation\n            const stickyHeaderHeight = topListHeight + fixedHeaderHeight\n            const headerVisible = Math.max(headerHeight - top, 0)\n            let direction: ChangeDirection = NONE\n            const topViewportAddition = getViewportIncrease(increaseViewportBy, TOP)\n            const bottomViewportAddition = getViewportIncrease(increaseViewportBy, BOTTOM)\n\n            listTop -= deviation\n            listTop += headerHeight + fixedHeaderHeight\n            listBottom += headerHeight + fixedHeaderHeight\n            listBottom -= deviation\n\n            // console.log({ listTop, scrollTop, stickyHeaderHeight, topViewportAddition })\n            if (listTop > scrollTop + stickyHeaderHeight - topViewportAddition) {\n              direction = UP\n            }\n\n            if (listBottom < scrollTop - headerVisible + viewportHeight + bottomViewportAddition) {\n              direction = DOWN\n            }\n\n            if (direction !== NONE) {\n              return [\n                Math.max(top - headerHeight - getOverscan(overscan, TOP, direction) - topViewportAddition, 0),\n                top -\n                  headerVisible -\n                  fixedHeaderHeight +\n                  viewportHeight +\n                  getOverscan(overscan, BOTTOM, direction) +\n                  bottomViewportAddition,\n              ] as NumberTuple\n            }\n\n            return null\n          }\n        ),\n        u.filter((value) => value != null),\n        u.distinctUntilChanged(tupleComparator as any)\n      ),\n      [0, 0]\n    ) as unknown as u.StatefulStream<NumberTuple>\n\n    return {\n      // input\n      listBoundary,\n      overscan,\n      topListHeight,\n      fixedHeaderHeight,\n      increaseViewportBy,\n\n      // output\n      visibleRange,\n    }\n  },\n  u.tup(domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { WindowViewportInfo } from './interfaces'\n\nexport const windowScrollerSystem = u.system(([{ scrollTo, scrollContainerState }]) => {\n  const windowScrollContainerState = u.stream<[number, number]>()\n  const windowViewportRect = u.stream<WindowViewportInfo>()\n  const windowScrollTo = u.stream<ScrollToOptions>()\n  const useWindowScroll = u.statefulStream(false)\n  const customScrollParent = u.statefulStream<HTMLElement | undefined>(undefined)\n\n  u.connect(\n    u.pipe(\n      u.combineLatest(windowScrollContainerState, windowViewportRect),\n      u.map(([[windowScrollTop, scrollHeight], { offsetTop }]) => {\n        return [Math.max(0, windowScrollTop - offsetTop), scrollHeight]\n      })\n    ),\n    scrollContainerState\n  )\n\n  u.connect(\n    u.pipe(\n      scrollTo,\n      u.withLatestFrom(windowViewportRect),\n      u.map(([scrollTo, { offsetTop }]) => {\n        return {\n          ...scrollTo,\n          top: scrollTo.top! + offsetTop,\n        }\n      })\n    ),\n    windowScrollTo\n  )\n\n  return {\n    // config\n    useWindowScroll,\n    customScrollParent,\n\n    // input\n    windowScrollContainerState,\n    windowViewportRect,\n\n    // signals\n    windowScrollTo,\n  }\n}, u.tup(domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { rangeComparator, tupleComparator } from './comparators'\nimport { domIOSystem } from './domIOSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { IndexLocation, normalizeIndexLocation } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\n\nexport interface ElementDimensions {\n  width: number\n  height: number\n}\n\nexport interface GridItem {\n  index: number\n}\n\nexport interface GridLayout {\n  top: number\n  bottom: number\n}\n\nexport interface GridState extends GridLayout {\n  items: GridItem[]\n  offsetTop: number\n  offsetBottom: number\n  itemHeight: number\n  itemWidth: number\n}\n\nconst INITIAL_GRID_STATE: GridState = {\n  items: [],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst PROBE_GRID_STATE: GridState = {\n  items: [{ index: 0 }],\n  offsetBottom: 0,\n  offsetTop: 0,\n  top: 0,\n  bottom: 0,\n  itemHeight: 0,\n  itemWidth: 0,\n}\n\nconst { round, ceil, floor, min, max } = Math\n\nfunction buildItems(startIndex: number, endIndex: number) {\n  return Array.from({ length: endIndex - startIndex + 1 }).map((_, i) => ({ index: i + startIndex } as GridItem))\n}\nexport const gridSystem = u.system(\n  ([\n    { overscan, visibleRange, listBoundary },\n    { scrollTop, viewportHeight, scrollBy, scrollTo, smoothScrollTargetReached, scrollContainerState },\n    stateFlags,\n    scrollSeek,\n    { propsReady, didMount },\n    { windowViewportRect, windowScrollTo, useWindowScroll, customScrollParent, windowScrollContainerState },\n  ]) => {\n    const totalCount = u.statefulStream(0)\n    const initialItemCount = u.statefulStream(0)\n    const gridState = u.statefulStream(INITIAL_GRID_STATE)\n    const viewportDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const itemDimensions = u.statefulStream<ElementDimensions>({ height: 0, width: 0 })\n    const scrollToIndex = u.stream<IndexLocation>()\n    const scrollHeight = u.stream<number>()\n    const deviation = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.map(([, count]) => {\n          return {\n            items: buildItems(0, count - 1),\n            top: 0,\n            bottom: 0,\n            offsetBottom: 0,\n            offsetTop: 0,\n            itemHeight: 0,\n            itemWidth: 0,\n          }\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(\n          u.duc(totalCount),\n          visibleRange,\n          u.duc(itemDimensions, (prev, next) => prev && prev.width === next.width && prev.height === next.height)\n        ),\n        u.withLatestFrom(viewportDimensions),\n        u.map(([[totalCount, [startOffset, endOffset], item], viewport]) => {\n          const { height: itemHeight, width: itemWidth } = item\n          const { width: viewportWidth } = viewport\n\n          if (totalCount === 0 || viewportWidth === 0) {\n            return INITIAL_GRID_STATE\n          }\n\n          if (itemWidth === 0) {\n            return PROBE_GRID_STATE\n          }\n\n          const perRow = itemsPerRow(viewportWidth, itemWidth)\n\n          let startIndex = perRow * floor(startOffset / itemHeight)\n          let endIndex = perRow * ceil(endOffset / itemHeight) - 1\n          endIndex = min(totalCount - 1, endIndex)\n          startIndex = min(endIndex, max(0, startIndex))\n\n          const items = buildItems(startIndex, endIndex)\n          const { top, bottom } = gridLayout(viewport, item, items)\n          const totalHeight = ceil(totalCount / perRow) * itemHeight\n          const offsetBottom = totalHeight - bottom\n\n          return { items, offsetTop: top, offsetBottom, top, bottom, itemHeight, itemWidth } as GridState\n        })\n      ),\n      gridState\n    )\n\n    u.connect(\n      u.pipe(\n        viewportDimensions,\n        u.map(({ height }) => height)\n      ),\n      viewportHeight\n    )\n\n    u.connect(\n      u.pipe(\n        u.combineLatest(viewportDimensions, itemDimensions, gridState),\n        u.map(([viewportDimensions, item, { items }]) => {\n          const { top, bottom } = gridLayout(viewportDimensions, item, items)\n\n          return [top, bottom] as [number, number]\n        }),\n        u.distinctUntilChanged(tupleComparator)\n      ),\n      listBoundary\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].index === totalCount - 1),\n        u.map(([, totalCount]) => totalCount - 1),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => {\n          return items.length > 0 && items[0].index === 0\n        }),\n        u.mapTo(0),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        u.duc(gridState),\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index,\n          }\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    u.connect(rangeChanged, scrollSeek.scrollSeekRangeChanged)\n\n    u.connect(\n      u.pipe(\n        scrollToIndex,\n        u.withLatestFrom(viewportDimensions, itemDimensions, totalCount),\n        u.map(([location, viewport, item, totalCount]) => {\n          const normalLocation = normalizeIndexLocation(location)\n          const { align, behavior, offset } = normalLocation\n          let index = normalLocation.index\n          if (index === 'LAST') {\n            index = totalCount - 1\n          }\n\n          index = max(0, index, min(totalCount - 1, index))\n\n          let top = itemTop(viewport, item, index)\n\n          if (align === 'end') {\n            top = round(top - viewport.height + item.height)\n          } else if (align === 'center') {\n            top = round(top - viewport.height / 2 + item.height / 2)\n          }\n\n          if (offset) {\n            top += offset\n          }\n\n          return { top, behavior }\n        })\n      ),\n      scrollTo\n    )\n\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        gridState,\n        u.map((gridState) => {\n          return gridState.offsetBottom + gridState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(\n      u.pipe(\n        windowViewportRect,\n        u.map((viewportInfo) => ({ width: viewportInfo.visibleWidth, height: viewportInfo.visibleHeight }))\n      ),\n      viewportDimensions\n    )\n\n    return {\n      // input\n      totalCount,\n      viewportDimensions,\n      itemDimensions,\n      scrollTop,\n      scrollHeight,\n      overscan,\n      scrollBy,\n      scrollTo,\n      scrollToIndex,\n      smoothScrollTargetReached,\n      windowViewportRect,\n      windowScrollTo,\n      useWindowScroll,\n      customScrollParent,\n      windowScrollContainerState,\n      deviation,\n      scrollContainerState,\n      initialItemCount,\n      ...scrollSeek,\n\n      // output\n      gridState,\n      totalListHeight,\n      ...stateFlags,\n      startReached,\n      endReached,\n      rangeChanged,\n      propsReady,\n    }\n  },\n  u.tup(sizeRangeSystem, domIOSystem, stateFlagsSystem, scrollSeekSystem, propsReadySystem, windowScrollerSystem)\n)\n\nfunction gridLayout(viewport: ElementDimensions, item: ElementDimensions, items: GridItem[]): GridLayout {\n  const { height: itemHeight } = item\n  if (itemHeight === undefined || items.length === 0) {\n    return { top: 0, bottom: 0 }\n  }\n\n  const top = itemTop(viewport, item, items[0].index)\n  const bottom = itemTop(viewport, item, items[items.length - 1].index) + itemHeight\n  return { top, bottom }\n}\n\nfunction itemTop(viewport: ElementDimensions, item: ElementDimensions, index: number) {\n  const perRow = itemsPerRow(viewport.width, item.width)\n  return floor(index / perRow) * item.height\n}\n\nfunction itemsPerRow(viewportWidth: number, itemWidth: number) {\n  return max(1, floor(viewportWidth / itemWidth))\n}\n","import { useRef } from 'react'\n\nexport type CallbackRefParam = HTMLElement | null\n\nexport function useSizeWithElRef(callback: (e: HTMLElement) => void, enabled = true) {\n  const ref = useRef<CallbackRefParam>(null)\n\n  let callbackRef = (_el: CallbackRefParam) => {\n    void 0\n  }\n\n  if (typeof ResizeObserver !== 'undefined') {\n    const observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      const element = entries[0].target as HTMLElement\n      if (element.offsetParent !== null) {\n        callback(element)\n      }\n    })\n\n    callbackRef = (elRef: CallbackRefParam) => {\n      if (elRef && enabled) {\n        observer.observe(elRef)\n        ref.current = elRef\n      } else {\n        if (ref.current) {\n          observer.unobserve(ref.current)\n        }\n        ref.current = null\n      }\n    }\n  }\n\n  return { ref, callbackRef }\n}\n\nexport default function useSize(callback: (e: HTMLElement) => void, enabled = true) {\n  return useSizeWithElRef(callback, enabled).callbackRef\n}\n","import { useEffect, useRef, useCallback } from 'react'\nimport { useSizeWithElRef } from './useSize'\nimport { WindowViewportInfo } from '../interfaces'\n\nexport default function useWindowViewportRectRef(callback: (info: WindowViewportInfo) => void, customScrollParent?: HTMLElement) {\n  const viewportInfo = useRef<WindowViewportInfo | null>(null)\n\n  const calculateInfo = useCallback(\n    (element: HTMLElement | null) => {\n      if (element === null) {\n        return\n      }\n      const rect = element.getBoundingClientRect()\n      const visibleWidth = rect.width\n      let visibleHeight: number, offsetTop: number\n\n      if (customScrollParent) {\n        const customScrollParentRect = customScrollParent.getBoundingClientRect()\n        const deltaTop = rect.top - customScrollParentRect.top\n\n        visibleHeight = customScrollParentRect.height - Math.max(0, deltaTop)\n        offsetTop = deltaTop + customScrollParent.scrollTop\n      } else {\n        visibleHeight = window.innerHeight - Math.max(0, rect.top)\n        offsetTop = rect.top + window.pageYOffset\n      }\n\n      viewportInfo.current = {\n        offsetTop,\n        visibleHeight,\n        visibleWidth,\n      }\n\n      callback(viewportInfo.current)\n    },\n    [callback, customScrollParent]\n  )\n\n  const { callbackRef, ref } = useSizeWithElRef(calculateInfo)\n\n  const scrollAndResizeEventHandler = useCallback(() => {\n    calculateInfo(ref.current)\n  }, [calculateInfo, ref])\n\n  useEffect(() => {\n    if (customScrollParent) {\n      customScrollParent.addEventListener('scroll', scrollAndResizeEventHandler)\n      const observer = new ResizeObserver(scrollAndResizeEventHandler)\n      observer.observe(customScrollParent)\n      return () => {\n        customScrollParent.removeEventListener('scroll', scrollAndResizeEventHandler)\n        observer.unobserve(customScrollParent)\n      }\n    } else {\n      window.addEventListener('scroll', scrollAndResizeEventHandler)\n      window.addEventListener('resize', scrollAndResizeEventHandler)\n      return () => {\n        window.removeEventListener('scroll', scrollAndResizeEventHandler)\n        window.removeEventListener('resize', scrollAndResizeEventHandler)\n      }\n    }\n  }, [scrollAndResizeEventHandler, customScrollParent])\n\n  return callbackRef\n}\n","import { useEffect, useLayoutEffect } from 'react'\n\nconst useIsomorphicLayoutEffect = typeof document !== 'undefined' ? useLayoutEffect : useEffect\n\nexport default useIsomorphicLayoutEffect\n","import { Log, LogLevel } from '../loggerSystem'\nimport { SizeFunction, SizeRange } from '../sizeSystem'\nimport useSize from './useSize'\n\nexport default function useChangedListContentsSizes(\n  callback: (ranges: SizeRange[]) => void,\n  itemSize: SizeFunction,\n  enabled: boolean,\n  scrollContainerStateCallback: (state: [number, number]) => void,\n  log: Log,\n  customScrollParent?: HTMLElement\n) {\n  return useSize((el: HTMLElement) => {\n    const ranges = getChangedChildSizes(el.children, itemSize, 'offsetHeight', log)\n    let scrollableElement = el.parentElement!\n\n    while (!scrollableElement.dataset['virtuosoScroller']) {\n      scrollableElement = scrollableElement.parentElement!\n    }\n\n    const scrollTop = customScrollParent\n      ? customScrollParent.scrollTop\n      : // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n      (scrollableElement.firstElementChild! as HTMLDivElement).dataset['viewportType']! === 'window'\n      ? window.pageYOffset || document.documentElement.scrollTop\n      : scrollableElement.scrollTop\n\n    customScrollParent\n      ? scrollContainerStateCallback([Math.max(scrollTop, 0), customScrollParent.scrollHeight])\n      : scrollContainerStateCallback([Math.max(scrollTop, 0), scrollableElement.scrollHeight])\n    if (ranges !== null) {\n      callback(ranges)\n    }\n  }, enabled)\n}\n\nfunction getChangedChildSizes(children: HTMLCollection, itemSize: SizeFunction, field: 'offsetHeight' | 'offsetWidth', log: Log) {\n  const length = children.length\n\n  if (length === 0) {\n    return null\n  }\n\n  const results: SizeRange[] = []\n\n  for (let i = 0; i < length; i++) {\n    const child = children.item(i) as HTMLElement\n\n    if (!child || child.dataset.index === undefined) {\n      continue\n    }\n\n    const index = parseInt(child.dataset.index!)\n    const knownSize = parseFloat(child.dataset.knownSize!)\n    const size = itemSize(child, field)\n\n    if (size === 0) {\n      log('Zero-sized element, this should not happen', { child }, LogLevel.ERROR)\n    }\n\n    if (size === knownSize) {\n      continue\n    }\n\n    const lastResult = results[results.length - 1]\n    if (results.length === 0 || lastResult.size !== size || lastResult.endIndex !== index - 1) {\n      results.push({ startIndex: index, endIndex: index, size })\n    } else {\n      results[results.length - 1].endIndex++\n    }\n  }\n\n  return results\n}\n","import { useRef, useCallback, useEffect } from 'react'\nimport * as u from '@virtuoso.dev/urx'\nimport { correctItemSize } from '../utils/correctItemSize'\n\nexport type ScrollerRef = Window | HTMLElement | null\n\nfunction approximatelyEqual(num1: number, num2: number) {\n  return Math.abs(num1 - num2) < 1.01\n}\n\nexport default function useScrollTop(\n  scrollContainerStateCallback: (state: [number, number]) => void,\n  smoothScrollTargetReached: (yes: true) => void,\n  scrollerElement: any,\n  scrollerRefCallback: (ref: ScrollerRef) => void = u.noop,\n  customScrollParent?: HTMLElement\n) {\n  const scrollerRef = useRef<HTMLElement | null | Window>(null)\n  const scrollTopTarget = useRef<any>(null)\n  const timeoutRef = useRef<any>(null)\n\n  const handler = useCallback(\n    (ev: Event) => {\n      const el = ev.target as HTMLElement\n      const scrollTop =\n        (el as any) === window || (el as any) === document ? window.pageYOffset || document.documentElement.scrollTop : el.scrollTop\n      const scrollHeight = (el as any) === window ? document.documentElement.scrollHeight : el.scrollHeight\n\n      scrollContainerStateCallback([Math.max(scrollTop, 0), scrollHeight])\n\n      if (scrollTopTarget.current !== null) {\n        if (scrollTop === scrollTopTarget.current || scrollTop <= 0 || scrollTop === el.scrollHeight - correctItemSize(el, 'height')) {\n          scrollTopTarget.current = null\n          smoothScrollTargetReached(true)\n          if (timeoutRef.current) {\n            clearTimeout(timeoutRef.current)\n            timeoutRef.current = null\n          }\n        }\n      }\n    },\n    [scrollContainerStateCallback, smoothScrollTargetReached]\n  )\n\n  useEffect(() => {\n    const localRef = customScrollParent ? customScrollParent : scrollerRef.current!\n\n    scrollerRefCallback(customScrollParent ? customScrollParent : scrollerRef.current)\n    handler({ target: localRef } as unknown as Event)\n    localRef.addEventListener('scroll', handler, { passive: true })\n\n    return () => {\n      scrollerRefCallback(null)\n      localRef.removeEventListener('scroll', handler)\n    }\n  }, [scrollerRef, handler, scrollerElement, scrollerRefCallback, customScrollParent])\n\n  function scrollToCallback(location: ScrollToOptions) {\n    const scrollerElement = scrollerRef.current\n    if (!scrollerElement || ('offsetHeight' in scrollerElement && scrollerElement.offsetHeight === 0)) {\n      return\n    }\n\n    const isSmooth = location.behavior === 'smooth'\n\n    let offsetHeight: number\n    let scrollHeight: number\n    let scrollTop: number\n\n    if (scrollerElement === window) {\n      // this is not a mistake\n      scrollHeight = Math.max(correctItemSize(document.documentElement, 'height'), document.documentElement.scrollHeight)\n      offsetHeight = window.innerHeight\n      scrollTop = document.documentElement.scrollTop\n    } else {\n      scrollHeight = (scrollerElement as HTMLElement).scrollHeight\n      offsetHeight = correctItemSize(scrollerElement as HTMLElement, 'height')\n      scrollTop = (scrollerElement as HTMLElement).scrollTop\n    }\n\n    const maxScrollTop = scrollHeight - offsetHeight\n    location.top = Math.ceil(Math.max(Math.min(maxScrollTop, location.top!), 0))\n\n    // avoid system hanging because the DOM never called back\n    // with the scrollTop\n    // scroller is already at this location\n    if (approximatelyEqual(offsetHeight, scrollHeight) || location.top === scrollTop) {\n      scrollContainerStateCallback([scrollTop, scrollHeight])\n      if (isSmooth) {\n        smoothScrollTargetReached(true)\n      }\n      return\n    }\n\n    if (isSmooth) {\n      scrollTopTarget.current = location.top\n      if (timeoutRef.current) {\n        clearTimeout(timeoutRef.current)\n      }\n\n      timeoutRef.current = setTimeout(() => {\n        timeoutRef.current = null\n        scrollTopTarget.current = null\n        smoothScrollTargetReached(true)\n      }, 1000)\n    } else {\n      scrollTopTarget.current = null\n    }\n\n    scrollerElement.scrollTo(location)\n  }\n\n  function scrollByCallback(location: ScrollToOptions) {\n    if (scrollTopTarget.current === null) {\n      scrollerRef.current!.scrollBy(location)\n    }\n  }\n\n  return { scrollerRef, scrollByCallback, scrollToCallback }\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { empty } from './AATree'\nimport { sizeSystem } from './sizeSystem'\nimport { domIOSystem } from './domIOSystem'\nimport { IndexLocation, scrollToIndexSystem } from './scrollToIndexSystem'\nimport { propsReadySystem } from './propsReadySystem'\n\nexport function getInitialTopMostItemIndexNumber(location: IndexLocation, totalCount: number): number {\n  const lastIndex = totalCount - 1\n  const index = typeof location === 'number' ? location : location.index === 'LAST' ? lastIndex : location.index\n  return index\n}\n\nexport const initialTopMostItemIndexSystem = u.system(\n  ([{ sizes, listRefresh, defaultItemSize }, { scrollTop }, { scrollToIndex }, { didMount }]) => {\n    const scrolledToInitialItem = u.statefulStream(true)\n    const initialTopMostItemIndex = u.statefulStream<IndexLocation>(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialTopMostItemIndex),\n        u.filter(([_, location]) => !!location),\n        u.mapTo(false)\n      ),\n      scrolledToInitialItem\n    )\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(listRefresh, didMount),\n        u.withLatestFrom(scrolledToInitialItem, sizes, defaultItemSize),\n        u.filter(([[, didMount], scrolledToInitialItem, { sizeTree }, defaultItemSize]) => {\n          return didMount && (!empty(sizeTree) || defaultItemSize !== undefined) && !scrolledToInitialItem\n        }),\n        u.withLatestFrom(initialTopMostItemIndex)\n      ),\n      ([, initialTopMostItemIndex]) => {\n        setTimeout(() => {\n          u.handleNext(scrollTop, () => {\n            u.publish(scrolledToInitialItem, true)\n          })\n          u.publish(scrollToIndex, initialTopMostItemIndex)\n        })\n      }\n    )\n\n    return {\n      scrolledToInitialItem,\n      initialTopMostItemIndex,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, propsReadySystem),\n  { singleton: true }\n)\n","/* eslint-disable @typescript-eslint/no-unsafe-call */\nimport * as u from '@virtuoso.dev/urx'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { FollowOutput, FollowOutputScalarType } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { loggerSystem, LogLevel } from './loggerSystem'\nimport { domIOSystem } from './domIOSystem'\n\nfunction normalizeFollowOutput(follow: FollowOutputScalarType): FollowOutputScalarType {\n  if (!follow) {\n    return false\n  }\n  return follow === 'smooth' ? 'smooth' : 'auto'\n}\n\nconst behaviorFromFollowOutput = (follow: FollowOutput, isAtBottom: boolean) => {\n  if (typeof follow === 'function') {\n    return normalizeFollowOutput(follow(isAtBottom))\n  }\n  return isAtBottom && normalizeFollowOutput(follow)\n}\n\nexport const followOutputSystem = u.system(\n  ([\n    { totalCount, listRefresh },\n    { isAtBottom, atBottomState },\n    { scrollToIndex },\n    { scrolledToInitialItem },\n    { propsReady, didMount },\n    { log },\n    { scrollingInProgress },\n  ]) => {\n    const followOutput = u.statefulStream<FollowOutput>(false)\n    let pendingScrollHandle: any = null\n\n    function scrollToBottom(followOutputBehavior: FollowOutputScalarType) {\n      u.publish(scrollToIndex, {\n        index: 'LAST',\n        align: 'end',\n        behavior: followOutputBehavior,\n      })\n    }\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.pipe(u.duc(totalCount), u.skip(1)), didMount),\n        u.withLatestFrom(u.duc(followOutput), isAtBottom, scrolledToInitialItem, scrollingInProgress),\n        u.map(([[totalCount, didMount], followOutput, isAtBottom, scrolledToInitialItem, scrollingInProgress]) => {\n          let shouldFollow = didMount && scrolledToInitialItem\n          let followOutputBehavior: FollowOutputScalarType = 'auto'\n\n          if (shouldFollow) {\n            // if scrolling to index is in progress,\n            // assume that a previous followOutput response is going\n            followOutputBehavior = behaviorFromFollowOutput(followOutput, isAtBottom || scrollingInProgress)\n            shouldFollow = shouldFollow && !!followOutputBehavior\n          }\n\n          return { totalCount, shouldFollow, followOutputBehavior }\n        }),\n        u.filter(({ shouldFollow }) => shouldFollow)\n      ),\n      ({ totalCount, followOutputBehavior }) => {\n        if (pendingScrollHandle) {\n          pendingScrollHandle()\n          pendingScrollHandle = null\n        }\n\n        pendingScrollHandle = u.handleNext(listRefresh, () => {\n          u.getValue(log)('following output to ', { totalCount }, LogLevel.DEBUG)\n          scrollToBottom(followOutputBehavior)\n          pendingScrollHandle = null\n        })\n      }\n    )\n\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.duc(followOutput), totalCount, propsReady),\n        u.filter(([follow, , ready]) => follow && ready),\n        u.scan(\n          ({ value }, [, next]) => {\n            return { refreshed: value === next, value: next }\n          },\n          { refreshed: false, value: 0 }\n        ),\n        u.filter(({ refreshed }) => refreshed),\n        u.withLatestFrom(followOutput, totalCount)\n      ),\n      ([, followOutput]) => {\n        const cancel = u.handleNext(atBottomState, (state) => {\n          if (followOutput && !state.atBottom && state.notAtBottomBecause === 'SIZE_INCREASED' && !pendingScrollHandle) {\n            u.getValue(log)('scrolling to bottom due to increased size', {}, LogLevel.DEBUG)\n            scrollToBottom('auto')\n          }\n        })\n        setTimeout(cancel, 100)\n      }\n    )\n\n    u.subscribe(u.combineLatest(u.duc(followOutput), atBottomState), ([followOutput, state]) => {\n      if (followOutput && !state.atBottom && state.notAtBottomBecause === 'VIEWPORT_HEIGHT_DECREASING') {\n        scrollToBottom('auto')\n      }\n    })\n\n    return { followOutput }\n  },\n  u.tup(sizeSystem, stateFlagsSystem, scrollToIndexSystem, initialTopMostItemIndexSystem, propsReadySystem, loggerSystem, domIOSystem)\n)\n","import {\n  combineLatest,\n  connect,\n  distinctUntilChanged,\n  system,\n  filter,\n  map,\n  pipe,\n  prop,\n  stream,\n  streamFromEmitter,\n  tup,\n} from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { sizeSystem, hasGroups } from './sizeSystem'\nexport interface GroupIndexesAndCount {\n  totalCount: number\n  groupIndices: number[]\n}\n\nexport function groupCountsToIndicesAndCount(counts: number[]) {\n  return counts.reduce(\n    (acc, groupCount) => {\n      acc.groupIndices.push(acc.totalCount)\n      acc.totalCount += groupCount + 1\n      return acc\n    },\n    {\n      totalCount: 0,\n      groupIndices: [],\n    } as GroupIndexesAndCount\n  )\n}\n\nexport const groupedListSystem = system(([{ totalCount, groupIndices, sizes }, { scrollTop, headerHeight }]) => {\n  const groupCounts = stream<number[]>()\n  const topItemsIndexes = stream<[number]>()\n  const groupIndicesAndCount = streamFromEmitter(pipe(groupCounts, map(groupCountsToIndicesAndCount)))\n  connect(pipe(groupIndicesAndCount, map(prop('totalCount'))), totalCount)\n  connect(pipe(groupIndicesAndCount, map(prop('groupIndices'))), groupIndices)\n\n  connect(\n    pipe(\n      combineLatest(scrollTop, sizes, headerHeight),\n      filter(([_, sizes]) => hasGroups(sizes)),\n      map(([scrollTop, state, headerHeight]) => findMaxKeyValue(state.groupOffsetTree, Math.max(scrollTop - headerHeight, 0), 'v')[0]),\n      distinctUntilChanged(),\n      map((index) => [index])\n    ),\n    topItemsIndexes\n  )\n\n  return { groupCounts, topItemsIndexes }\n}, tup(sizeSystem, domIOSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { empty, findMaxKeyValue, Range, rangesWithin } from './AATree'\nimport { groupedListSystem } from './groupedListSystem'\nimport { getInitialTopMostItemIndexNumber, initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { Item, ListItem, ListRange } from './interfaces'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { Data, originalIndexFromItemIndex, SizeState, sizeSystem, hasGroups, rangesWithinOffsets } from './sizeSystem'\nimport { stateFlagsSystem } from './stateFlagsSystem'\nimport { rangeComparator, tupleComparator } from './comparators'\n\nexport type ListItems = ListItem<unknown>[]\nexport interface TopListState {\n  items: ListItems\n  listHeight: number\n}\n\nexport interface ListState {\n  items: ListItems\n  topItems: ListItems\n  topListHeight: number\n  offsetTop: number\n  offsetBottom: number\n  top: number\n  bottom: number\n  totalCount: number\n}\n\nfunction probeItemSet(index: number, sizes: SizeState, data: Data) {\n  if (hasGroups(sizes)) {\n    const itemIndex = originalIndexFromItemIndex(index, sizes)\n    const groupIndex = findMaxKeyValue(sizes.groupOffsetTree, itemIndex)[0]\n\n    return [\n      { index: groupIndex, size: 0, offset: 0 },\n      { index: itemIndex, size: 0, offset: 0, data: data && data[0] },\n    ]\n  }\n  return [{ index, size: 0, offset: 0, data: data && data[0] }]\n}\n\nconst EMPTY_LIST_STATE: ListState = {\n  items: [] as ListItems,\n  topItems: [] as ListItems,\n  offsetTop: 0,\n  offsetBottom: 0,\n  top: 0,\n  bottom: 0,\n  topListHeight: 0,\n  totalCount: 0,\n}\n\nfunction transposeItems(items: Item<any>[], sizes: SizeState, firstItemIndex: number): ListItems {\n  if (items.length === 0) {\n    return []\n  }\n\n  if (!hasGroups(sizes)) {\n    return items.map((item) => ({ ...item, index: item.index + firstItemIndex, originalIndex: item.index }))\n  }\n\n  const startIndex = items[0].index\n  const endIndex = items[items.length - 1].index\n\n  const transposedItems = [] as ListItems\n  const groupRanges = rangesWithin(sizes.groupOffsetTree, startIndex, endIndex)\n  let currentRange: Range<number> | undefined = undefined\n  let currentGroupIndex = 0\n\n  for (const item of items) {\n    if (!currentRange || currentRange.end < item.index) {\n      currentRange = groupRanges.shift()!\n      currentGroupIndex = sizes.groupIndices.indexOf(currentRange.start)\n    }\n\n    let transposedItem: { type: 'group'; index: number } | { index: number; groupIndex: number }\n\n    if (item.index === currentRange.start) {\n      transposedItem = {\n        type: 'group' as const,\n        index: currentGroupIndex,\n      }\n    } else {\n      transposedItem = {\n        index: item.index - (currentGroupIndex + 1) + firstItemIndex,\n        groupIndex: currentGroupIndex,\n      }\n    }\n\n    transposedItems.push({\n      ...transposedItem,\n      size: item.size,\n      offset: item.offset,\n      originalIndex: item.index,\n      data: item.data,\n    })\n  }\n\n  return transposedItems\n}\n\nexport function buildListState(\n  items: Item<any>[],\n  topItems: Item<any>[],\n  totalCount: number,\n  sizes: SizeState,\n  firstItemIndex: number\n): ListState {\n  const { lastSize, lastOffset, lastIndex } = sizes\n  let offsetTop = 0\n  let bottom = 0\n\n  if (items.length > 0) {\n    offsetTop = items[0].offset\n    const lastItem = items[items.length - 1]\n    bottom = lastItem.offset + lastItem.size\n  }\n\n  const total = lastOffset + (totalCount - lastIndex) * lastSize\n  const top = offsetTop\n  const offsetBottom = total - bottom\n\n  return {\n    items: transposeItems(items, sizes, firstItemIndex),\n    topItems: transposeItems(topItems, sizes, firstItemIndex),\n    topListHeight: topItems.reduce((height, item) => item.size + height, 0),\n    offsetTop,\n    offsetBottom,\n    top,\n    bottom,\n    totalCount,\n  }\n}\n\nexport const listStateSystem = u.system(\n  ([\n    { sizes, totalCount, data, firstItemIndex },\n    groupedListSystem,\n    { visibleRange, listBoundary, topListHeight: rangeTopListHeight },\n    { scrolledToInitialItem, initialTopMostItemIndex },\n    { topListHeight },\n    stateFlags,\n    { didMount },\n  ]) => {\n    const topItemsIndexes = u.statefulStream<Array<number>>([])\n    const itemsRendered = u.stream<ListItems>()\n\n    u.connect(groupedListSystem.topItemsIndexes, topItemsIndexes)\n\n    const listState = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(\n          didMount,\n          u.duc(visibleRange),\n          u.duc(totalCount),\n          u.duc(sizes),\n          u.duc(initialTopMostItemIndex),\n          scrolledToInitialItem,\n          u.duc(topItemsIndexes),\n          u.duc(firstItemIndex),\n          data\n        ),\n        u.filter(([mount]) => mount),\n        u.map(\n          ([\n            ,\n            [startOffset, endOffset],\n            totalCount,\n            sizes,\n            initialTopMostItemIndex,\n            scrolledToInitialItem,\n            topItemsIndexes,\n            firstItemIndex,\n            data,\n          ]) => {\n            const sizesValue = sizes\n            const { sizeTree, offsetTree } = sizesValue\n\n            if (totalCount === 0 || (startOffset === 0 && endOffset === 0)) {\n              return EMPTY_LIST_STATE\n            }\n\n            if (empty(sizeTree)) {\n              return buildListState(\n                probeItemSet(getInitialTopMostItemIndexNumber(initialTopMostItemIndex, totalCount), sizesValue, data),\n                [],\n                totalCount,\n                sizesValue,\n                firstItemIndex\n              )\n            }\n\n            const topItems = [] as Item<any>[]\n\n            if (topItemsIndexes.length > 0) {\n              const startIndex = topItemsIndexes[0]\n              const endIndex = topItemsIndexes[topItemsIndexes.length - 1]\n              let offset = 0\n              for (const range of rangesWithin(sizeTree, startIndex, endIndex)) {\n                const size = range.value\n                const rangeStartIndex = Math.max(range.start, startIndex)\n                const rangeEndIndex = Math.min(range.end, endIndex)\n                for (let i = rangeStartIndex; i <= rangeEndIndex; i++) {\n                  topItems.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size\n                }\n              }\n            }\n\n            // If the list hasn't scrolled to the initial item because the initial item was set,\n            // render empty list.\n            //\n            // This is a condition to be evaluated past the probe check, do not merge\n            // with the totalCount check above\n            if (!scrolledToInitialItem) {\n              return buildListState([], topItems, totalCount, sizesValue, firstItemIndex)\n            }\n\n            const minStartIndex = topItemsIndexes.length > 0 ? topItemsIndexes[topItemsIndexes.length - 1] + 1 : 0\n\n            const offsetPointRanges = rangesWithinOffsets(offsetTree, startOffset, endOffset, minStartIndex)\n            if (offsetPointRanges.length === 0) {\n              return null\n            }\n\n            const maxIndex = totalCount - 1\n\n            const items = u.tap([] as Item<any>[], (result) => {\n              for (const range of offsetPointRanges) {\n                const point = range.value\n                let offset = point.offset\n                let rangeStartIndex = range.start\n                const size = point.size\n\n                if (point.offset < startOffset) {\n                  rangeStartIndex += Math.floor((startOffset - point.offset) / size)\n                  offset += (rangeStartIndex - range.start) * size\n                }\n\n                if (rangeStartIndex < minStartIndex) {\n                  offset += (minStartIndex - rangeStartIndex) * size\n                  rangeStartIndex = minStartIndex\n                }\n\n                const endIndex = Math.min(range.end, maxIndex)\n\n                for (let i = rangeStartIndex; i <= endIndex; i++) {\n                  if (offset >= endOffset) {\n                    break\n                  }\n\n                  result.push({ index: i, size, offset: offset, data: data && data[i] })\n                  offset += size\n                }\n              }\n            })\n\n            return buildListState(items, topItems, totalCount, sizesValue, firstItemIndex)\n          }\n        ),\n        //@ts-expect-error filter needs to be fixed\n        u.filter((value) => value !== null),\n        u.distinctUntilChanged()\n      ),\n      EMPTY_LIST_STATE\n    )\n\n    u.connect(\n      u.pipe(\n        data,\n        u.filter((data) => data !== undefined),\n        u.map((data) => data!.length)\n      ),\n      totalCount\n    )\n\n    u.connect(u.pipe(listState, u.map(u.prop('topListHeight'))), topListHeight)\n    u.connect(topListHeight, rangeTopListHeight)\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => [state.top, state.bottom])\n      ),\n      listBoundary\n    )\n\n    u.connect(\n      u.pipe(\n        listState,\n        u.map((state) => state.items)\n      ),\n      itemsRendered\n    )\n\n    const endReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.withLatestFrom(totalCount, data),\n        u.filter(([{ items }, totalCount]) => items[items.length - 1].originalIndex === totalCount - 1),\n        u.map(([, totalCount, data]) => [totalCount - 1, data] as [number, unknown[]]),\n        u.distinctUntilChanged(tupleComparator),\n        u.map(([count]) => count as number)\n      )\n    )\n\n    const startReached = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.throttleTime(200),\n        u.filter(({ items, topItems }) => {\n          return items.length > 0 && items[0].originalIndex === topItems.length\n        }),\n        u.map(({ items }) => items[0].index),\n        u.distinctUntilChanged()\n      )\n    )\n\n    const rangeChanged = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.filter(({ items }) => items.length > 0),\n        u.map(({ items }) => {\n          return {\n            startIndex: items[0].index,\n            endIndex: items[items.length - 1].index,\n          } as ListRange\n        }),\n        u.distinctUntilChanged(rangeComparator)\n      )\n    )\n\n    return { listState, topItemsIndexes, endReached, startReached, rangeChanged, itemsRendered, ...stateFlags }\n  },\n  u.tup(\n    sizeSystem,\n    groupedListSystem,\n    sizeRangeSystem,\n    initialTopMostItemIndexSystem,\n    scrollToIndexSystem,\n    stateFlagsSystem,\n    propsReadySystem\n  ),\n  { singleton: true }\n)\n","export function simpleMemoize<T extends () => any>(func: T): T {\n  let called = false\n  let result: unknown\n\n  return (() => {\n    if (!called) {\n      called = true\n      result = func()\n    }\n    return result\n  }) as T\n}\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem, buildListState } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { propsReadySystem } from './propsReadySystem'\n\nexport const initialItemCountSystem = u.system(\n  ([{ sizes, firstItemIndex, data }, { listState }, { didMount }]) => {\n    const initialItemCount = u.statefulStream(0)\n\n    u.connect(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialItemCount),\n        u.filter(([, count]) => count !== 0),\n        u.withLatestFrom(sizes, firstItemIndex, data),\n        u.map(([[, count], sizes, firstItemIndex, data = []]) => {\n          let includedGroupsCount = 0\n          if (sizes.groupIndices.length > 0) {\n            for (const index of sizes.groupIndices) {\n              if (index - includedGroupsCount >= count) {\n                break\n              }\n              includedGroupsCount++\n            }\n          }\n          const adjustedCount = count + includedGroupsCount\n          const items = Array.from({ length: adjustedCount }).map((_, index) => ({ index, size: 0, offset: 0, data: data[index] }))\n          return buildListState(items, [], adjustedCount, sizes, firstItemIndex)\n        })\n      ),\n      listState\n    )\n\n    return { initialItemCount }\n  },\n  u.tup(sizeSystem, listStateSystem, propsReadySystem),\n  { singleton: true }\n)\n","import { connect, system, map, pipe, statefulStream, tup, filter } from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\n\nexport const topItemCountSystem = system(([{ topItemsIndexes }]) => {\n  const topItemCount = statefulStream(0)\n\n  connect(\n    pipe(\n      topItemCount,\n      filter((length) => length > 0),\n      map((length) => Array.from({ length }).map((_, index) => index))\n    ),\n    topItemsIndexes\n  )\n  return { topItemCount }\n}, tup(listStateSystem))\n","import * as u from '@virtuoso.dev/urx'\nimport { listStateSystem } from './listStateSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const totalListHeightSystem = u.system(\n  ([{ footerHeight, headerHeight }, { listState }]) => {\n    const totalListHeightChanged = u.stream<number>()\n    const totalListHeight = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(footerHeight, headerHeight, listState),\n        u.map(([footerHeight, headerHeight, listState]) => {\n          return footerHeight + headerHeight + listState.offsetBottom + listState.bottom\n        })\n      ),\n      0\n    )\n\n    u.connect(u.duc(totalListHeight), totalListHeightChanged)\n\n    return { totalListHeight, totalListHeightChanged }\n  },\n  u.tup(domIOSystem, listStateSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { UP, stateFlagsSystem } from './stateFlagsSystem'\nimport { ListItem } from './interfaces'\nimport { loggerSystem, LogLevel } from './loggerSystem'\n\n/**\n * Fixes upward scrolling by calculating and compensation from changed item heights, using scrollBy.\n */\nexport const upwardScrollFixSystem = u.system(\n  ([\n    { scrollBy, scrollTop, deviation, scrollingInProgress },\n    { isScrolling, isAtBottom, atBottomState, scrollDirection, lastJumpDueToItemResize },\n    { listState },\n    { beforeUnshiftWith, shiftWithOffset, sizes },\n    { log },\n  ]) => {\n    const deviationOffset = u.streamFromEmitter(\n      u.pipe(\n        listState,\n        u.withLatestFrom(lastJumpDueToItemResize),\n        u.scan(\n          ([, prevItems, prevTotalCount], [{ items, totalCount }, lastJumpDueToItemResize]) => {\n            let newDev = 0\n            if (prevTotalCount === totalCount) {\n              if (prevItems.length > 0 && items.length > 0) {\n                const firstItemIndex = items[0].originalIndex\n                const prevFirstItemIndex = prevItems[0].originalIndex\n                const atStart = firstItemIndex === 0 && prevFirstItemIndex === 0\n                const onlyItem = items.length === 1\n\n                if (!atStart) {\n                  for (let index = items.length - 1; index >= 0; index--) {\n                    const item = items[index]\n\n                    const prevItem = prevItems.find((pItem) => pItem.originalIndex === item.originalIndex)\n\n                    if (!prevItem) {\n                      continue\n                    }\n\n                    if (item.offset !== prevItem.offset || onlyItem) {\n                      newDev = item.offset - prevItem.offset + item.size - prevItem.size\n                      break\n                    }\n                  }\n                }\n              }\n\n              if (newDev !== 0) {\n                newDev += lastJumpDueToItemResize\n              }\n            }\n\n            return [newDev, items, totalCount] as [number, ListItem<any>[], number]\n          },\n          [0, [], 0] as [number, ListItem<any>[], number]\n        ),\n        u.filter(([amount]) => amount !== 0),\n        u.withLatestFrom(scrollTop, scrollDirection, scrollingInProgress, log, isAtBottom, atBottomState),\n        u.filter(([, scrollTop, scrollDirection, scrollingInProgress]) => {\n          // console.log({ amount, scrollTop, scrollDirection, scrollingInProgress, isAtBottom, atBottomState })\n          return !scrollingInProgress && scrollTop !== 0 && scrollDirection === UP // && (isAtBottom ? amount > 0 : true)\n        }),\n        u.map(([[amount], , , , log]) => {\n          log('Upward scrolling compensation', { amount }, LogLevel.DEBUG)\n          return amount\n        })\n      )\n    )\n\n    u.connect(\n      u.pipe(\n        deviationOffset,\n        u.withLatestFrom(deviation),\n        u.map(([amount, deviation]) => deviation - amount)\n      ),\n      deviation\n    )\n\n    // when the browser stops scrolling,\n    // restore the position and reset the glitching\n    u.subscribe(\n      u.pipe(\n        u.combineLatest(u.statefulStreamFromEmitter(isScrolling, false), deviation),\n        u.filter(([is, deviation]) => !is && deviation !== 0),\n        u.map(([_, deviation]) => deviation),\n        u.throttleTime(1)\n      ),\n      (offset) => {\n        if (offset > 0) {\n          u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n          u.publish(deviation, 0)\n        } else {\n          u.publish(deviation, 0)\n          u.publish(scrollBy, { top: -offset, behavior: 'auto' })\n        }\n      }\n    )\n\n    u.connect(\n      u.pipe(\n        shiftWithOffset,\n        u.map((offset) => {\n          return { top: -offset }\n        })\n      ),\n      scrollBy\n    )\n\n    u.connect(\n      u.pipe(\n        beforeUnshiftWith,\n        u.withLatestFrom(sizes),\n        u.map(([offset, { lastSize }]) => offset * lastSize)\n      ),\n      deviationOffset\n    )\n\n    return { deviation }\n  },\n  u.tup(domIOSystem, stateFlagsSystem, listStateSystem, sizeSystem, loggerSystem)\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const initialScrollTopSystem = u.system(\n  ([{ totalListHeight }, { didMount }, { scrollTo }]) => {\n    const initialScrollTop = u.statefulStream(0)\n\n    u.subscribe(\n      u.pipe(\n        didMount,\n        u.withLatestFrom(initialScrollTop),\n        u.filter(([, offset]) => offset !== 0),\n        u.map(([, offset]) => ({ top: offset }))\n      ),\n      (location) => {\n        u.handleNext(\n          u.pipe(\n            totalListHeight,\n            u.filter((val) => val !== 0)\n          ),\n          () => {\n            setTimeout(() => {\n              u.publish(scrollTo, location)\n            })\n          }\n        )\n      }\n    )\n\n    return {\n      initialScrollTop,\n    }\n  },\n  u.tup(totalListHeightSystem, propsReadySystem, domIOSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { domIOSystem } from './domIOSystem'\n\nexport const alignToBottomSystem = u.system(\n  ([{ viewportHeight }, { totalListHeight }]) => {\n    const alignToBottom = u.statefulStream(false)\n\n    const paddingTopAddition = u.statefulStreamFromEmitter(\n      u.pipe(\n        u.combineLatest(alignToBottom, viewportHeight, totalListHeight),\n        u.filter(([enabled]) => enabled),\n        u.map(([, viewportHeight, totalListHeight]) => {\n          return Math.max(0, viewportHeight - totalListHeight)\n        }),\n        u.distinctUntilChanged()\n      ),\n      0\n    )\n\n    return { alignToBottom, paddingTopAddition }\n  },\n  u.tup(domIOSystem, totalListHeightSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { findMaxKeyValue } from './AATree'\nimport { domIOSystem } from './domIOSystem'\nimport { offsetOf, originalIndexFromItemIndex, sizeSystem } from './sizeSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { listStateSystem } from './listStateSystem'\n\nexport interface ScrollIntoViewLocation {\n  index: number\n  behavior?: 'auto' | 'smooth'\n  done?: () => void\n}\n\nexport const scrollIntoViewSystem = u.system(\n  ([{ sizes, totalCount }, { scrollTop, viewportHeight, headerHeight, scrollingInProgress }, { scrollToIndex }]) => {\n    const scrollIntoView = u.stream<ScrollIntoViewLocation>()\n\n    u.connect(\n      u.pipe(\n        scrollIntoView,\n        u.withLatestFrom(sizes, viewportHeight, totalCount, headerHeight, scrollTop),\n        u.map(([{ index, behavior = 'auto', done }, sizes, viewportHeight, totalCount, headerHeight, scrollTop]) => {\n          const lastIndex = totalCount - 1\n          let location = null\n          index = originalIndexFromItemIndex(index, sizes)\n          index = Math.max(0, index, Math.min(lastIndex, index))\n\n          const itemTop = offsetOf(index, sizes.offsetTree) + headerHeight\n          if (itemTop < scrollTop) {\n            location = { index, behavior, align: 'start' }\n          } else {\n            const itemBottom = itemTop + findMaxKeyValue(sizes.sizeTree, index)[1]!\n\n            if (itemBottom > scrollTop + viewportHeight) {\n              location = { index, behavior, align: 'end' }\n            }\n          }\n\n          if (location) {\n            done &&\n              u.handleNext(\n                u.pipe(\n                  scrollingInProgress,\n                  u.skip(1),\n                  u.filter((value) => value === false)\n                ),\n                done\n              )\n          } else {\n            done && done()\n          }\n\n          return location\n        }),\n        u.filter((value) => value !== null)\n      ),\n      scrollToIndex\n    )\n\n    return {\n      scrollIntoView,\n    }\n  },\n  u.tup(sizeSystem, domIOSystem, scrollToIndexSystem, listStateSystem, loggerSystem),\n  { singleton: true }\n)\n","import * as u from '@virtuoso.dev/urx'\nimport { domIOSystem } from './domIOSystem'\nimport { followOutputSystem } from './followOutputSystem'\nimport { groupedListSystem } from './groupedListSystem'\nimport { initialItemCountSystem } from './initialItemCountSystem'\nimport { initialTopMostItemIndexSystem } from './initialTopMostItemIndexSystem'\nimport { listStateSystem } from './listStateSystem'\nimport { propsReadySystem } from './propsReadySystem'\nimport { scrollSeekSystem } from './scrollSeekSystem'\nimport { scrollToIndexSystem } from './scrollToIndexSystem'\nimport { sizeRangeSystem } from './sizeRangeSystem'\nimport { sizeSystem } from './sizeSystem'\nimport { topItemCountSystem } from './topItemCountSystem'\nimport { totalListHeightSystem } from './totalListHeightSystem'\nimport { upwardScrollFixSystem } from './upwardScrollFixSystem'\nimport { initialScrollTopSystem } from './initialScrollTopSystem'\nimport { alignToBottomSystem } from './alignToBottomSystem'\nimport { windowScrollerSystem } from './windowScrollerSystem'\nimport { loggerSystem } from './loggerSystem'\nimport { scrollIntoViewSystem } from './scrollIntoViewSystem'\n\n// workaround the growing list of systems below\n// fix this with 4.1 recursive conditional types\nconst featureGroup1System = u.system(\n  ([\n    sizeRange,\n    initialItemCount,\n    propsReady,\n    scrollSeek,\n    totalListHeight,\n    initialScrollTopSystem,\n    alignToBottom,\n    windowScroller,\n    scrollIntoView,\n  ]) => {\n    return {\n      ...sizeRange,\n      ...initialItemCount,\n      ...propsReady,\n      ...scrollSeek,\n      ...totalListHeight,\n      ...initialScrollTopSystem,\n      ...alignToBottom,\n      ...windowScroller,\n      ...scrollIntoView,\n    }\n  },\n  u.tup(\n    sizeRangeSystem,\n    initialItemCountSystem,\n    propsReadySystem,\n    scrollSeekSystem,\n    totalListHeightSystem,\n    initialScrollTopSystem,\n    alignToBottomSystem,\n    windowScrollerSystem,\n    scrollIntoViewSystem\n  )\n)\n\nexport const listSystem = u.system(\n  ([\n    {\n      totalCount,\n      sizeRanges,\n      fixedItemSize,\n      defaultItemSize,\n      trackItemSizes,\n      itemSize,\n      data,\n      firstItemIndex,\n      groupIndices,\n      statefulTotalCount,\n    },\n    { initialTopMostItemIndex, scrolledToInitialItem },\n    domIO,\n    followOutput,\n    { listState, topItemsIndexes, ...flags },\n    { scrollToIndex },\n    _,\n    { topItemCount },\n    { groupCounts },\n    featureGroup1,\n    log,\n  ]) => {\n    u.connect(flags.rangeChanged, featureGroup1.scrollSeekRangeChanged)\n    u.connect(u.pipe(featureGroup1.windowViewportRect, u.map(u.prop('visibleHeight'))), domIO.viewportHeight)\n\n    return {\n      // input\n      totalCount,\n      data,\n      firstItemIndex,\n      sizeRanges,\n      initialTopMostItemIndex,\n      scrolledToInitialItem,\n      topItemsIndexes,\n      topItemCount,\n      groupCounts,\n      fixedItemHeight: fixedItemSize,\n      defaultItemHeight: defaultItemSize,\n      ...followOutput,\n\n      // output\n      statefulTotalCount,\n      listState,\n      scrollToIndex,\n      trackItemSizes,\n      itemSize,\n      groupIndices,\n\n      // exported from stateFlagsSystem\n      ...flags,\n      // the bag of IO from featureGroup1System\n      ...featureGroup1,\n      ...domIO,\n      ...log,\n    }\n  },\n  u.tup(\n    sizeSystem,\n    initialTopMostItemIndexSystem,\n    domIOSystem,\n    followOutputSystem,\n    listStateSystem,\n    scrollToIndexSystem,\n    upwardScrollFixSystem,\n    topItemCountSystem,\n    groupedListSystem,\n    featureGroup1System,\n    loggerSystem\n  )\n)\n","import { simpleMemoize } from './simpleMemoize'\n\nconst WEBKIT_STICKY = '-webkit-sticky'\nconst STICKY = 'sticky'\n\nexport const positionStickyCssValue = simpleMemoize(() => {\n  if (typeof document === 'undefined') {\n    return STICKY\n  }\n  const node = document.createElement('div')\n  node.style.position = WEBKIT_STICKY\n  return node.style.position === WEBKIT_STICKY ? WEBKIT_STICKY : STICKY\n})\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\nimport {\n  compose,\n  connect,\n  getValue,\n  map,\n  pipe,\n  publish,\n  statefulStream,\n  stream,\n  Stream,\n  subscribe,\n  system,\n  tup,\n  withLatestFrom,\n  statefulStreamFromEmitter,\n  distinctUntilChanged,\n  noop,\n} from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { ComponentType, createElement, CSSProperties, FC } from 'react'\nimport useIsomorphicLayoutEffect from './hooks/useIsomorphicLayoutEffect'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport useScrollTop from './hooks/useScrollTop'\nimport useSize from './hooks/useSize'\nimport { Components, ComputeItemKey, GroupContent, GroupItemContent, ItemContent, ListRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { positionStickyCssValue } from './utils/positionStickyCssValue'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { correctItemSize } from './utils/correctItemSize'\nimport { ScrollerProps } from '.'\n\nexport function identity<T>(value: T) {\n  return value\n}\n\nconst listComponentPropsSystem = system(() => {\n  const itemContent = statefulStream<ItemContent<any, any> | GroupItemContent<any, any>>((index: number) => `Item ${index}`)\n  const context = statefulStream<unknown>(null)\n  const groupContent = statefulStream<GroupContent>((index: number) => `Group ${index}`)\n  const components = statefulStream<Components<any>>({})\n  const computeItemKey = statefulStream<ComputeItemKey<any, any>>(identity)\n  const headerFooterTag = statefulStream('div')\n  const scrollerRef = statefulStream<(ref: HTMLElement | Window | null) => void>(noop)\n\n  const distinctProp = <K extends keyof Components<any>>(propName: K, defaultValue: Components<any>[K] | null | 'div' = null) => {\n    return statefulStreamFromEmitter(\n      pipe(\n        components,\n        map((components) => components[propName]),\n        distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    groupContent,\n    components,\n    computeItemKey,\n    headerFooterTag,\n    scrollerRef,\n    FooterComponent: distinctProp('Footer'),\n    HeaderComponent: distinctProp('Header'),\n    TopItemListComponent: distinctProp('TopItemList'),\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    GroupComponent: distinctProp('Group', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n  }\n})\n\nexport function addDeprecatedAlias<T>(prop: Stream<T>, message: string) {\n  const alias = stream<T>()\n  subscribe(alias, () =>\n    console.warn(`react-virtuoso: You are using a deprecated property. ${message}`, 'color: red;', 'color: inherit;', 'color: blue;')\n  )\n  connect(alias, prop)\n  return alias\n}\n\nconst combinedSystem = system(([listSystem, propsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(propsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    group: addDeprecatedAlias(propsSystem.groupContent, 'Rename the %cgroup%c prop to %cgroupContent.'),\n    topItems: addDeprecatedAlias(listSystem.topItemCount, 'Rename the %ctopItems%c prop to %ctopItemCount.'),\n    itemHeight: addDeprecatedAlias(listSystem.fixedItemHeight, 'Rename the %citemHeight%c prop to %cfixedItemHeight.'),\n    scrollingStateChange: addDeprecatedAlias(listSystem.isScrolling, 'Rename the %cscrollingStateChange%c prop to %cisScrolling.'),\n    adjustForPrependedItems: stream<any>(),\n    maxHeightCacheSize: stream<any>(),\n    footer: stream<any>(),\n    header: stream<any>(),\n    HeaderContainer: stream<any>(),\n    FooterContainer: stream<any>(),\n    ItemContainer: stream<any>(),\n    ScrollContainer: stream<any>(),\n    GroupContainer: stream<any>(),\n    ListContainer: stream<any>(),\n    emptyComponent: stream<any>(),\n    scrollSeek: stream<any>(),\n  }\n\n  subscribe(deprecatedProps.adjustForPrependedItems, () => {\n    console.warn(\n      `react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.`,\n      'color: red;',\n      'color: inherit;',\n      'color: blue;'\n    )\n  })\n\n  subscribe(deprecatedProps.maxHeightCacheSize, () => {\n    console.warn(`react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.`)\n  })\n\n  subscribe(deprecatedProps.HeaderContainer, () => {\n    console.warn(\n      `react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.`\n    )\n  })\n\n  subscribe(deprecatedProps.FooterContainer, () => {\n    console.warn(\n      `react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.`\n    )\n  })\n\n  function deprecateComponentProp(stream: Stream<any>, componentName: string, propName: string) {\n    connect(\n      pipe(\n        stream,\n        withLatestFrom(propsSystem.components),\n        map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      propsSystem.components\n    )\n  }\n\n  subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    publish(propsSystem.components, { ...getValue(propsSystem.components), ScrollSeekPlaceholder: placeholder })\n    publish(listSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.footer, 'Footer', 'footer')\n  deprecateComponentProp(deprecatedProps.header, 'Header', 'header')\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n  deprecateComponentProp(deprecatedProps.emptyComponent, 'EmptyPlaceholder', 'emptyComponent')\n  deprecateComponentProp(deprecatedProps.GroupContainer, 'Group', 'GroupContainer')\n\n  return { ...listSystem, ...propsSystem, ...deprecatedProps }\n}, tup(listSystem, listComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => <div style={{ height }}></div>\n\nconst GROUP_STYLE = { position: positionStickyCssValue(), zIndex: 1, overflowAnchor: 'none' }\n\nexport const Items = React.memo(function VirtuosoItems({ showTopList = false }: { showTopList?: boolean }) {\n  const listState = useEmitterValue('listState')\n  const deviation = useEmitterValue('deviation')\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const context = useEmitterValue('context')\n  const groupContent = useEmitterValue('groupContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n\n  const ref = useChangedListContentsSizes(\n    sizeRanges,\n    itemSize,\n    trackItemSizes,\n    showTopList ? noop : scrollContainerStateCallback,\n    log,\n    customScrollParent\n  )\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const GroupComponent = useEmitterValue('GroupComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const hasGroups = useEmitterValue('groupIndices').length > 0\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n  const firstItemIndex = useEmitterValue('firstItemIndex')\n  const statefulTotalCount = useEmitterValue('statefulTotalCount')\n\n  const containerStyle: CSSProperties = showTopList\n    ? {}\n    : {\n        boxSizing: 'border-box',\n        paddingTop: listState.offsetTop + paddingTopAddition,\n        paddingBottom: listState.offsetBottom,\n        marginTop: deviation,\n      }\n\n  if (!showTopList && statefulTotalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  return createElement(\n    ListComponent,\n    {\n      ...contextPropIfNotDomElement(ListComponent, context),\n      ref,\n      style: containerStyle,\n      'data-test-id': showTopList ? 'virtuoso-top-item-list' : 'virtuoso-item-list',\n    },\n    (showTopList ? listState.topItems : listState.items).map((item) => {\n      const index = item.originalIndex!\n      const key = computeItemKey(index + firstItemIndex, item.data, context)\n\n      if (isSeeking) {\n        return createElement(ScrollSeekPlaceholder, {\n          ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n          key,\n          index: item.index,\n          height: item.size,\n          type: item.type || 'item',\n          ...(item.type === 'group' ? {} : { groupIndex: item.groupIndex }),\n        })\n      }\n\n      if (item.type === 'group') {\n        return createElement(\n          GroupComponent,\n          {\n            ...contextPropIfNotDomElement(GroupComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            style: GROUP_STYLE,\n          } as any,\n          groupContent(item.index)\n        )\n      } else {\n        return createElement(\n          ItemComponent,\n          {\n            ...contextPropIfNotDomElement(ItemComponent, context),\n            key,\n            'data-index': index,\n            'data-known-size': item.size,\n            'data-item-index': item.index,\n            'data-item-group-index': item.groupIndex,\n            style: { overflowAnchor: 'none' },\n          } as any,\n          hasGroups\n            ? (itemContent as GroupItemContent<any, any>)(item.index, item.groupIndex!, item.data, context)\n            : (itemContent as ItemContent<any, any>)(item.index, item.data, context)\n        )\n      }\n    })\n  )\n})\n\nexport const scrollerStyle: CSSProperties = {\n  height: '100%',\n  outline: 'none',\n  overflowY: 'auto',\n  position: 'relative',\n  WebkitOverflowScrolling: 'touch',\n}\n\nexport const viewportStyle: CSSProperties = {\n  width: '100%',\n  height: '100%',\n  position: 'absolute',\n  top: 0,\n}\n\nconst topItemListStyle: CSSProperties = {\n  width: '100%',\n  position: positionStickyCssValue(),\n  top: 0,\n}\n\nexport function contextPropIfNotDomElement(element: unknown, context: unknown) {\n  if (typeof element === 'string') {\n    return undefined\n  }\n  return { context }\n}\n\nconst Header: FC = React.memo(function VirtuosoHeader() {\n  const Header = useEmitterValue('HeaderComponent')\n  const headerHeight = usePublisher('headerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => headerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Header ? createElement(headerFooterTag, { ref }, createElement(Header, contextPropIfNotDomElement(Header, context))) : null\n})\n\nconst Footer: FC = React.memo(function VirtuosoFooter() {\n  const Footer = useEmitterValue('FooterComponent')\n  const footerHeight = usePublisher('footerHeight')\n  const headerFooterTag = useEmitterValue('headerFooterTag')\n  const ref = useSize((el) => footerHeight(correctItemSize(el, 'height')))\n  const context = useEmitterValue('context')\n  return Footer ? createElement(headerFooterTag, { ref }, createElement(Footer, contextPropIfNotDomElement(Footer, context))) : null\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nexport function buildScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: ComponentType<ScrollerProps> = React.memo(function VirtuosoScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('scrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const scrollerRefCallback = useEmitterValue('scrollerRef')\n    const context = useEmitterValue('context')\n\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      scrollerRefCallback\n    )\n\n    useEmitter('scrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        ref: scrollerRef as React.MutableRefObject<HTMLDivElement | null>,\n        style: { ...scrollerStyle, ...style },\n        'data-test-id': 'virtuoso-scroller',\n        'data-virtuoso-scroller': true,\n        tabIndex: 0,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nexport function buildWindowScroller({ usePublisher, useEmitter, useEmitterValue }: Hooks) {\n  const Scroller: Components['Scroller'] = React.memo(function VirtuosoWindowScroller({ style, children, ...props }) {\n    const scrollContainerStateCallback = usePublisher('windowScrollContainerState')\n    const ScrollerComponent = useEmitterValue('ScrollerComponent')!\n    const smoothScrollTargetReached = usePublisher('smoothScrollTargetReached')\n    const totalListHeight = useEmitterValue('totalListHeight')\n    const deviation = useEmitterValue('deviation')\n    const customScrollParent = useEmitterValue('customScrollParent')\n    const context = useEmitterValue('context')\n    const { scrollerRef, scrollByCallback, scrollToCallback } = useScrollTop(\n      scrollContainerStateCallback,\n      smoothScrollTargetReached,\n      ScrollerComponent,\n      noop,\n      customScrollParent\n    )\n\n    useIsomorphicLayoutEffect(() => {\n      scrollerRef.current = customScrollParent ? customScrollParent : window\n      return () => {\n        scrollerRef.current = null\n      }\n    }, [scrollerRef, customScrollParent])\n\n    useEmitter('windowScrollTo', scrollToCallback)\n    useEmitter('scrollBy', scrollByCallback)\n    return createElement(\n      ScrollerComponent,\n      {\n        style: { position: 'relative', ...style, ...(totalListHeight !== 0 ? { height: totalListHeight + deviation } : {}) },\n        'data-virtuoso-scroller': true,\n        ...props,\n        ...contextPropIfNotDomElement(ScrollerComponent, context),\n      },\n      children\n    )\n  })\n  return Scroller\n}\n\nconst Viewport: FC = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TopItemListContainer: FC = ({ children }) => {\n  const TopItemList = useEmitterValue('TopItemListComponent')\n  const headerHeight = useEmitterValue('headerHeight')\n  const style = { ...topItemListStyle, marginTop: `${headerHeight}px` }\n  const context = useEmitterValue('context')\n  return createElement(TopItemList || 'div', { style, context }, children)\n}\n\nconst ListRoot: FC<ListRootProps> = React.memo(function VirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const showTopList = useEmitterValue('topItemsIndexes').length > 0\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <Header />\n        <Items />\n        <Footer />\n      </TheViewport>\n      {showTopList && (\n        <TopItemListContainer>\n          <Items showTopList={true} />\n        </TopItemListContainer>\n      )}\n    </TheScroller>\n  )\n})\n\nexport type ListHandle = RefHandle<typeof List>\n\nexport const {\n  Component: List,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      groupContent: 'groupContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      headerFooterTag: 'headerFooterTag',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n\n      // deprecated\n      item: 'item',\n      group: 'group',\n      topItems: 'topItems',\n      itemHeight: 'itemHeight',\n      scrollingStateChange: 'scrollingStateChange',\n      maxHeightCacheSize: 'maxHeightCacheSize',\n      footer: 'footer',\n      header: 'header',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      GroupContainer: 'GroupContainer',\n      emptyComponent: 'emptyComponent',\n      HeaderContainer: 'HeaderContainer',\n      FooterContainer: 'FooterContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      adjustForPrependedItems: 'adjustForPrependedItems',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  ListRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { RefHandle, systemToComponent } from '@virtuoso.dev/react-urx'\n\nimport * as u from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC } from 'react'\nimport { gridSystem } from './gridSystem'\nimport useSize from './hooks/useSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\nimport { GridComponents, GridComputeItemKey, GridItemContent, GridRootProps } from './interfaces'\nimport { addDeprecatedAlias, buildScroller, buildWindowScroller, contextPropIfNotDomElement, identity, viewportStyle } from './List'\n\nconst gridComponentPropsSystem = u.system(() => {\n  const itemContent = u.statefulStream<GridItemContent<any>>((index) => `Item ${index}`)\n  const components = u.statefulStream<GridComponents>({})\n  const context = u.statefulStream<unknown>(null)\n  const itemClassName = u.statefulStream('virtuoso-grid-item')\n  const listClassName = u.statefulStream('virtuoso-grid-list')\n  const computeItemKey = u.statefulStream<GridComputeItemKey>(identity)\n  const scrollerRef = u.statefulStream<(ref: HTMLElement | null) => void>(u.noop)\n\n  const distinctProp = <K extends keyof GridComponents>(propName: K, defaultValue: GridComponents[K] | null | 'div' = null) => {\n    return u.statefulStreamFromEmitter(\n      u.pipe(\n        components,\n        u.map((components) => components[propName]),\n        u.distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    components,\n    computeItemKey,\n    itemClassName,\n    listClassName,\n    scrollerRef,\n    ListComponent: distinctProp('List', 'div'),\n    ItemComponent: distinctProp('Item', 'div'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder', 'div'),\n  }\n})\n\nconst combinedSystem = u.system(([gridSystem, gridComponentPropsSystem]) => {\n  const deprecatedProps = {\n    item: addDeprecatedAlias(gridComponentPropsSystem.itemContent, 'Rename the %citem%c prop to %citemContent.'),\n    ItemContainer: u.stream<any>(),\n    ScrollContainer: u.stream<any>(),\n    ListContainer: u.stream<any>(),\n    emptyComponent: u.stream<any>(),\n    scrollSeek: u.stream<any>(),\n  }\n\n  function deprecateComponentProp(stream: u.Stream<any>, componentName: string, propName: string) {\n    u.connect(\n      u.pipe(\n        stream,\n        u.withLatestFrom(gridComponentPropsSystem.components),\n        u.map(([comp, components]) => {\n          console.warn(`react-virtuoso: ${propName} property is deprecated. Pass components.${componentName} instead.`)\n          // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n          return { ...components, [componentName]: comp }\n        })\n      ),\n      gridComponentPropsSystem.components\n    )\n  }\n\n  u.subscribe(deprecatedProps.scrollSeek, ({ placeholder, ...config }) => {\n    console.warn(\n      `react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead.`\n    )\n    u.publish(gridComponentPropsSystem.components, {\n      ...u.getValue(gridComponentPropsSystem.components),\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ScrollSeekPlaceholder: placeholder,\n    })\n    u.publish(gridSystem.scrollSeekConfiguration, config)\n  })\n\n  deprecateComponentProp(deprecatedProps.ItemContainer, 'Item', 'ItemContainer')\n  deprecateComponentProp(deprecatedProps.ListContainer, 'List', 'ListContainer')\n  deprecateComponentProp(deprecatedProps.ScrollContainer, 'Scroller', 'ScrollContainer')\n\n  return { ...gridSystem, ...gridComponentPropsSystem, ...deprecatedProps }\n}, u.tup(gridSystem, gridComponentPropsSystem))\n\nconst GridItems: FC = React.memo(function GridItems() {\n  const gridState = useEmitterValue('gridState')\n  const listClassName = useEmitterValue('listClassName')\n  const itemClassName = useEmitterValue('itemClassName')\n  const itemContent = useEmitterValue('itemContent')\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const scrollHeightCallback = usePublisher('scrollHeight')\n  const ItemComponent = useEmitterValue('ItemComponent')!\n  const ListComponent = useEmitterValue('ListComponent')!\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder')!\n  const context = useEmitterValue('context')\n  const itemDimensions = usePublisher('itemDimensions')\n\n  const listRef = useSize((el) => {\n    const scrollHeight = el.parentElement!.parentElement!.scrollHeight\n    scrollHeightCallback(scrollHeight)\n    const firstItem = el.firstChild as HTMLElement\n    if (firstItem) {\n      itemDimensions(firstItem.getBoundingClientRect())\n    }\n  })\n\n  return createElement(\n    ListComponent,\n    {\n      ref: listRef,\n      className: listClassName,\n      ...contextPropIfNotDomElement(ListComponent, context),\n      style: { paddingTop: gridState.offsetTop, paddingBottom: gridState.offsetBottom },\n    },\n    gridState.items.map((item) => {\n      const key = computeItemKey(item.index)\n      return isSeeking\n        ? createElement(ScrollSeekPlaceholder, {\n            key,\n            ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n            index: item.index,\n            height: gridState.itemHeight,\n            width: gridState.itemWidth,\n          })\n        : createElement(\n            ItemComponent,\n            { ...contextPropIfNotDomElement(ItemComponent, context), className: itemClassName, 'data-index': item.index, key },\n            itemContent(item.index, context)\n          )\n    })\n  )\n})\n\nconst Viewport: FC = ({ children }) => {\n  const viewportDimensions = usePublisher('viewportDimensions')\n\n  const viewportRef = useSize((el) => {\n    viewportDimensions(el.getBoundingClientRect())\n  })\n\n  return (\n    <div style={viewportStyle} ref={viewportRef}>\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle}>\n      {children}\n    </div>\n  )\n}\n\nconst GridRoot: FC<GridRootProps> = React.memo(function GridRoot({ ...props }) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        <GridItems />\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nconst {\n  Component: Grid,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    optional: {\n      totalCount: 'totalCount',\n      overscan: 'overscan',\n      itemContent: 'itemContent',\n      components: 'components',\n      computeItemKey: 'computeItemKey',\n      initialItemCount: 'initialItemCount',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      listClassName: 'listClassName',\n      itemClassName: 'itemClassName',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n\n      // deprecated\n      item: 'item',\n      ItemContainer: 'ItemContainer',\n      ScrollContainer: 'ScrollContainer',\n      ListContainer: 'ListContainer',\n      scrollSeek: 'scrollSeek',\n    },\n    methods: {\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n      scrollToIndex: 'scrollToIndex',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n    },\n  },\n  GridRoot\n)\n\nexport type foo<T> = T extends React.ForwardRefExoticComponent<React.RefAttributes<infer Handle>> ? Handle : never\n\nexport type GridHandle = RefHandle<typeof Grid>\nexport { Grid }\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { systemToComponent } from '@virtuoso.dev/react-urx'\nimport { map, pipe, statefulStream, system, tup, statefulStreamFromEmitter, distinctUntilChanged, noop, compose } from '@virtuoso.dev/urx'\nimport * as React from 'react'\nimport { createElement, FC } from 'react'\nimport useChangedListContentsSizes from './hooks/useChangedChildSizes'\nimport { ComputeItemKey, ItemContent, FixedHeaderContent, TableComponents, TableRootProps } from './interfaces'\nimport { listSystem } from './listSystem'\nimport { identity, buildScroller, buildWindowScroller, viewportStyle, contextPropIfNotDomElement } from './List'\nimport useSize from './hooks/useSize'\nimport { correctItemSize } from './utils/correctItemSize'\nimport useWindowViewportRectRef from './hooks/useWindowViewportRect'\n\nconst tableComponentPropsSystem = system(() => {\n  const itemContent = statefulStream<ItemContent<any, unknown>>((index: number) => <td>Item ${index}</td>)\n  const context = statefulStream<unknown>(null)\n  const fixedHeaderContent = statefulStream<FixedHeaderContent>(null)\n  const components = statefulStream<TableComponents>({})\n  const computeItemKey = statefulStream<ComputeItemKey<any, unknown>>(identity)\n  const scrollerRef = statefulStream<(ref: HTMLElement | Window | null) => void>(noop)\n\n  const distinctProp = <K extends keyof TableComponents>(\n    propName: K,\n    defaultValue: TableComponents[K] | null | 'thead' | 'table' | 'tbody' | 'tr' | 'div' = null\n  ) => {\n    return statefulStreamFromEmitter(\n      pipe(\n        components,\n        map((components) => components[propName]),\n        distinctUntilChanged()\n      ),\n      defaultValue\n    )\n  }\n\n  return {\n    context,\n    itemContent,\n    fixedHeaderContent,\n    components,\n    computeItemKey,\n    scrollerRef,\n    TableComponent: distinctProp('Table', 'table'),\n    TableHeadComponent: distinctProp('TableHead', 'thead'),\n    TableBodyComponent: distinctProp('TableBody', 'tbody'),\n    TableRowComponent: distinctProp('TableRow', 'tr'),\n    ScrollerComponent: distinctProp('Scroller', 'div'),\n    EmptyPlaceholder: distinctProp('EmptyPlaceholder'),\n    ScrollSeekPlaceholder: distinctProp('ScrollSeekPlaceholder'),\n  }\n})\n\nconst combinedSystem = system(([listSystem, propsSystem]) => {\n  return { ...listSystem, ...propsSystem }\n}, tup(listSystem, tableComponentPropsSystem))\n\nconst DefaultScrollSeekPlaceholder = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height }}></td>\n  </tr>\n)\n\nconst FillerRow = ({ height }: { height: number }) => (\n  <tr>\n    <td style={{ height: height, padding: 0, border: 0 }}></td>\n  </tr>\n)\n\nexport const Items = React.memo(function VirtuosoItems() {\n  const listState = useEmitterValue('listState')\n  const deviation = useEmitterValue('deviation')\n  const sizeRanges = usePublisher('sizeRanges')\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const windowScrollContainerStateCallback = usePublisher('windowScrollContainerState')\n  const _scrollContainerStateCallback = usePublisher('scrollContainerState')\n  const scrollContainerStateCallback =\n    customScrollParent || useWindowScroll ? windowScrollContainerStateCallback : _scrollContainerStateCallback\n  const itemContent = useEmitterValue('itemContent')\n  const trackItemSizes = useEmitterValue('trackItemSizes')\n  const itemSize = useEmitterValue('itemSize')\n  const log = useEmitterValue('log')\n\n  const ref = useChangedListContentsSizes(sizeRanges, itemSize, trackItemSizes, scrollContainerStateCallback, log, customScrollParent)\n  const EmptyPlaceholder = useEmitterValue('EmptyPlaceholder')\n  const ScrollSeekPlaceholder = useEmitterValue('ScrollSeekPlaceholder') || DefaultScrollSeekPlaceholder\n  const TableBodyComponent = useEmitterValue('TableBodyComponent')!\n  const TableRowComponent = useEmitterValue('TableRowComponent')!\n  const computeItemKey = useEmitterValue('computeItemKey')\n  const isSeeking = useEmitterValue('isSeeking')\n  const paddingTopAddition = useEmitterValue('paddingTopAddition')\n  const firstItemIndex = useEmitterValue('firstItemIndex')\n  const statefulTotalCount = useEmitterValue('statefulTotalCount')\n  const context = useEmitterValue('context')\n\n  if (statefulTotalCount === 0 && EmptyPlaceholder) {\n    return createElement(EmptyPlaceholder, contextPropIfNotDomElement(EmptyPlaceholder, context))\n  }\n\n  const paddingTop = listState.offsetTop + paddingTopAddition + deviation\n  const paddingBottom = listState.offsetBottom\n\n  const paddingTopEl = paddingTop > 0 ? <FillerRow height={paddingTop} key=\"padding-top\" /> : null\n\n  const paddingBottomEl = paddingBottom > 0 ? <FillerRow height={paddingBottom} key=\"padding-bottom\" /> : null\n\n  const items = listState.items.map((item) => {\n    const index = item.originalIndex!\n    const key = computeItemKey(index + firstItemIndex, item.data, context)\n\n    if (isSeeking) {\n      return createElement(ScrollSeekPlaceholder, {\n        ...contextPropIfNotDomElement(ScrollSeekPlaceholder, context),\n        key,\n        index: item.index,\n        height: item.size,\n        type: item.type || 'item',\n      })\n    }\n    return createElement(\n      TableRowComponent,\n      {\n        ...contextPropIfNotDomElement(TableRowComponent, context),\n        key,\n        'data-index': index,\n        'data-known-size': item.size,\n        'data-item-index': item.index,\n        style: { overflowAnchor: 'none' },\n      } as any,\n      itemContent(item.index, item.data, context)\n    )\n  })\n\n  return createElement(\n    TableBodyComponent,\n    { ref, 'data-test-id': 'virtuoso-item-list', ...contextPropIfNotDomElement(TableBodyComponent, context) },\n    [paddingTopEl, ...items, paddingBottomEl]\n  )\n})\n\nexport interface Hooks {\n  usePublisher: typeof usePublisher\n  useEmitterValue: typeof useEmitterValue\n  useEmitter: typeof useEmitter\n}\n\nconst Viewport: FC = ({ children }) => {\n  const viewportHeight = usePublisher('viewportHeight')\n  const viewportRef = useSize(compose(viewportHeight, (el) => correctItemSize(el, 'height')))\n\n  return (\n    <div style={viewportStyle} ref={viewportRef} data-viewport-type=\"element\">\n      {children}\n    </div>\n  )\n}\n\nconst WindowViewport: FC = ({ children }) => {\n  const windowViewportRect = usePublisher('windowViewportRect')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const viewportRef = useWindowViewportRectRef(windowViewportRect, customScrollParent)\n\n  return (\n    <div ref={viewportRef} style={viewportStyle} data-viewport-type=\"window\">\n      {children}\n    </div>\n  )\n}\n\nconst TableRoot: FC<TableRootProps> = React.memo(function TableVirtuosoRoot(props) {\n  const useWindowScroll = useEmitterValue('useWindowScroll')\n  const customScrollParent = useEmitterValue('customScrollParent')\n  const fixedHeaderHeight = usePublisher('fixedHeaderHeight')\n  const fixedHeaderContent = useEmitterValue('fixedHeaderContent')\n  const context = useEmitterValue('context')\n  const theadRef = useSize(compose(fixedHeaderHeight, (el) => correctItemSize(el, 'height')))\n  const TheScroller = customScrollParent || useWindowScroll ? WindowScroller : Scroller\n  const TheViewport = customScrollParent || useWindowScroll ? WindowViewport : Viewport\n  const TheTable = useEmitterValue('TableComponent')\n  const TheTHead = useEmitterValue('TableHeadComponent')\n\n  const theHead = fixedHeaderContent\n    ? React.createElement(\n        TheTHead!,\n        {\n          key: 'TableHead',\n          style: { zIndex: 1, position: 'sticky', top: 0 },\n          ref: theadRef,\n          ...contextPropIfNotDomElement(TheTHead, context),\n        } as any,\n        fixedHeaderContent()\n      )\n    : null\n\n  return (\n    <TheScroller {...props}>\n      <TheViewport>\n        {React.createElement(TheTable!, { style: { borderSpacing: 0 }, ...contextPropIfNotDomElement(TheTable, context) } as any, [\n          theHead,\n          <Items key=\"TableBody\" />,\n        ])}\n      </TheViewport>\n    </TheScroller>\n  )\n})\n\nexport const {\n  Component: Table,\n  usePublisher,\n  useEmitterValue,\n  useEmitter,\n} = systemToComponent(\n  combinedSystem,\n  {\n    required: {},\n    optional: {\n      context: 'context',\n      followOutput: 'followOutput',\n      firstItemIndex: 'firstItemIndex',\n      itemContent: 'itemContent',\n      fixedHeaderContent: 'fixedHeaderContent',\n      overscan: 'overscan',\n      increaseViewportBy: 'increaseViewportBy',\n      totalCount: 'totalCount',\n      topItemCount: 'topItemCount',\n      initialTopMostItemIndex: 'initialTopMostItemIndex',\n      components: 'components',\n      groupCounts: 'groupCounts',\n      atBottomThreshold: 'atBottomThreshold',\n      computeItemKey: 'computeItemKey',\n      defaultItemHeight: 'defaultItemHeight',\n      fixedItemHeight: 'fixedItemHeight',\n      itemSize: 'itemSize',\n      scrollSeekConfiguration: 'scrollSeekConfiguration',\n      data: 'data',\n      initialItemCount: 'initialItemCount',\n      initialScrollTop: 'initialScrollTop',\n      alignToBottom: 'alignToBottom',\n      useWindowScroll: 'useWindowScroll',\n      customScrollParent: 'customScrollParent',\n      scrollerRef: 'scrollerRef',\n      logLevel: 'logLevel',\n    },\n    methods: {\n      scrollToIndex: 'scrollToIndex',\n      scrollIntoView: 'scrollIntoView',\n      scrollTo: 'scrollTo',\n      scrollBy: 'scrollBy',\n    },\n    events: {\n      isScrolling: 'isScrolling',\n      endReached: 'endReached',\n      startReached: 'startReached',\n      rangeChanged: 'rangeChanged',\n      atBottomStateChange: 'atBottomStateChange',\n      atTopStateChange: 'atTopStateChange',\n      totalListHeightChanged: 'totalListHeightChanged',\n      itemsRendered: 'itemsRendered',\n      groupIndices: 'groupIndices',\n    },\n  },\n  TableRoot\n)\n\nconst Scroller = buildScroller({ usePublisher, useEmitterValue, useEmitter })\nconst WindowScroller = buildWindowScroller({ usePublisher, useEmitterValue, useEmitter })\n","import { ForwardRefExoticComponent, ReactElement, Ref } from 'react'\nimport { Grid, GridHandle } from './Grid'\n\nimport {\n  Components,\n  ComputeItemKey,\n  FollowOutput,\n  GridComponents,\n  GridComputeItemKey,\n  GridItemContent,\n  GroupContent,\n  GroupItemContent,\n  IndexLocationWithAlign,\n  ItemContent,\n  ListItem,\n  ListRange,\n  ScrollSeekConfiguration,\n  TableComponents,\n  FixedHeaderContent,\n} from './interfaces'\nimport { List, ListHandle } from './List'\nimport { Table } from './Table'\nimport { ScrollIntoViewLocation } from './scrollIntoViewSystem'\ntype CompProps<T> = T extends ForwardRefExoticComponent<infer R> ? R : never\ntype ListProps = CompProps<typeof List>\ntype GridProps = CompProps<typeof Grid>\n\nexport interface VirtuosoProps<D, C> extends Omit<ListProps, 'groupCounts' | 'groupContent' | 'itemsRendered'> {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Additional context available in the custom components and content callbacks\n   */\n  context?: C\n\n  /**\n   * *The property accepts pixel values.*\n   *\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in react-window).\n   *\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   *\n   * *The property accepts pixel values.*\n   *\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   *\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set the amount of items to remain fixed at the top of the list.\n   *\n   * For a header that scrolls away when scrolling, check the `components.Header` property.\n   */\n  topItemCount?: number\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   * Pass in an object to achieve additional effects similar to `scrollToIndex`.\n   */\n  initialTopMostItemIndex?: number | IndexLocationWithAlign\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: Components<C>\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: (el: HTMLElement, field: 'offsetHeight' | 'offsetWidth') => number\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Set to customize the wrapper tag for the header and footer components (default is `div`).\n   */\n  headerFooterTag?: string\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the list won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n}\n\nexport interface GroupedVirtuosoProps<D, C>\n  extends Omit<VirtuosoProps<D, C>, 'totalCount' | 'itemContent'>,\n    Pick<ListProps, 'groupCounts' | 'groupContent'> {\n  /**\n   * Specifies the amount of items in each group (and, actually, how many groups are there).\n   * For example, passing [20, 30] will display 2 groups with 20 and 30 items each.\n   */\n  groupCounts?: number[]\n\n  /**\n   * Specifies how each each group header gets rendered. The callback receives the zero-based index of the group.\n   */\n  groupContent?: GroupContent\n\n  /**\n   * Specifies how each each item gets rendered.\n   */\n  itemContent?: GroupItemContent<D, C>\n}\n\nexport interface TableVirtuosoProps<D, C> extends Omit<VirtuosoProps<D, C>, 'components' | 'headerFooterTag' | 'topItemCount'> {\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the table.\n   */\n  components?: TableComponents<C>\n  /**\n   * Set the contents of the table header.\n   */\n  fixedHeaderContent?: FixedHeaderContent\n\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount?: number\n\n  /**\n   * The data items to be rendered. If data is set, the total count will be inferred from the length of the array.\n   */\n  data?: readonly D[]\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   * See the `increaseViewportBy` property for a similar behavior (equivalent to the `overscan` in `react-window`).\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * Set the increaseViewportBy property to artificially increase the viewport size, causing items to be rendered before outside of the viewport.\n   * The property causes the component to render more items than the necessary, but can help with slow loading content.\n   * Using `{ top?: number, bottom?: number }` lets you set the increase for each end separately.\n   */\n  increaseViewportBy?: number | { top: number; bottom: number }\n\n  /**\n   * Set to a value between 0 and totalCount - 1 to make the list start scrolled to that item.\n   */\n  initialTopMostItemIndex?: number\n\n  /**\n   * Set this value to offset the initial location of the list.\n   * Warning: using this property will still run a render cycle at the scrollTop: 0 list window.\n   * If possible, avoid using it and stick to `initialTopMostItemIndex` instead.\n   */\n  initialScrollTop?: number\n\n  /**\n   * Use for server-side rendering - if set, the list will render the specified amount of items\n   * regardless of the container / item size.\n   */\n  initialItemCount?: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: ItemContent<D, C>\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: ComputeItemKey<D, C>\n\n  /**\n   * By default, the component assumes the default item height from the first rendered item (rendering it as a \"probe\").\n   *\n   * If the first item turns out to be an outlier (very short or tall), the rest of the rendering will be slower,\n   * as multiple passes of rendering should happen for the list to fill the viewport.\n   *\n   * Setting `defaultItemHeight` causes the component to skip the \"probe\" rendering and use the property\n   * value as default height instead.\n   */\n  defaultItemHeight?: number\n\n  /**\n   * Allows customizing the height/width calculation of `Item` elements.\n   *\n   * The default implementation reads `el.getBoundingClientRect().height` and `el.getBoundingClientRect().width`.\n   */\n  itemSize?: (el: HTMLElement, field: 'offsetHeight' | 'offsetWidth') => number\n\n  /**\n   * Can be used to improve performance if the rendered items are of known size.\n   * Setting it causes the component to skip item measurements.\n   */\n  fixedItemHeight?: number\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * If set to `true`, the list automatically scrolls to bottom if the total count is changed.\n   * Set to `\"smooth\"` for an animated scrolling.\n   *\n   * By default, `followOutput` scrolls down only if the list is already at the bottom.\n   * To implement an arbitrary logic behind that, pass a function:\n   *\n   * ```tsx\n   * <Virtuoso\n   *  followOutput={(isAtBottom: boolean) => {\n   *    if (expression) {\n   *      return 'smooth' // can be 'auto' or false to avoid scrolling\n   *    } else {\n   *      return false\n   *    }\n   *  }} />\n   * ```\n   */\n  followOutput?: FollowOutput\n\n  /**\n   * Use when implementing inverse infinite scrolling - decrease the value this property\n   * in combination with  `data` or `totalCount` to prepend items to the top of the list.\n   *\n   * Warning: the firstItemIndex should **be a positive number**, based on the total amount of items to be displayed.\n   */\n  firstItemIndex?: number\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Called when the total list height is changed due to new items or viewport resize.\n   */\n  totalListHeightChanged?: (height: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  itemsRendered?: (items: ListItem<D>[]) => void\n\n  /**\n   * Setting `alignToBottom` to `true` aligns the items to the bottom of the list if the list is shorter than the viewport.\n   * Use `followOutput` property to keep the list aligned when new items are appended.\n   */\n  alignToBottom?: boolean\n\n  /**\n   * Uses the document scroller rather than wrapping the list in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the table won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | Window | null) => any\n\n  /**\n   * By default `4`. Redefine to change how much away from the bottom the scroller can be before the list is not considered not at bottom.\n   */\n  atBottomThreshold?: number\n}\n\nexport interface VirtuosoGridProps<C extends unknown = unknown> extends GridProps {\n  /**\n   * The total amount of items to be rendered.\n   */\n  totalCount: number\n\n  /**\n   * Set the callback to specify the contents of the item.\n   */\n  itemContent?: GridItemContent<C>\n\n  /**\n   * Use the `components` property for advanced customization of the elements rendered by the list.\n   */\n  components?: GridComponents<C>\n\n  /**\n   * Set the overscan property to make the component \"chunk\" the rendering of new items on scroll.\n   * The property causes the component to render more items than the necessary, but reduces the re-renders on scroll.\n   * Setting `{ main: number, reverse: number }` lets you extend the list in both the main and the reverse scrollable directions.\n   */\n  overscan?: number | { main: number; reverse: number }\n\n  /**\n   * If specified, the component will use the function to generate the `key` property for each list item.\n   */\n  computeItemKey?: GridComputeItemKey\n\n  /**\n   * Use to display placeholders if the user scrolls fast through the list.\n   *\n   * Set `components.ScrollSeekPlaceholder` to change the placeholder content.\n   */\n  scrollSeekConfiguration?: ScrollSeekConfiguration | false\n\n  /**\n   * Called when the list starts/stops scrolling.\n   */\n  isScrolling?: (isScrolling: boolean) => void\n\n  /**\n   * Gets called when the user scrolls to the end of the list.\n   * Receives the last item index as an argument. Can be used to implement endless scrolling.\n   */\n  endReached?: (index: number) => void\n\n  /**\n   * Called when the user scrolls to the start of the list.\n   */\n  startReached?: (index: number) => void\n\n  /**\n   * Called with the new set of items each time the list items are rendered due to scrolling.\n   */\n  rangeChanged?: (range: ListRange) => void\n\n  /**\n   * Called with true / false when the list has reached the bottom / gets scrolled up.\n   * Can be used to load newer items, like `tail -f`.\n   */\n  atBottomStateChange?: (atBottom: boolean) => void\n\n  /**\n   * Called with `true` / `false` when the list has reached the top / gets scrolled down.\n   */\n  atTopStateChange?: (atTop: boolean) => void\n\n  /**\n   * Provides access to the root DOM element\n   */\n  scrollerRef?: (ref: HTMLElement | null) => any\n\n  /**\n   * Sets the className for the list DOM element\n   */\n  listClassName?: string\n\n  /**\n   * Sets the grid items' className\n   */\n  itemClassName?: string\n\n  /**\n   * Uses the document scroller rather than wrapping the grid in its own.\n   */\n  useWindowScroll?: boolean\n\n  /**\n   * Pass a reference to a scrollable parent element, so that the grid won't wrap in its own.\n   */\n  customScrollParent?: HTMLElement\n}\n\nexport interface VirtuosoHandle extends ListHandle {\n  /**\n   * Scrolls the component to the specified item index. See {{IndexLocationWithAlign}} for more options.\n   */\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  /**\n   * Scrolls the item into view if necessary. See [the website example](http://virtuoso.dev/keyboard-navigation/) for an implementation.\n   */\n  scrollIntoView(location: ScrollIntoViewLocation): void\n  /**\n   * Scrolls the component to the specified location. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollTo(location: ScrollToOptions): void\n  /**\n   * Scrolls the component with the specified amount. See [ScrollToOptions (MDN)](https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions)\n   */\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface GroupedVirtuosoHandle extends ListHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface VirtuosoGridHandle extends GridHandle {\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport interface TableVirtuosoHandle extends ListHandle {\n  scrollIntoView(location: ScrollIntoViewLocation): void\n  scrollToIndex(location: number | IndexLocationWithAlign): void\n  scrollTo(location: ScrollToOptions): void\n  scrollBy(location: ScrollToOptions): void\n}\n\nexport const Virtuoso = List as <ItemData extends unknown = any, Context extends unknown = any>(\n  props: VirtuosoProps<ItemData, Context> & { ref?: Ref<VirtuosoHandle> }\n) => ReactElement\n\nexport const GroupedVirtuoso = List as <ItemData extends unknown = any, Context extends unknown = any>(\n  props: GroupedVirtuosoProps<ItemData, Context> & { ref?: Ref<GroupedVirtuosoHandle> }\n) => ReactElement\n\nexport const TableVirtuoso = Table as <ItemData extends unknown = any, Context extends unknown = any>(\n  props: TableVirtuosoProps<ItemData, Context> & { ref?: Ref<TableVirtuosoHandle> }\n) => ReactElement\n\nexport const VirtuosoGrid = Grid as <Context extends unknown = any>(\n  props: VirtuosoGridProps<Context> & { ref?: Ref<VirtuosoGridHandle> }\n) => ReactElement\n"]},"metadata":{},"sourceType":"module"}